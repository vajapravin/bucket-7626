/*! Copyright Elasticsearch B.V. and/or license to Elasticsearch B.V. under one or more contributor license agreements
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */(function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var executeModules=data[2];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}deferredModules.push.apply(deferredModules,executeModules||[]);return checkDeferredModules()}function checkDeferredModules(){var result;for(var i=0;i<deferredModules.length;i++){var deferredModule=deferredModules[i];var fulfilled=true;for(var j=1;j<deferredModule.length;j++){var depId=deferredModule[j];if(installedChunks[depId]!==0)fulfilled=false}if(fulfilled){deferredModules.splice(i--,1);result=__webpack_require__(__webpack_require__.s=deferredModule[0])}}return result}var installedModules={};var installedChunks={1:0};var deferredModules=[];function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="__REPLACE_WITH_PUBLIC_PATH__";var jsonpArray=window["webpackJsonp"]=window["webpackJsonp"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;deferredModules.push([3086,0]);return checkDeferredModules()})({1115:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_router_dom_1=__webpack_require__(37);var url_1=__webpack_require__(44);var ErrorGroupDetails_1=tslib_1.__importDefault(__webpack_require__(3093));var ServiceDetails_1=__webpack_require__(3115);var TransactionDetails_1=__webpack_require__(3147);var Home_1=__webpack_require__(3178);var renderAsRedirectTo=function renderAsRedirectTo(to){return function(_ref){var location=_ref.location;return react_1.default.createElement(react_router_dom_1.Redirect,{to:_extends({},location,{pathname:to})})}};exports.routes=[{exact:true,path:"/",render:renderAsRedirectTo("/services"),breadcrumb:"APM"},{exact:true,path:"/:serviceName/errors/:groupId",component:ErrorGroupDetails_1.default,breadcrumb:function breadcrumb(_ref2){var match=_ref2.match;return match.params.groupId}},{exact:true,path:"/:serviceName/errors",component:ServiceDetails_1.ServiceDetails,breadcrumb:"Errors"},{switch:true,routes:[{exact:true,path:"/invalid-license",breadcrumb:"Invalid License",render:function render(){return react_1.default.createElement("div",null,"Invalid license")}},{exact:true,path:"/services",component:Home_1.Home,breadcrumb:"Services"},{exact:true,path:"/traces",component:Home_1.Home,breadcrumb:"Traces"},{exact:true,path:"/:serviceName",breadcrumb:function breadcrumb(_ref3){var match=_ref3.match;return match.params.serviceName},render:function render(props){return renderAsRedirectTo("/"+props.match.params.serviceName+"/transactions")(props)}}]},{exact:true,path:"/:serviceName/transactions",component:ServiceDetails_1.ServiceDetails,breadcrumb:"Transactions"},{exact:true,path:"/:serviceName/transactions/:transactionType",component:ServiceDetails_1.ServiceDetails,breadcrumb:null},{exact:true,path:"/:serviceName/metrics",component:ServiceDetails_1.ServiceDetails,breadcrumb:"Metrics"},{exact:true,path:"/:serviceName/transactions/:transactionType/:transactionName",component:TransactionDetails_1.TransactionDetails,breadcrumb:function breadcrumb(_ref4){var match=_ref4.match;return url_1.legacyDecodeURIComponent(match.params.transactionName)}}]},1116:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_redux_request_1=__webpack_require__(74);var error_groups_1=__webpack_require__(685);var helpers_1=__webpack_require__(226);var ID="errorDistribution";var INITIAL_DATA={buckets:[],totalHits:0,bucketSize:0};var withInitialData=helpers_1.createInitialDataSelector(INITIAL_DATA);function getErrorDistribution(state){return withInitialData(state.reactReduxRequest[ID])}exports.getErrorDistribution=getErrorDistribution;function ErrorDistributionRequest(_ref){var urlParams=_ref.urlParams,render=_ref.render;var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,errorGroupId=urlParams.errorGroupId,kuery=urlParams.kuery;if(!(serviceName&&start&&end)){return null}return react_1.default.createElement(react_redux_request_1.Request,{id:ID,fn:error_groups_1.loadErrorDistribution,args:[{serviceName:serviceName,start:start,end:end,errorGroupId:errorGroupId,kuery:kuery}],selector:getErrorDistribution,render:render})}exports.ErrorDistributionRequest=ErrorDistributionRequest},1117:function(module,exports,__webpack_require__){"use strict";var getSuggestions=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(query,selectionStart,apmIndexPattern,boolFilter){var autocompleteProvider,config,getAutocompleteSuggestions;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:autocompleteProvider=autocomplete_providers_1.getAutocompleteProvider("kuery");if(autocompleteProvider){_context.next=3;break}return _context.abrupt("return",[]);case 3:config={get:function get(){return true}};getAutocompleteSuggestions=autocompleteProvider({config:config,indexPatterns:[apmIndexPattern],boolFilter:boolFilter});return _context.abrupt("return",getAutocompleteSuggestions({query:query,selectionStart:selectionStart,selectionEnd:selectionStart}));case 6:case"end":return _context.stop()}}},_callee,this)}));return function getSuggestions(_x,_x2,_x3,_x4){return _ref.apply(this,arguments)}}();var getAPMIndexPatternForKuery=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var apmIndexPattern;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return savedObjects_1.getAPMIndexPattern();case 2:apmIndexPattern=_context2.sent;if(apmIndexPattern){_context2.next=5;break}return _context2.abrupt("return");case 5:return _context2.abrupt("return",static_utils_1.getFromSavedObject(apmIndexPattern));case 6:case"end":return _context2.stop()}}},_callee2,this)}));return function getAPMIndexPatternForKuery(){return _ref2.apply(this,arguments)}}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}Object.defineProperty(exports,"__esModule",{value:true});var es_query_1=__webpack_require__(40);var autocomplete_providers_1=__webpack_require__(393);var static_utils_1=__webpack_require__(608);var savedObjects_1=__webpack_require__(686);function convertKueryToEsQuery(kuery,indexPattern){var ast=es_query_1.fromKueryExpression(kuery);return es_query_1.toElasticsearchQuery(ast,indexPattern)}exports.convertKueryToEsQuery=convertKueryToEsQuery;exports.getSuggestions=getSuggestions;exports.getAPMIndexPatternForKuery=getAPMIndexPatternForKuery},1118:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var lodash_1=tslib_1.__importDefault(__webpack_require__(1));var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_redux_request_1=__webpack_require__(74);var services_1=__webpack_require__(1119);var helpers_1=__webpack_require__(226);var ID="serviceDetails";var INITIAL_DATA={types:[]};var withInitialData=helpers_1.createInitialDataSelector(INITIAL_DATA);function getServiceDetails(state){return withInitialData(state.reactReduxRequest[ID])}exports.getServiceDetails=getServiceDetails;function getDefaultTransactionType(state){var types=lodash_1.default.get(state.reactReduxRequest[ID],"data.types");return lodash_1.default.first(types)}exports.getDefaultTransactionType=getDefaultTransactionType;function ServiceDetailsRequest(_ref){var urlParams=_ref.urlParams,render=_ref.render;var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,kuery=urlParams.kuery;if(!(serviceName&&start&&end)){return null}return react_1.default.createElement(react_redux_request_1.Request,{id:ID,fn:services_1.loadServiceDetails,args:[{serviceName:serviceName,start:start,end:end,kuery:kuery}],selector:getServiceDetails,render:render})}exports.ServiceDetailsRequest=ServiceDetailsRequest},1119:function(module,exports,__webpack_require__){"use strict";var loadServiceList=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var start=_ref.start,end=_ref.end,kuery=_ref.kuery;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=callApi_1;_context.t1=start;_context.t2=end;_context.next=5;return apm_1.getEncodedEsQuery(kuery);case 5:_context.t3=_context.sent;_context.t4={start:_context.t1,end:_context.t2,esFilterQuery:_context.t3};_context.t5={pathname:"/api/apm/services",query:_context.t4};return _context.abrupt("return",_context.t0.callApi.call(_context.t0,_context.t5));case 9:case"end":return _context.stop()}}},_callee,this)}));return function loadServiceList(_x){return _ref2.apply(this,arguments)}}();var loadServiceDetails=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref3){var serviceName=_ref3.serviceName,start=_ref3.start,end=_ref3.end,kuery=_ref3.kuery;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=callApi_1;_context2.t1="/api/apm/services/"+serviceName;_context2.t2=start;_context2.t3=end;_context2.next=6;return apm_1.getEncodedEsQuery(kuery);case 6:_context2.t4=_context2.sent;_context2.t5={start:_context2.t2,end:_context2.t3,esFilterQuery:_context2.t4};_context2.t6={pathname:_context2.t1,query:_context2.t5};return _context2.abrupt("return",_context2.t0.callApi.call(_context2.t0,_context2.t6));case 10:case"end":return _context2.stop()}}},_callee2,this)}));return function loadServiceDetails(_x2){return _ref4.apply(this,arguments)}}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}Object.defineProperty(exports,"__esModule",{value:true});var callApi_1=__webpack_require__(225);var apm_1=__webpack_require__(348);exports.loadServiceList=loadServiceList;exports.loadServiceDetails=loadServiceDetails},1120:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_redux_request_1=__webpack_require__(74);var reselect_1=__webpack_require__(27);var transaction_groups_1=__webpack_require__(493);var helpers_1=__webpack_require__(226);var ID="transactionDistribution";var INITIAL_DATA={buckets:[],totalHits:0,bucketSize:0};var withInitialData=helpers_1.createInitialDataSelector(INITIAL_DATA);function getTransactionDistribution(state){return withInitialData(state.reactReduxRequest[ID])}exports.getTransactionDistribution=getTransactionDistribution;exports.getDefaultDistributionSample=reselect_1.createSelector(getTransactionDistribution,function(distribution){var _distribution$data$de=distribution.data.defaultSample,defaultSample=_distribution$data$de===undefined?{}:_distribution$data$de;return{traceId:defaultSample.traceId,transactionId:defaultSample.transactionId}});function TransactionDistributionRequest(_ref){var urlParams=_ref.urlParams,render=_ref.render;var serviceName=urlParams.serviceName,transactionType=urlParams.transactionType,transactionId=urlParams.transactionId,start=urlParams.start,end=urlParams.end,transactionName=urlParams.transactionName,kuery=urlParams.kuery;if(!(serviceName&&transactionType&&start&&end&&transactionName)){return null}return react_1.default.createElement(react_redux_request_1.Request,{id:ID,fn:transaction_groups_1.loadTransactionDistribution,args:[{serviceName:serviceName,transactionType:transactionType,transactionId:transactionId,start:start,end:end,transactionName:transactionName,kuery:kuery}],selector:getTransactionDistribution,render:render})}exports.TransactionDistributionRequest=TransactionDistributionRequest},1121:function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var savedObjects_1=__webpack_require__(686);function getQueryWithIndexPattern(){var query=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var indexPattern=arguments[1];if(query._a&&query._a.index||!indexPattern){return query}var id=indexPattern&&indexPattern.id;return _extends({},query,{_a:_extends({},query._a,{index:id})})}exports.getQueryWithIndexPattern=getQueryWithIndexPattern;var QueryWithIndexPattern=function(_react_1$default$Comp){_inherits(QueryWithIndexPattern,_react_1$default$Comp);function QueryWithIndexPattern(props){_classCallCheck(this,QueryWithIndexPattern);var _this=_possibleConstructorReturn(this,(QueryWithIndexPattern.__proto__||Object.getPrototypeOf(QueryWithIndexPattern)).call(this,props));savedObjects_1.getAPMIndexPattern().then(function(indexPattern){_this.setState({indexPattern:indexPattern})});_this.state={};return _this}_createClass(QueryWithIndexPattern,[{key:"render",value:function render(){var _props=this.props,children=_props.children,query=_props.query;var indexPattern=this.state.indexPattern;var renderWithQuery=children;return renderWithQuery(getQueryWithIndexPattern(query,indexPattern))}}]);return QueryWithIndexPattern}(react_1.default.Component);exports.QueryWithIndexPattern=QueryWithIndexPattern},1122:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var AGENT_URL_ROOT="https://www.elastic.co/guide/en/apm/agent";exports.APM_AGENT_DROPPED_SPANS_DOCS={nodejs:AGENT_URL_ROOT+"/nodejs/1.x/agent-api.html#transaction-max-spans",python:AGENT_URL_ROOT+"/python/2.x/configuration.html#config-transaction-max-spans"};var APM_AGENT_FEATURE_DOCS={user:{java:AGENT_URL_ROOT+"/java/0.7/public-api.html#api-transaction-set-user",nodejs:AGENT_URL_ROOT+"/nodejs/1.x/agent-api.html#apm-set-user-context",python:AGENT_URL_ROOT+"/python/2.x/api.html#api-set-user-context",ruby:AGENT_URL_ROOT+"/ruby/1.x/advanced.html#_providing_info_about_the_user","js-react":AGENT_URL_ROOT+"/js-base/0.x/api.html#apm-set-user-context","js-base":AGENT_URL_ROOT+"/js-base/0.x/api.html#apm-set-user-context"},tags:{java:AGENT_URL_ROOT+"/java/0.7/public-api.html#api-transaction-add-tag",nodejs:AGENT_URL_ROOT+"/nodejs/1.x/agent-api.html#apm-set-tag",python:AGENT_URL_ROOT+"/python/2.x/api.html#api-tag",ruby:AGENT_URL_ROOT+"/ruby/1.x/advanced.html#_adding_tags","js-react":AGENT_URL_ROOT+"/js-base/0.x/api.html#apm-set-tags","js-base":AGENT_URL_ROOT+"/js-base/0.x/api.html#apm-set-tags"},custom:{nodejs:AGENT_URL_ROOT+"/nodejs/1.x/agent-api.html#apm-set-custom-context",python:AGENT_URL_ROOT+"/python/2.x/api.html#api-set-custom-context",ruby:AGENT_URL_ROOT+"/ruby/1.x/advanced.html#_adding_custom_context","js-react":AGENT_URL_ROOT+"/js-base/0.x/api.html#apm-set-custom-context","js-base":AGENT_URL_ROOT+"/js-base/0.x/api.html#apm-set-custom-context"}};function getAgentFeatureDocsUrl(featureName,agentName){if(APM_AGENT_FEATURE_DOCS[featureName]&&agentName){return APM_AGENT_FEATURE_DOCS[featureName][agentName]}}exports.getAgentFeatureDocsUrl=getAgentFeatureDocsUrl},1123:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var lodash_1=__webpack_require__(1);var react_1=tslib_1.__importStar(__webpack_require__(0));var EmptyMessage_1=__webpack_require__(349);var LibraryStackFrames_1=__webpack_require__(3107);var Stackframe_1=__webpack_require__(1125);function Stacktrace(_ref){var _ref$stackframes=_ref.stackframes,stackframes=_ref$stackframes===undefined?[]:_ref$stackframes,codeLanguage=_ref.codeLanguage;if(lodash_1.isEmpty(stackframes)){return react_1.default.createElement(EmptyMessage_1.EmptyMessage,{heading:"No stacktrace available.",hideSubheading:true})}var groups=getGroupedStackframes(stackframes);return react_1.default.createElement(react_1.Fragment,null,groups.map(function(group,i){if(group.isLibraryFrame){var initialVisiblity=groups.length===1;return react_1.default.createElement(LibraryStackFrames_1.LibraryStackFrames,{key:i,initialVisiblity:initialVisiblity,stackframes:group.stackframes,codeLanguage:codeLanguage})}return group.stackframes.map(function(stackframe,idx){return react_1.default.createElement(Stackframe_1.Stackframe,{key:i+"-"+idx,codeLanguage:codeLanguage,stackframe:stackframe})})}))}exports.Stacktrace=Stacktrace;function getGroupedStackframes(stackframes){return stackframes.reduce(function(acc,stackframe){var prevGroup=lodash_1.last(acc);var shouldAppend=prevGroup&&prevGroup.isLibraryFrame===stackframe.library_frame&&!prevGroup.excludeFromGrouping&&!stackframe.exclude_from_grouping;if(shouldAppend){prevGroup.stackframes.push(stackframe);return acc}acc.push({isLibraryFrame:Boolean(stackframe.library_frame),excludeFromGrouping:Boolean(stackframe.exclude_from_grouping),stackframes:[stackframe]});return acc},[])}exports.getGroupedStackframes=getGroupedStackframes},1124:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};exports.Icon=Icon;exports.Ellipsis=Ellipsis;exports.Check=Check;exports.Close=Close;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function Icon(_ref){var name=_ref.name,className=_ref.className,props=_objectWithoutProperties(_ref,["name","className"]);return _react2.default.createElement("i",_extends({className:"fa "+name+" "+className},props))}function Ellipsis(_ref2){var horizontal=_ref2.horizontal,style=_ref2.style,props=_objectWithoutProperties(_ref2,["horizontal","style"]);return _react2.default.createElement(Icon,_extends({style:_extends({transition:"transform 0.1s",transform:"rotate("+(horizontal?90:0)+"deg)"},style),name:"fa-ellipsis-v"},props))}function Check(_ref3){var props=_objectWithoutProperties(_ref3,[]);return _react2.default.createElement(Icon,_extends({name:"fa-check"},props))}function Close(_ref4){var props=_objectWithoutProperties(_ref4,[]);return _react2.default.createElement(Icon,_extends({name:"fa-times"},props))}},1125:function(module,exports,__webpack_require__){"use strict";var _templateObject=_taggedTemplateLiteral(["\n  border-bottom: 1px solid ",";\n  border-radius: "," "," 0 0;\n"],["\n  border-bottom: 1px solid ",";\n  border-radius: "," "," 0 0;\n"]),_templateObject2=_taggedTemplateLiteral(["\n  margin: 0 0 "," 0;\n  position: relative;\n  font-family: ",";\n  border: 1px solid ",";\n  border-radius: ",";\n  background: ",";\n"],["\n  margin: 0 0 "," 0;\n  position: relative;\n  font-family: ",";\n  border: 1px solid ",";\n  border-radius: ",";\n  background: ",";\n"]);function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var variables_1=__webpack_require__(26);var FrameHeading_1=__webpack_require__(3108);var Context_1=__webpack_require__(3109);var Variables_1=__webpack_require__(3113);var CodeHeader=styled_components_1.default.div(_templateObject,variables_1.colors.gray4,variables_1.borderRadius,variables_1.borderRadius);var Container=styled_components_1.default.div(_templateObject2,variables_1.px(variables_1.units.plus),variables_1.fontFamilyCode,variables_1.colors.gray4,variables_1.borderRadius,function(props){return props.isLibraryFrame?variables_1.colors.white:variables_1.colors.gray5});function Stackframe(_ref){var stackframe=_ref.stackframe,codeLanguage=_ref.codeLanguage,_ref$isLibraryFrame=_ref.isLibraryFrame,isLibraryFrame=_ref$isLibraryFrame===undefined?false:_ref$isLibraryFrame;if(!hasLineContext(stackframe)){return react_1.default.createElement(FrameHeading_1.FrameHeading,{stackframe:stackframe,isLibraryFrame:isLibraryFrame})}return react_1.default.createElement(Container,{isLibraryFrame:isLibraryFrame},react_1.default.createElement(CodeHeader,null,react_1.default.createElement(FrameHeading_1.FrameHeading,{stackframe:stackframe,isLibraryFrame:isLibraryFrame})),react_1.default.createElement(Context_1.Context,{stackframe:stackframe,codeLanguage:codeLanguage,isLibraryFrame:isLibraryFrame}),react_1.default.createElement(Variables_1.Variables,{vars:stackframe.vars}))}exports.Stackframe=Stackframe;function hasLineContext(stackframe){return stackframe.line.context!=null}},1127:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFormattedBuckets=getFormattedBuckets;var _eui=__webpack_require__(2);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _Histogram=__webpack_require__(1128);var _Histogram2=_interopRequireDefault(_Histogram);var _EmptyMessage=__webpack_require__(349);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getFormattedBuckets(buckets,bucketSize){if(!buckets){return null}return buckets.map(function(_ref){var count=_ref.count,key=_ref.key;return{x0:key,x:key+bucketSize,y:count}})}function Distribution(_ref2){var distribution=_ref2.distribution,_ref2$title=_ref2.title,title=_ref2$title===undefined?"Occurrences":_ref2$title;var buckets=getFormattedBuckets(distribution.buckets,distribution.bucketSize);var isEmpty=distribution.totalHits===0;if(isEmpty){return _react2.default.createElement(_EmptyMessage.EmptyMessage,{heading:"No errors were found"})}return _react2.default.createElement("div",null,_react2.default.createElement(_eui.EuiTitle,{size:"s"},_react2.default.createElement("span",null,title)),_react2.default.createElement(_Histogram2.default,{verticalLineHover:function verticalLineHover(bucket){return bucket.x},xType:"time",buckets:buckets,bucketSize:distribution.bucketSize,formatYShort:function formatYShort(value){return value+" occ."},formatYLong:function formatYLong(value){return value+" occurrences"}}))}exports.default=Distribution},1128:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HistogramInner=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _templateObject=_taggedTemplateLiteral(["\n  user-select: none;\n"],["\n  user-select: none;\n"]);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _d=__webpack_require__(20);var _d2=_interopRequireDefault(_d);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _d3Scale=__webpack_require__(358);var _styledComponents=__webpack_require__(18);var _styledComponents2=_interopRequireDefault(_styledComponents);var _SingleRect=__webpack_require__(3114);var _SingleRect2=_interopRequireDefault(_SingleRect);var _reactVis=__webpack_require__(247);var _variables=__webpack_require__(26);var _Tooltip=__webpack_require__(1129);var _Tooltip2=_interopRequireDefault(_Tooltip);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var XY_HEIGHT=_variables.unit*10;var XY_MARGIN={top:_variables.unit,left:_variables.unit*5,right:_variables.unit,bottom:_variables.unit*2};var X_TICK_TOTAL=8;var ChartsWrapper=_styledComponents2.default.div(_templateObject);var HistogramInner=exports.HistogramInner=function(_PureComponent){_inherits(HistogramInner,_PureComponent);function HistogramInner(props){_classCallCheck(this,HistogramInner);var _this=_possibleConstructorReturn(this,(HistogramInner.__proto__||Object.getPrototypeOf(HistogramInner)).call(this,props));_this.onClick=function(bucket){if(_this.props.onClick){_this.props.onClick(bucket)}};_this.onHover=function(bucket){_this.setState({hoveredBucket:bucket})};_this.onBlur=function(){_this.setState({hoveredBucket:{}})};_this.state={hoveredBucket:{}};return _this}_createClass(HistogramInner,[{key:"getChartData",value:function getChartData(items,selectedItem){var yMax=_d2.default.max(items,function(d){return d.y});var MINIMUM_BUCKET_SIZE=yMax*.02;return items.map(function(item){var padding=(item.x-item.x0)/20;return _extends({},item,{color:item===selectedItem?_variables.colors.blue2:_variables.colors.apmLightBlue,x0:item.x0+padding,x:item.x-padding,y:item.y>0?Math.max(item.y,MINIMUM_BUCKET_SIZE):0})})}},{key:"render",value:function render(){var _props=this.props,backgroundHover=_props.backgroundHover,bucketIndex=_props.bucketIndex,buckets=_props.buckets,bucketSize=_props.bucketSize,formatX=_props.formatX,formatYShort=_props.formatYShort,formatYLong=_props.formatYLong,tooltipFooter=_props.tooltipFooter,tooltipHeader=_props.tooltipHeader,verticalLineHover=_props.verticalLineHover,XY_WIDTH=_props.width;var hoveredBucket=this.state.hoveredBucket;if(_lodash2.default.isEmpty(buckets)||XY_WIDTH===0){return null}var xMin=_d2.default.min(buckets,function(d){return d.x0});var xMax=_d2.default.max(buckets,function(d){return d.x});var yMin=0;var yMax=_d2.default.max(buckets,function(d){return d.y});var selectedBucket=buckets[bucketIndex];var chartData=this.getChartData(buckets,selectedBucket);var _x=(0,_d3Scale.scaleLinear)().domain([xMin,xMax]).range([XY_MARGIN.left,XY_WIDTH-XY_MARGIN.right]);var y=(0,_d3Scale.scaleLinear)().domain([yMin,yMax]).range([XY_HEIGHT,0]).nice();var xDomain=_x.domain();var yDomain=y.domain();var yTickValues=[0,yDomain[1]/2,yDomain[1]];var isTimeSeries=this.props.xType==="time";var shouldShowTooltip=hoveredBucket.x>0&&(hoveredBucket.y>0||isTimeSeries);var showVerticalLineHover=verticalLineHover(hoveredBucket);var showBackgroundHover=backgroundHover(hoveredBucket);return _react2.default.createElement(ChartsWrapper,null,_react2.default.createElement(_reactVis.XYPlot,{xType:this.props.xType,width:XY_WIDTH,height:XY_HEIGHT,margin:XY_MARGIN,xDomain:xDomain,yDomain:yDomain},_react2.default.createElement(_reactVis.HorizontalGridLines,{tickValues:yTickValues}),_react2.default.createElement(_reactVis.XAxis,{style:{strokeWidth:"1px"},marginRight:10,tickSizeOuter:10,tickSizeInner:0,tickTotal:X_TICK_TOTAL,tickFormat:formatX}),_react2.default.createElement(_reactVis.YAxis,{tickSize:0,hideLine:true,tickValues:yTickValues,tickFormat:formatYShort}),showBackgroundHover&&_react2.default.createElement(_SingleRect2.default,{x:_x(hoveredBucket.x0),width:_x(bucketSize)-_x(0),style:{fill:_variables.colors.gray5}}),shouldShowTooltip&&_react2.default.createElement(_Tooltip2.default,{style:{marginLeft:"1%",marginRight:"1%"},header:tooltipHeader(hoveredBucket),footer:tooltipFooter(hoveredBucket),tooltipPoints:[{value:formatYLong(hoveredBucket.y)}],x:hoveredBucket.x,y:yDomain[1]/2}),selectedBucket&&_react2.default.createElement(_SingleRect2.default,{x:_x(selectedBucket.x0),width:_x(bucketSize)-_x(0),style:{fill:"transparent",stroke:_variables.colors.blue2,rx:"0px",ry:"0px"}}),_react2.default.createElement(_reactVis.VerticalRectSeries,{colorType:"literal",color:_variables.colors.apmLightBlue,data:chartData,style:{rx:"0px",ry:"0px"}}),showVerticalLineHover&&_react2.default.createElement(_reactVis.VerticalGridLines,{tickValues:[hoveredBucket.x]}),_react2.default.createElement(_reactVis.Voronoi,{extent:[[XY_MARGIN.left,XY_MARGIN.top],[XY_WIDTH,XY_HEIGHT]],nodes:this.props.buckets.map(function(bucket){return _extends({},bucket,{x:(bucket.x0+bucket.x)/2})}),onClick:this.onClick,onHover:this.onHover,onBlur:this.onBlur,x:function x(d){return _x(d.x)},y:function y(){return 1}})))}}]);return HistogramInner}(_react.PureComponent);HistogramInner.propTypes={backgroundHover:_propTypes2.default.func,bucketIndex:_propTypes2.default.number,buckets:_propTypes2.default.array.isRequired,bucketSize:_propTypes2.default.number.isRequired,formatX:_propTypes2.default.func,formatYLong:_propTypes2.default.func,formatYShort:_propTypes2.default.func,onClick:_propTypes2.default.func,tooltipFooter:_propTypes2.default.func,tooltipHeader:_propTypes2.default.func,verticalLineHover:_propTypes2.default.func,width:_propTypes2.default.number.isRequired,xType:_propTypes2.default.string};HistogramInner.defaultProps={backgroundHover:function backgroundHover(){return null},formatYLong:function formatYLong(value){return value},formatYShort:function formatYShort(value){return value},tooltipFooter:function tooltipFooter(){return null},tooltipHeader:function tooltipHeader(){return null},verticalLineHover:function verticalLineHover(){return null},xType:"linear"};exports.default=(0,_reactVis.makeWidthFlexible)(HistogramInner)},1129:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _templateObject=_taggedTemplateLiteral(["\n  margin: 0 ",";\n  transform: translateY(-50%);\n  border: 1px solid ",";\n  background: ",";\n  border-radius: ",";\n  font-size: ",";\n  color: ",";\n"],["\n  margin: 0 ",";\n  transform: translateY(-50%);\n  border: 1px solid ",";\n  background: ",";\n  border-radius: ",";\n  font-size: ",";\n  color: ",";\n"]),_templateObject2=_taggedTemplateLiteral(["\n  background: ",";\n  border-bottom: 1px solid ",";\n  border-radius: "," "," 0 0;\n  padding: ",";\n  color: ",";\n"],["\n  background: ",";\n  border-bottom: 1px solid ",";\n  border-radius: "," "," 0 0;\n  padding: ",";\n  color: ",";\n"]),_templateObject3=_taggedTemplateLiteral(["\n  margin: ",";\n  margin-right: ",";\n  font-size: ",";\n"],["\n  margin: ",";\n  margin-right: ",";\n  font-size: ",";\n"]),_templateObject4=_taggedTemplateLiteral(["\n  color: ",";\n  margin: ",";\n  font-size: ",";\n"],["\n  color: ",";\n  margin: ",";\n  font-size: ",";\n"]),_templateObject5=_taggedTemplateLiteral(["\n  display: flex;\n  align-items: center;\n  margin-bottom: ",";\n  justify-content: space-between;\n"],["\n  display: flex;\n  align-items: center;\n  margin-bottom: ",";\n  justify-content: space-between;\n"]),_templateObject6=_taggedTemplateLiteral(["\n  color: ",";\n  padding-bottom: 0;\n"],["\n  color: ",";\n  padding-bottom: 0;\n"]),_templateObject7=_taggedTemplateLiteral(["\n  color: ",";\n  font-size: ",";\n"],["\n  color: ",";\n  font-size: ",";\n"]);exports.default=Tooltip;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _reactVis=__webpack_require__(247);var _moment=__webpack_require__(13);var _moment2=_interopRequireDefault(_moment);var _styledComponents=__webpack_require__(18);var _styledComponents2=_interopRequireDefault(_styledComponents);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _variables=__webpack_require__(26);var _Legend=__webpack_require__(496);var _Legend2=_interopRequireDefault(_Legend);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var TooltipElm=_styledComponents2.default.div(_templateObject,(0,_variables.px)(_variables.unit),_variables.colors.gray4,_variables.colors.white,_variables.borderRadius,_variables.fontSize,_variables.colors.black);var Header=_styledComponents2.default.div(_templateObject2,_variables.colors.gray5,_variables.colors.gray4,_variables.borderRadius,_variables.borderRadius,(0,_variables.px)(_variables.units.half),_variables.colors.gray3);var Content=_styledComponents2.default.div(_templateObject3,(0,_variables.px)(_variables.units.half),(0,_variables.px)(_variables.unit),_variables.fontSizes.small);var Footer=_styledComponents2.default.div(_templateObject4,_variables.colors.gray3,(0,_variables.px)(_variables.units.half),_variables.fontSizes.small);var LegendContainer=_styledComponents2.default.div(_templateObject5,(0,_variables.px)(_variables.units.quarter));var LegendGray=(0,_styledComponents2.default)(_Legend2.default)(_templateObject6,_variables.colors.gray3);var Value=_styledComponents2.default.div(_templateObject7,_variables.colors.gray2,_variables.fontSize);function Tooltip(_ref){var header=_ref.header,footer=_ref.footer,tooltipPoints=_ref.tooltipPoints,x=_ref.x,y=_ref.y,props=_objectWithoutProperties(_ref,["header","footer","tooltipPoints","x","y"]);if(_lodash2.default.isEmpty(tooltipPoints)){return null}var showLegends=tooltipPoints.length>1;return _react2.default.createElement(_reactVis.Hint,_extends({},props,{value:{x:x,y:y}}),_react2.default.createElement(TooltipElm,null,_react2.default.createElement(Header,null,header||(0,_moment2.default)(x).format("MMMM Do YYYY, HH:mm:ss")),_react2.default.createElement(Content,null,showLegends?tooltipPoints.map(function(point,i){return _react2.default.createElement(LegendContainer,{key:i},_react2.default.createElement(LegendGray,{fontSize:_variables.fontSize.tiny,radius:_variables.units.half,color:point.color,text:point.text}),_react2.default.createElement(Value,null,point.value))}):_react2.default.createElement(Value,null,tooltipPoints[0].value)),_react2.default.createElement(Footer,null,footer)))}Tooltip.propTypes={header:_propTypes2.default.string,tooltipPoints:_propTypes2.default.array.isRequired,x:_propTypes2.default.number,y:_propTypes2.default.number};Tooltip.defaultProps={};module.exports=exports["default"]},1130:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_router_dom_1=__webpack_require__(37);function isTabSelected(tab,currentPath){if(tab.routePath){return!!react_router_dom_1.matchPath(currentPath,{path:tab.routePath,exact:true})}return currentPath===tab.path}var HistoryTabsWithoutRouter=function HistoryTabsWithoutRouter(_ref){var tabs=_ref.tabs,history=_ref.history,location=_ref.location;return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(eui_1.EuiTabs,null,tabs.map(function(tab,i){return react_1.default.createElement(eui_1.EuiTab,{onClick:function onClick(){return history.push(_extends({},location,{pathname:tab.path}))},isSelected:isTabSelected(tab,location.pathname),key:tab.path+"--"+i},tab.name)})),react_1.default.createElement(eui_1.EuiSpacer,null),tabs.map(function(tab){return tab.render?react_1.default.createElement(react_router_dom_1.Route,{path:tab.routePath||tab.path,render:tab.render,key:tab.path}):null}))};exports.HistoryTabsWithoutRouter=HistoryTabsWithoutRouter;var HistoryTabs=react_router_dom_1.withRouter(HistoryTabsWithoutRouter);exports.HistoryTabs=HistoryTabs},1131:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var reselect_1=__webpack_require__(27);var license_1=__webpack_require__(1132);exports.selectIsMLAvailable=reselect_1.createSelector([license_1.getLicense],function(license){return license.data&&license.data.features&&license.data.features.ml&&license.data.features.ml.isAvailable})},1132:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_redux_request_1=__webpack_require__(74);var xpack_1=__webpack_require__(3123);var helpers_1=__webpack_require__(226);var ID="license";var INITIAL_DATA={features:{watcher:{isAvailable:false},ml:{isAvailable:false}},license:{isActive:false}};var withInitialData=helpers_1.createInitialDataSelector(INITIAL_DATA);function getLicense(state){return withInitialData(state.reactReduxRequest[ID])}exports.getLicense=getLicense;function LicenceRequest(_ref){var render=_ref.render;return react_1.default.createElement(react_redux_request_1.Request,{id:ID,fn:xpack_1.loadLicense,selector:getLicense,render:render})}exports.LicenceRequest=LicenceRequest},1133:function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var moment_1=tslib_1.__importDefault(__webpack_require__(13));var react_1=tslib_1.__importDefault(__webpack_require__(0));var timefilter_1=__webpack_require__(16);var SyncChartGroup=function(_react_1$default$Comp){_inherits(SyncChartGroup,_react_1$default$Comp);function SyncChartGroup(){_classCallCheck(this,SyncChartGroup);var _this=_possibleConstructorReturn(this,(SyncChartGroup.__proto__||Object.getPrototypeOf(SyncChartGroup)).apply(this,arguments));_this.state={hoverX:null};_this.onHover=function(hoverX){return _this.setState({hoverX:hoverX})};_this.onMouseLeave=function(){return _this.setState({hoverX:null})};_this.onSelectionEnd=function(range){_this.setState({hoverX:null});timefilter_1.timefilter.setTime({from:moment_1.default(range.start).toISOString(),to:moment_1.default(range.end).toISOString(),mode:"absolute"})};return _this}_createClass(SyncChartGroup,[{key:"render",value:function render(){return this.props.render({onHover:this.onHover,onMouseLeave:this.onMouseLeave,onSelectionEnd:this.onSelectionEnd,hoverX:this.state.hoverX})}}]);return SyncChartGroup}(react_1.default.Component);exports.SyncChartGroup=SyncChartGroup},1134:function(module,exports,__webpack_require__){"use strict";function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));function ImpactBar(_ref){var value=_ref.value,_ref$max=_ref.max,max=_ref$max===undefined?100:_ref$max,rest=_objectWithoutProperties(_ref,["value","max"]);return react_1.default.createElement(eui_1.EuiProgress,Object.assign({size:"l",value:value,max:max,color:"primary"},rest))}exports.ImpactBar=ImpactBar},1135:function(module,exports,__webpack_require__){"use strict";var startMLJob=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var serviceName=_ref.serviceName,transactionType=_ref.transactionType;var indexPatternName,groups,filter;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:indexPatternName=chrome_1.default.getInjected("apmIndexPatternTitle");groups=["apm",serviceName.toLowerCase()];filter=[{term:_defineProperty({},constants_1.SERVICE_NAME,serviceName)}];if(transactionType){groups.push(transactionType.toLowerCase());filter.push({term:_defineProperty({},constants_1.TRANSACTION_TYPE,transactionType)})}return _context.abrupt("return",callApi_1.callApi({method:"POST",pathname:"/api/ml/modules/setup/apm_transaction",body:JSON.stringify({prefix:getMlPrefix(serviceName,transactionType),groups:groups,indexPatternName:indexPatternName,startDatafeed:true,query:{bool:{filter:filter}}})}));case 5:case"end":return _context.stop()}}},_callee,this)}));return function startMLJob(_x){return _ref2.apply(this,arguments)}}();var getMLJob=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref3){var serviceName=_ref3.serviceName,transactionType=_ref3.transactionType,_ref3$anomalyName=_ref3.anomalyName,anomalyName=_ref3$anomalyName===undefined?"high_mean_response_time":_ref3$anomalyName;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",callApi_1.callApi({method:"GET",pathname:"/api/ml/anomaly_detectors/"+getMlPrefix(serviceName,transactionType)+anomalyName}));case 1:case"end":return _context2.stop()}}},_callee2,this)}));return function getMLJob(_x2){return _ref4.apply(this,arguments)}}();function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var chrome_1=tslib_1.__importDefault(__webpack_require__(8));var constants_1=__webpack_require__(179);var callApi_1=__webpack_require__(225);function getMlPrefix(serviceName,transactionType){return(serviceName+"-"+(transactionType?transactionType+"-":"")).toLowerCase()}exports.getMlPrefix=getMlPrefix;exports.startMLJob=startMLJob;exports.getMLJob=getMLJob},1136:function(module,exports,__webpack_require__){"use strict";var loadSpans=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var serviceName=_ref.serviceName,start=_ref.start,end=_ref.end,transactionId=_ref.transactionId;var hits;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return callApi_1.callApi({pathname:"/api/apm/services/"+serviceName+"/transactions/"+transactionId+"/spans",query:{start:start,end:end}});case 2:hits=_context.sent;return _context.abrupt("return",hits.map(apm_1.addVersion).map(addSpanId));case 4:case"end":return _context.stop()}}},_callee,this)}));return function loadSpans(_x){return _ref2.apply(this,arguments)}}();var loadTransaction=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref3){var serviceName=_ref3.serviceName,start=_ref3.start,end=_ref3.end,transactionId=_ref3.transactionId,traceId=_ref3.traceId,kuery=_ref3.kuery;var result;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=callApi_1;_context2.t1="/api/apm/services/"+serviceName+"/transactions/"+transactionId;_context2.t2=traceId;_context2.t3=start;_context2.t4=end;_context2.next=7;return apm_1.getEncodedEsQuery(kuery);case 7:_context2.t5=_context2.sent;_context2.t6={traceId:_context2.t2,start:_context2.t3,end:_context2.t4,esFilterQuery:_context2.t5};_context2.t7={pathname:_context2.t1,query:_context2.t6};_context2.t8={camelcase:false};_context2.next=13;return _context2.t0.callApi.call(_context2.t0,_context2.t7,_context2.t8);case 13:result=_context2.sent;return _context2.abrupt("return",apm_1.addVersion(result));case 15:case"end":return _context2.stop()}}},_callee2,this)}));return function loadTransaction(_x2){return _ref4.apply(this,arguments)}}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}Object.defineProperty(exports,"__esModule",{value:true});var callApi_1=__webpack_require__(225);var apm_1=__webpack_require__(348);exports.loadSpans=loadSpans;function addSpanId(hit,i){if(!hit.span.id){hit.span.id=i}return hit}exports.loadTransaction=loadTransaction},1137:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}Object.defineProperty(exports,"__esModule",{value:true});var lodash_1=__webpack_require__(1);var variables_1=__webpack_require__(26);function getTransactionItem(transaction){if(transaction.version==="v1"){return{id:transaction.transaction.id,serviceName:transaction.context.service.name,name:transaction.transaction.name,duration:transaction.transaction.duration.us,timestamp:new Date(transaction["@timestamp"]).getTime()*1e3,offset:0,skew:0,docType:"transaction",transaction:transaction}}return{id:transaction.transaction.id,parentId:transaction.parent&&transaction.parent.id,serviceName:transaction.context.service.name,name:transaction.transaction.name,duration:transaction.transaction.duration.us,timestamp:transaction.timestamp.us,offset:0,skew:0,docType:"transaction",transaction:transaction}}function getSpanItem(span){if(span.version==="v1"){return{id:span.span.id,parentId:span.span.parent||span.transaction.id,serviceName:span.context.service.name,name:span.span.name,duration:span.span.duration.us,timestamp:new Date(span["@timestamp"]).getTime()*1e3+span.span.start.us,offset:0,skew:0,docType:"span",span:span}}return{id:span.span.hex_id,parentId:span.parent&&span.parent.id,serviceName:span.context.service.name,name:span.span.name,duration:span.span.duration.us,timestamp:span.timestamp.us,offset:0,skew:0,docType:"span",span:span}}function getClockSkew(item,parentItem){if(!parentItem){return 0}switch(item.docType){case"span":return parentItem.skew;case"transaction":{var parentStart=parentItem.timestamp+parentItem.skew;var parentEnd=parentStart+parentItem.duration;var offsetStart=parentStart-item.timestamp;var offsetEnd=item.timestamp-parentEnd;if(offsetStart>0||offsetEnd>0){var latency=Math.max(parentItem.duration-item.duration,0)/2;return offsetStart+latency}else{return 0}}}}exports.getClockSkew=getClockSkew;function getWaterfallItems(childrenByParentId,entryTransactionItem){var visitedWaterfallItemSet=new Set;function getSortedChildren(item,parentItem){if(visitedWaterfallItemSet.has(item)){return[]}visitedWaterfallItemSet.add(item);var children=lodash_1.sortBy(childrenByParentId[item.id]||[],"timestamp");item.childIds=children.map(function(child){return child.id});item.offset=item.timestamp-entryTransactionItem.timestamp;item.skew=getClockSkew(item,parentItem);var deepChildren=lodash_1.flatten(children.map(function(child){return getSortedChildren(child,item)}));return[item].concat(_toConsumableArray(deepChildren))}return getSortedChildren(entryTransactionItem)}exports.getWaterfallItems=getWaterfallItems;function getTraceRoot(childrenByParentId){var item=lodash_1.first(childrenByParentId.root);if(item&&item.docType==="transaction"){return item.transaction}}function getServices(items){var serviceNames=items.map(function(item){return item.serviceName});return lodash_1.uniq(serviceNames)}function getServiceColors(services){var assignedColors=[variables_1.colors.apmBlue,variables_1.colors.apmGreen,variables_1.colors.apmPurple,variables_1.colors.apmRed2,variables_1.colors.apmTan,variables_1.colors.apmOrange,variables_1.colors.apmYellow];return lodash_1.zipObject(services,assignedColors)}function getDuration(items){var timestampStart=items[0].timestamp;var timestampEnd=Math.max.apply(Math,_toConsumableArray(items.map(function(item){return item.timestamp+item.duration+item.skew})));return timestampEnd-timestampStart}function createGetTransactionById(itemsById){return function(id){if(!id){return}var item=itemsById[id];if(item.docType==="transaction"){return item.transaction}}}function getWaterfall(hits,entryTransaction){if(lodash_1.isEmpty(hits)){return{services:[],duration:0,items:[],itemsById:{},getTransactionById:function getTransactionById(){return undefined},serviceColors:{}}}var filteredHits=hits.filter(function(hit){var docType=hit.processor.event;return["span","transaction"].includes(docType)}).map(function(hit){var docType=hit.processor.event;switch(docType){case"span":return getSpanItem(hit);case"transaction":return getTransactionItem(hit);default:throw new Error("Unknown type "+docType)}});var childrenByParentId=lodash_1.groupBy(filteredHits,function(hit){return hit.parentId?hit.parentId:"root"});var entryTransactionItem=getTransactionItem(entryTransaction);var itemsById=lodash_1.indexBy(filteredHits,"id");var items=getWaterfallItems(childrenByParentId,entryTransactionItem);var traceRoot=getTraceRoot(childrenByParentId);var duration=getDuration(items);var traceRootDuration=traceRoot&&traceRoot.transaction.duration.us;var services=getServices(items);var getTransactionById=createGetTransactionById(itemsById);var serviceColors=getServiceColors(services);return{traceRoot:traceRoot,traceRootDuration:traceRootDuration,duration:duration,services:services,items:items,itemsById:itemsById,getTransactionById:getTransactionById,serviceColors:serviceColors}}exports.getWaterfall=getWaterfall},1138:function(module,exports,__webpack_require__){"use strict";var loadTrace=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var traceId=_ref.traceId,start=_ref.start,end=_ref.end;var hits;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return callApi_1.callApi({pathname:"/api/apm/traces/"+traceId,query:{start:start,end:end}},{camelcase:false});case 2:hits=_context.sent;return _context.abrupt("return",hits.map(apm_1.addVersion));case 4:case"end":return _context.stop()}}},_callee,this)}));return function loadTrace(_x){return _ref2.apply(this,arguments)}}();var loadTraceList=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref3){var start=_ref3.start,end=_ref3.end,kuery=_ref3.kuery;var groups;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=callApi_1;_context2.t1=start;_context2.t2=end;_context2.next=5;return apm_1.getEncodedEsQuery(kuery);case 5:_context2.t3=_context2.sent;_context2.t4={start:_context2.t1,end:_context2.t2,esFilterQuery:_context2.t3};_context2.t5={pathname:"/api/apm/traces",query:_context2.t4};_context2.next=10;return _context2.t0.callApi.call(_context2.t0,_context2.t5);case 10:groups=_context2.sent;return _context2.abrupt("return",groups.map(function(group){group.sample=apm_1.addVersion(group.sample);return group}));case 12:case"end":return _context2.stop()}}},_callee2,this)}));return function loadTraceList(_x2){return _ref4.apply(this,arguments)}}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}Object.defineProperty(exports,"__esModule",{value:true});var callApi_1=__webpack_require__(225);var apm_1=__webpack_require__(348);exports.loadTrace=loadTrace;exports.loadTraceList=loadTraceList},1139:function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var idx_1=tslib_1.__importDefault(__webpack_require__(4823));var react_1=tslib_1.__importDefault(__webpack_require__(0));var url_1=__webpack_require__(44);var DiscoverTransactionButton_1=__webpack_require__(3157);var QueryWithIndexPattern_1=__webpack_require__(1121);function getInfraMetricsQuery(transaction){var plus5=new Date(transaction["@timestamp"]);var minus5=new Date(transaction["@timestamp"]);plus5.setMinutes(plus5.getMinutes()+5);minus5.setMinutes(minus5.getMinutes()-5);return{from:minus5.getTime(),to:plus5.getTime()}}function ActionMenuButton(_ref){var onClick=_ref.onClick;return react_1.default.createElement(eui_1.EuiButtonEmpty,{iconType:"arrowDown",iconSide:"right",onClick:onClick},"Actions")}var TransactionActionMenu=function(_react_1$default$Comp){_inherits(TransactionActionMenu,_react_1$default$Comp);function TransactionActionMenu(){_classCallCheck(this,TransactionActionMenu);var _this=_possibleConstructorReturn(this,(TransactionActionMenu.__proto__||Object.getPrototypeOf(TransactionActionMenu)).apply(this,arguments));_this.state={isOpen:false};_this.toggle=function(){_this.setState(function(state){return{isOpen:!state.isOpen}})};_this.close=function(){_this.setState({isOpen:false})};return _this}_createClass(TransactionActionMenu,[{key:"getInfraActions",value:function getInfraActions(transaction){var hostName=idx_1.default(transaction,function(_){return _.context.system.hostname});var podId=idx_1.default(transaction,function(_){return _.kubernetes.pod.uid});var containerId=idx_1.default(transaction,function(_){return _.docker.container.id});var pathname="/app/infra";var time=new Date(transaction["@timestamp"]).getTime();var infraMetricsQuery=getInfraMetricsQuery(transaction);return[{icon:"loggingApp",label:"Show pod logs",target:podId,hash:"/link-to/pod-logs/"+podId,query:{time:time}},{icon:"loggingApp",label:"Show container logs",target:containerId,hash:"/link-to/container-logs/"+containerId,query:{time:time}},{icon:"loggingApp",label:"Show host logs",target:hostName,hash:"/link-to/host-logs/"+hostName,query:{time:time}},{icon:"infraApp",label:"Show pod metrics",target:podId,hash:"/link-to/pod-detail/"+podId,query:infraMetricsQuery},{icon:"infraApp",label:"Show container metrics",target:containerId,hash:"/link-to/container-detail/"+containerId,query:infraMetricsQuery},{icon:"infraApp",label:"Show host metrics",target:hostName,hash:"/link-to/host-detail/"+hostName,query:infraMetricsQuery}].filter(function(_ref2){var target=_ref2.target;return Boolean(target)}).map(function(_ref3,index){var icon=_ref3.icon,label=_ref3.label,hash=_ref3.hash,query=_ref3.query;var href=url_1.getKibanaHref({location:location,pathname:pathname,hash:hash,query:query});return react_1.default.createElement(eui_1.EuiContextMenuItem,{icon:icon,href:href,key:index},react_1.default.createElement(eui_1.EuiFlexGroup,{gutterSize:"s"},react_1.default.createElement(eui_1.EuiFlexItem,null,react_1.default.createElement(eui_1.EuiLink,null,label)),react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(eui_1.EuiIcon,{type:"popout"}))))})}},{key:"render",value:function render(){var _this2=this;var _props=this.props,transaction=_props.transaction,location=_props.location;return react_1.default.createElement(QueryWithIndexPattern_1.QueryWithIndexPattern,{query:DiscoverTransactionButton_1.getDiscoverQuery(transaction)},function(query){var discoverTransactionHref=url_1.getKibanaHref({location:location,pathname:"/app/kibana",hash:"/discover",query:query});var items=[].concat(_toConsumableArray(_this2.getInfraActions(transaction)),[react_1.default.createElement(eui_1.EuiContextMenuItem,{icon:"discoverApp",href:discoverTransactionHref,key:"discover-transaction"},react_1.default.createElement(eui_1.EuiFlexGroup,{gutterSize:"s"},react_1.default.createElement(eui_1.EuiFlexItem,null,react_1.default.createElement(eui_1.EuiLink,null,"View sample document")),react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(eui_1.EuiIcon,{type:"popout"}))))]);return react_1.default.createElement(eui_1.EuiPopover,{id:"transactionActionMenu",button:react_1.default.createElement(ActionMenuButton,{onClick:_this2.toggle}),isOpen:_this2.state.isOpen,closePopover:_this2.close,anchorPosition:"downRight",panelPaddingSize:"none"},react_1.default.createElement(eui_1.EuiContextMenuPanel,{items:items,title:"Actions"}))})}}]);return TransactionActionMenu}(react_1.default.Component);exports.TransactionActionMenu=TransactionActionMenu},1140:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var lodash_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var constants_1=__webpack_require__(179);var formatters_1=__webpack_require__(198);var StickyProperties_1=__webpack_require__(495);function StickyTransactionProperties(_ref){var transaction=_ref.transaction,totalDuration=_ref.totalDuration;var timestamp=transaction["@timestamp"];var url=lodash_1.get(transaction,constants_1.REQUEST_URL_FULL,"N/A");var duration=transaction.transaction.duration.us;var stickyProperties=[{label:"Timestamp",fieldName:"@timestamp",val:timestamp,truncated:true,width:"50%"},{fieldName:constants_1.REQUEST_URL_FULL,label:"URL",val:url,truncated:true,width:"50%"},{label:"Duration",fieldName:constants_1.TRANSACTION_DURATION,val:formatters_1.asTime(duration),width:"25%"},{label:"% of trace",val:formatters_1.asPercent(duration,totalDuration,"N/A"),width:"25%"},{label:"Result",fieldName:constants_1.TRANSACTION_RESULT,val:lodash_1.get(transaction,constants_1.TRANSACTION_RESULT,"N/A"),width:"25%"},{label:"User ID",fieldName:constants_1.USER_ID,val:lodash_1.get(transaction,constants_1.USER_ID,"N/A"),truncated:true,width:"25%"}];return react_1.default.createElement(StickyProperties_1.StickyProperties,{stickyProperties:stickyProperties})}exports.StickyTransactionProperties=StickyTransactionProperties},1141:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(3074)},1142:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var constants_1=__webpack_require__(179);var StickyProperties_1=__webpack_require__(495);var TransactionLink_1=__webpack_require__(697);var url_1=__webpack_require__(44);function FlyoutTopLevelProperties(_ref){var transaction=_ref.transaction;if(!transaction){return null}var stickyProperties=[{label:"Service",fieldName:constants_1.SERVICE_NAME,val:react_1.default.createElement(url_1.KibanaLink,{pathname:"/app/apm",hash:"/"+transaction.context.service.name},transaction.context.service.name),width:"50%"},{label:"Transaction",fieldName:constants_1.TRANSACTION_NAME,val:react_1.default.createElement(TransactionLink_1.TransactionLink,{transaction:transaction},transaction.transaction.name),width:"50%"}];return react_1.default.createElement(StickyProperties_1.StickyProperties,{stickyProperties:stickyProperties})}exports.FlyoutTopLevelProperties=FlyoutTopLevelProperties},1143:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var url_1=__webpack_require__(44);function SetupInstructionsLink(_ref){var _ref$buttonFill=_ref.buttonFill,buttonFill=_ref$buttonFill===undefined?false:_ref$buttonFill;return react_1.default.createElement(url_1.KibanaLink,{pathname:"/app/kibana",hash:"/home/tutorial/apm"},react_1.default.createElement(eui_1.EuiButton,{size:"s",color:"primary",fill:buttonFill},"Setup Instructions"))}exports.SetupInstructionsLink=SetupInstructionsLink},1144:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_redux_request_1=__webpack_require__(74);var services_1=__webpack_require__(1119);var helpers_1=__webpack_require__(226);var ID="serviceList";var INITIAL_DATA=[];var withInitialData=helpers_1.createInitialDataSelector(INITIAL_DATA);function getServiceList(state){return withInitialData(state.reactReduxRequest[ID])}exports.getServiceList=getServiceList;function ServiceListRequest(_ref){var urlParams=_ref.urlParams,render=_ref.render;var start=urlParams.start,end=urlParams.end,kuery=urlParams.kuery;if(!(start&&end)){return null}return react_1.default.createElement(react_redux_request_1.Request,{id:ID,fn:services_1.loadServiceList,args:[{start:start,end:end,kuery:kuery}],selector:getServiceList,render:render})}exports.ServiceListRequest=ServiceListRequest},1145:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_redux_request_1=__webpack_require__(74);var redux_1=__webpack_require__(28);var location_1=tslib_1.__importDefault(__webpack_require__(687));var urlParams_1=__webpack_require__(227);exports.rootReducer=redux_1.combineReducers({location:location_1.default,urlParams:urlParams_1.urlParamsReducer,reactReduxRequest:react_redux_request_1.reducer})},1149:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(3061)},179:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SERVICE_NAME="context.service.name";exports.SERVICE_AGENT_NAME="context.service.agent.name";exports.SERVICE_LANGUAGE_NAME="context.service.language.name";exports.REQUEST_URL_FULL="context.request.url.full";exports.REQUEST_METHOD="context.request.method";exports.USER_ID="context.user.id";exports.PROCESSOR_NAME="processor.name";exports.PROCESSOR_EVENT="processor.event";exports.TRANSACTION_DURATION="transaction.duration.us";exports.TRANSACTION_TYPE="transaction.type";exports.TRANSACTION_RESULT="transaction.result";exports.TRANSACTION_NAME="transaction.name";exports.TRANSACTION_ID="transaction.id";exports.TRANSACTION_SAMPLED="transaction.sampled";exports.TRACE_ID="trace.id";exports.SPAN_START="span.start.us";exports.SPAN_DURATION="span.duration.us";exports.SPAN_TYPE="span.type";exports.SPAN_NAME="span.name";exports.SPAN_ID="span.id";exports.SPAN_SQL="context.db.statement";exports.SPAN_HEX_ID="span.hex_id";exports.PARENT_ID="parent.id";exports.ERROR_GROUP_ID="error.grouping_key";exports.ERROR_CULPRIT="error.culprit";exports.ERROR_LOG_MESSAGE="error.log.message";exports.ERROR_LOG_STACKTRACE="error.log.stacktrace";exports.ERROR_EXC_MESSAGE="error.exception.message";exports.ERROR_EXC_STACKTRACE="error.exception.stacktrace";exports.ERROR_EXC_HANDLED="error.exception.handled";exports.METRIC_SYSTEM_FREE_MEMORY="system.memory.actual.free";exports.METRIC_SYSTEM_TOTAL_MEMORY="system.memory.total";exports.METRIC_PROCESS_MEMORY_SIZE="system.process.memory.size";exports.METRIC_PROCESS_MEMORY_RSS="system.process.memory.rss.bytes";exports.METRIC_SYSTEM_CPU_PERCENT="system.cpu.total.norm.pct";exports.METRIC_PROCESS_CPU_PERCENT="system.process.cpu.total.norm.pct"},198:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var numeral_1=tslib_1.__importDefault(__webpack_require__(212));var i18n_1=__webpack_require__(9);var lodash_1=__webpack_require__(1);var SECONDS_CUT_OFF=10*1e6;var MILLISECONDS_CUT_OFF=10*1e3;var SPACE=" ";var notAvailableLabel=i18n_1.i18n.translate("xpack.apm.formatters.notAvailableLabel",{defaultMessage:"N/A"});function asSeconds(value){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$withUnit=_ref.withUnit,withUnit=_ref$withUnit===undefined?true:_ref$withUnit,_ref$defaultValue=_ref.defaultValue,defaultValue=_ref$defaultValue===undefined?notAvailableLabel:_ref$defaultValue;if(value==null){return defaultValue}var secondsLabel=SPACE+i18n_1.i18n.translate("xpack.apm.formatters.secondsTimeUnitLabel",{defaultMessage:"s"});var formatted=asDecimal(value/1e6);return""+formatted+(withUnit?secondsLabel:"")}exports.asSeconds=asSeconds;function asMillis(value){var _ref2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref2$withUnit=_ref2.withUnit,withUnit=_ref2$withUnit===undefined?true:_ref2$withUnit,_ref2$defaultValue=_ref2.defaultValue,defaultValue=_ref2$defaultValue===undefined?notAvailableLabel:_ref2$defaultValue;if(value==null){return defaultValue}var millisLabel=SPACE+i18n_1.i18n.translate("xpack.apm.formatters.millisTimeUnitLabel",{defaultMessage:"ms"});var formatted=asInteger(value/1e3);return""+formatted+(withUnit?millisLabel:"")}exports.asMillis=asMillis;function asMicros(value){var _ref3=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref3$withUnit=_ref3.withUnit,withUnit=_ref3$withUnit===undefined?true:_ref3$withUnit,_ref3$defaultValue=_ref3.defaultValue,defaultValue=_ref3$defaultValue===undefined?notAvailableLabel:_ref3$defaultValue;if(value==null){return defaultValue}var microsLabel=SPACE+i18n_1.i18n.translate("xpack.apm.formatters.microsTimeUnitLabel",{defaultMessage:"μs"});var formatted=asInteger(value);return""+formatted+(withUnit?microsLabel:"")}exports.asMicros=asMicros;exports.getTimeFormatter=lodash_1.memoize(function(max){var unit=timeUnit(max);switch(unit){case"s":return asSeconds;case"ms":return asMillis;case"us":return asMicros}});function timeUnit(max){if(max>SECONDS_CUT_OFF){return"s"}else if(max>MILLISECONDS_CUT_OFF){return"ms"}else{return"us"}}exports.timeUnit=timeUnit;function asTime(value){var _ref4=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref4$withUnit=_ref4.withUnit,withUnit=_ref4$withUnit===undefined?true:_ref4$withUnit,_ref4$defaultValue=_ref4.defaultValue,defaultValue=_ref4$defaultValue===undefined?notAvailableLabel:_ref4$defaultValue;if(value==null){return defaultValue}var formatter=exports.getTimeFormatter(value);return formatter(value,{withUnit:withUnit,defaultValue:defaultValue})}exports.asTime=asTime;function asDecimal(value){return numeral_1.default(value).format("0,0.0")}exports.asDecimal=asDecimal;function asInteger(value){return numeral_1.default(value).format("0,0")}exports.asInteger=asInteger;function tpmUnit(type){return type==="request"?i18n_1.i18n.translate("xpack.apm.formatters.requestsPerMinLabel",{defaultMessage:"rpm"}):i18n_1.i18n.translate("xpack.apm.formatters.transactionsPerMinLabel",{defaultMessage:"tpm"})}exports.tpmUnit=tpmUnit;function asPercent(numerator,denominator){var fallbackResult=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";if(!denominator||isNaN(numerator)){return fallbackResult}var decimal=numerator/denominator;return numeral_1.default(decimal).format("0.0%")}exports.asPercent=asPercent},225:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var callApi=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(fetchOptions){var _ref2=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref2$camelcase=_ref2.camelcase,camelcase=_ref2$camelcase===undefined?true:_ref2$camelcase,_ref2$prependBasePath=_ref2.prependBasePath,prependBasePath=_ref2$prependBasePath===undefined?true:_ref2$prependBasePath;var combinedFetchOptions,res;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:combinedFetchOptions=fetchOptionsWithDebug(fetchOptions);_context.next=3;return kfetch_1.kfetch(combinedFetchOptions,{prependBasePath:prependBasePath});case 3:res=_context.sent;return _context.abrupt("return",camelcase?humps_1.camelizeKeys(res):res);case 5:case"end":return _context.stop()}}},_callee,this)}));return function callApi(_x2){return _ref.apply(this,arguments)}}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}Object.defineProperty(exports,"__esModule",{value:true});var humps_1=__webpack_require__(4440);__webpack_require__(445);var lodash_1=__webpack_require__(1);var kfetch_1=__webpack_require__(216);function fetchOptionsWithDebug(fetchOptions){var debugEnabled=sessionStorage.getItem("apm_debug")==="true"&&lodash_1.startsWith(fetchOptions.pathname,"/api/apm");if(!debugEnabled){return fetchOptions}return _extends({},fetchOptions,{query:_extends({},fetchOptions.query,{_debug:true})})}exports.callApi=callApi},226:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};Object.defineProperty(exports,"__esModule",{value:true});var lodash_1=__webpack_require__(1);var reselect_1=__webpack_require__(27);function createInitialDataSelector(initialData){return reselect_1.createSelector(function(state){return state},function(state){var data=lodash_1.get(state,"data")||initialData;return _extends({},state,{data:data})})}exports.createInitialDataSelector=createInitialDataSelector},227:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var lodash_1=tslib_1.__importDefault(__webpack_require__(1));var reselect_1=__webpack_require__(27);var url_1=__webpack_require__(44);var location_1=__webpack_require__(687);var serviceDetails_1=__webpack_require__(1118);var transactionDistribution_1=__webpack_require__(1120);exports.TIMEPICKER_UPDATE="TIMEPICKER_UPDATE";function urlParamsReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var action=arguments[1];switch(action.type){case location_1.LOCATION_UPDATE:{var _getPathParams=getPathParams(action.location.pathname),processorEvent=_getPathParams.processorEvent,serviceName=_getPathParams.serviceName,transactionName=_getPathParams.transactionName,transactionType=_getPathParams.transactionType,errorGroupId=_getPathParams.errorGroupId;var _url_1$toQuery=url_1.toQuery(action.location.search),traceId=_url_1$toQuery.traceId,transactionId=_url_1$toQuery.transactionId,detailTab=_url_1$toQuery.detailTab,flyoutDetailTab=_url_1$toQuery.flyoutDetailTab,waterfallItemId=_url_1$toQuery.waterfallItemId,spanId=_url_1$toQuery.spanId,page=_url_1$toQuery.page,sortDirection=_url_1$toQuery.sortDirection,sortField=_url_1$toQuery.sortField,kuery=_url_1$toQuery.kuery;return removeUndefinedProps(_extends({},state,{sortDirection:sortDirection,sortField:sortField,page:toNumber(page)||0,transactionId:toString(transactionId),traceId:toString(traceId),waterfallItemId:toString(waterfallItemId),detailTab:toString(detailTab),flyoutDetailTab:toString(flyoutDetailTab),spanId:toNumber(spanId),kuery:url_1.legacyDecodeURIComponent(kuery),processorEvent:processorEvent,serviceName:serviceName,transactionType:url_1.legacyDecodeURIComponent(transactionType),transactionName:url_1.legacyDecodeURIComponent(transactionName),errorGroupId:errorGroupId}))}case exports.TIMEPICKER_UPDATE:return _extends({},state,{start:action.time.min,end:action.time.max});default:return state}}exports.urlParamsReducer=urlParamsReducer;function toNumber(value){if(value!==undefined&&!Array.isArray(value)){return parseInt(value,10)}}function toString(str){if(str===""||str==="null"||str==="undefined"||Array.isArray(str)){return}return str}function getPathAsArray(pathname){return lodash_1.default.compact(pathname.split("/"))}function removeUndefinedProps(obj){return lodash_1.default.pick(obj,function(value){return value!==undefined})}function getPathParams(pathname){var paths=getPathAsArray(pathname);var pageName=paths[1];switch(pageName){case"transactions":return{processorEvent:"transaction",serviceName:paths[0],transactionType:paths[2],transactionName:paths[3]};case"errors":return{processorEvent:"error",serviceName:paths[0],errorGroupId:paths[2]};case"metrics":return{processorEvent:"metric",serviceName:paths[0]};default:return{}}}function updateTimePicker(time){return{type:exports.TIMEPICKER_UPDATE,time:time}}exports.updateTimePicker=updateTimePicker;exports.getUrlParams=reselect_1.createSelector(function(state){return state.urlParams},serviceDetails_1.getDefaultTransactionType,transactionDistribution_1.getDefaultDistributionSample,function(urlParams,transactionType,_ref){var traceId=_ref.traceId,transactionId=_ref.transactionId;return _extends({transactionType:transactionType,transactionId:transactionId,traceId:traceId},urlParams)})},247:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(3372)},26:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.unit=16;exports.units={unit:exports.unit,eighth:exports.unit/8,quarter:exports.unit/4,half:exports.unit/2,minus:exports.unit*.75,plus:exports.unit*1.5,double:exports.unit*2,triple:exports.unit*3,quadruple:exports.unit*4};function px(value){return value+"px"}exports.px=px;function pct(value){return value+"%"}exports.pct=pct;exports.borderRadius="5px";var colorBlue1="#006E8A";var colorBlue2="#0079a5";exports.colors={black:"#000000",black2:"#2d2d2d",gray1:"#343741",gray2:"#69707D",gray3:"#98A2B3",gray4:"#D3DAE6",gray5:"#F5F7FA",white:"#ffffff",teal:"#017D73",red:"#a30000",yellow:"#FCF2E6",blue1:colorBlue1,blue2:colorBlue2,apmBrown:"#461a0a",apmPurple:"#490092",apmBlue:"#3185fc",apmRed:"#920000",apmRed2:"#db1374",apmGreen:"#00b3a4",apmPink:"#feb6db",apmOrange:"#f98510",apmTan:"#bfa180",apmYellow:"#ecae23",apmLightBlue:"#80bcd2",link:colorBlue2,linkHover:colorBlue1};exports.fontFamily='"Open Sans", Helvetica, Arial, sans-serif';exports.fontFamilyCode='"SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace';exports.fontSize="14px";exports.fontSizes={tiny:"10px",small:"12px",large:"16px",xlarge:"20px",xxlarge:"30px"};function truncate(width){return"\n      max-width: "+width+";\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    "}exports.truncate=truncate;exports.topNavHeight="29px"},3086:function(module,exports,__webpack_require__){"use strict";__webpack_require__(75);__webpack_require__(76);__webpack_require__(77);__webpack_require__(78);__webpack_require__(79);__webpack_require__(80);__webpack_require__(81);__webpack_require__(82);__webpack_require__(83);__webpack_require__(84);__webpack_require__(85);__webpack_require__(86);__webpack_require__(87);__webpack_require__(88);__webpack_require__(89);__webpack_require__(90);__webpack_require__(91);__webpack_require__(92);__webpack_require__(93);__webpack_require__(94);__webpack_require__(95);__webpack_require__(96);__webpack_require__(97);__webpack_require__(98);__webpack_require__(99);__webpack_require__(100);__webpack_require__(101);__webpack_require__(102);__webpack_require__(103);__webpack_require__(104);__webpack_require__(105);__webpack_require__(106);__webpack_require__(107);__webpack_require__(108);__webpack_require__(109);__webpack_require__(110);__webpack_require__(111);__webpack_require__(112);__webpack_require__(113);__webpack_require__(114);__webpack_require__(115);__webpack_require__(116);__webpack_require__(117);__webpack_require__(118);__webpack_require__(119);__webpack_require__(120);__webpack_require__(121);__webpack_require__(122);__webpack_require__(123);__webpack_require__(124);__webpack_require__(125);__webpack_require__(126);__webpack_require__(127);__webpack_require__(128);__webpack_require__(129);__webpack_require__(130);__webpack_require__(131);__webpack_require__(132);__webpack_require__(133);__webpack_require__(134);__webpack_require__(135);__webpack_require__(136);__webpack_require__(137);__webpack_require__(138);__webpack_require__(139);__webpack_require__(140);__webpack_require__(141);__webpack_require__(142);__webpack_require__(143);__webpack_require__(144);__webpack_require__(145);__webpack_require__(146);__webpack_require__(147);__webpack_require__(148);__webpack_require__(149);__webpack_require__(150);__webpack_require__(151);__webpack_require__(152);__webpack_require__(153);__webpack_require__(154);__webpack_require__(155);__webpack_require__(156);__webpack_require__(157);__webpack_require__(158);__webpack_require__(159);__webpack_require__(160);__webpack_require__(161);__webpack_require__(162);__webpack_require__(163);__webpack_require__(164);__webpack_require__(165);__webpack_require__(166);__webpack_require__(167);__webpack_require__(168);__webpack_require__(169);__webpack_require__(170);__webpack_require__(171);__webpack_require__(172);__webpack_require__(173);__webpack_require__(185);var _i18n=__webpack_require__(9);var _kibanaCore__=__webpack_require__(174);var injectedMetadata=JSON.parse(document.querySelector("kbn-injected-metadata").getAttribute("data"));_i18n.i18n.init(injectedMetadata.legacyMetadata.translations);new _kibanaCore__.CoreSystem({injectedMetadata:injectedMetadata,rootDomElement:document.body,requireLegacyFiles:function requireLegacyFiles(){__webpack_require__(3087)}}).start()},3087:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(4);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(14);var _reactRouterDom=__webpack_require__(37);var _reactDom=__webpack_require__(15);var _reactDom2=_interopRequireDefault(_reactDom);__webpack_require__(255);__webpack_require__(207);__webpack_require__(490);__webpack_require__(3088);__webpack_require__(3089);var _index=__webpack_require__(3090);var _index2=_interopRequireDefault(_index);var _Main=__webpack_require__(3091);var _Main2=_interopRequireDefault(_Main);var _Breadcrumbs=__webpack_require__(3190);var _Breadcrumbs2=_interopRequireDefault(_Breadcrumbs);var _timepicker=__webpack_require__(3192);var _configureStore=__webpack_require__(3194);var _configureStore2=_interopRequireDefault(_configureStore);var _GlobalProgress=__webpack_require__(3198);var _GlobalProgress2=_interopRequireDefault(_GlobalProgress);var _LicenseChecker=__webpack_require__(3200);var _LicenseChecker2=_interopRequireDefault(_LicenseChecker);var _url=__webpack_require__(44);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_chrome2.default.setRootTemplate(_index2.default);var store=(0,_configureStore2.default)();(0,_timepicker.initTimepicker)(_url.history,store.dispatch).then(function(){var showPluginBreadcrumbs=!_chrome2.default.getUiSettingsClient().get("k7design",false);_reactDom2.default.render(_react2.default.createElement(_reactRouterDom.Router,{history:_url.history},_react2.default.createElement(_Breadcrumbs2.default,{showPluginBreadcrumbs:showPluginBreadcrumbs})),document.getElementById("react-apm-breadcrumbs"));_reactDom2.default.render(_react2.default.createElement(_reactRedux.Provider,{store:store},_react2.default.createElement(_react.Fragment,null,_react2.default.createElement(_GlobalProgress2.default,null),_react2.default.createElement(_LicenseChecker2.default,null),_react2.default.createElement(_reactRouterDom.Router,{history:_url.history},_react2.default.createElement(_Main2.default,null)))),document.getElementById("react-apm-root"))})},3088:function(module,exports,__webpack_require__){},3089:function(module,exports,__webpack_require__){},3090:function(module,exports){module.exports='<div ng-controller="TimePickerController">\n    <kbn-top-nav name="apm" config="topNavMenu">\n        <div data-transclude-slots>\n            <div data-transclude-slot="topLeftCorner">\n                <div id="react-apm-breadcrumbs"></div>\n            </div>\n        </div>\n    </kbn-top-nav>\n</div>\n\n<div id="react-apm-root" style="overflow-x: auto;"></div>\n'},3091:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _templateObject=_taggedTemplateLiteral(["\n  min-width: ",";\n  padding: ",";\n  min-height: calc(100vh - ",");\n"],["\n  min-width: ",";\n  padding: ",";\n  min-height: calc(100vh - ",");\n"]);exports.default=Main;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _styledComponents=__webpack_require__(18);var _styledComponents2=_interopRequireDefault(_styledComponents);var _reactRouterDom=__webpack_require__(37);var _routeConfig=__webpack_require__(1115);var _ScrollToTopOnPathChange=__webpack_require__(3187);var _ScrollToTopOnPathChange2=_interopRequireDefault(_ScrollToTopOnPathChange);var _variables=__webpack_require__(26);var _ConnectRouterToRedux=__webpack_require__(3188);var _ConnectRouterToRedux2=_interopRequireDefault(_ConnectRouterToRedux);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var MainContainer=_styledComponents2.default.div(_templateObject,(0,_variables.px)(_variables.unit*50),(0,_variables.px)(_variables.units.plus),_variables.topNavHeight);function Main(){return _react2.default.createElement(MainContainer,null,_react2.default.createElement(_reactRouterDom.Route,{component:_ConnectRouterToRedux2.default}),_react2.default.createElement(_reactRouterDom.Route,{component:_ScrollToTopOnPathChange2.default}),_routeConfig.routes.map(function(route,i){return route.switch?_react2.default.createElement(_reactRouterDom.Switch,{key:i},route.routes.map(function(route,i){return _react2.default.createElement(_reactRouterDom.Route,_extends({key:i},route))})):_react2.default.createElement(_reactRouterDom.Route,_extends({key:i},route))}))}module.exports=exports["default"]},3093:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _reactRedux=__webpack_require__(14);var _view=__webpack_require__(3094);var _urlParams=__webpack_require__(227);function mapStateToProps(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return{urlParams:(0,_urlParams.getUrlParams)(state),location:state.location}}var mapDispatchToProps={};exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(_view.ErrorGroupDetails);module.exports=exports["default"]},3094:function(module,exports,__webpack_require__){"use strict";var _templateObject=_taggedTemplateLiteral(["\n  margin-bottom: ",";\n"],["\n  margin-bottom: ",";\n"]),_templateObject2=_taggedTemplateLiteral(["\n  margin-left: ",";\n  margin-top: -",";\n"],["\n  margin-left: ",";\n  margin-top: -",";\n"]),_templateObject3=_taggedTemplateLiteral(["\n  margin-bottom: ",";\n  font-size: ",";\n  color: ",";\n"],["\n  margin-bottom: ",";\n  font-size: ",";\n  color: ",";\n"]),_templateObject4=_taggedTemplateLiteral(["\n  font-family: ",";\n  font-weight: bold;\n  font-size: ",";\n  margin-bottom: ",";\n"],["\n  font-family: ",";\n  font-weight: bold;\n  font-size: ",";\n  margin-bottom: ",";\n"]),_templateObject5=_taggedTemplateLiteral(["\n  font-family: ",";\n"],["\n  font-family: ",";\n"]);function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var lodash_1=__webpack_require__(1);var react_1=tslib_1.__importStar(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var constants_1=__webpack_require__(179);var errorDistribution_1=__webpack_require__(1116);var errorGroup_1=__webpack_require__(3096);var variables_1=__webpack_require__(26);var KueryBar_1=__webpack_require__(492);var DetailView_1=__webpack_require__(3103);var Distribution_1=tslib_1.__importDefault(__webpack_require__(1127));var Titles=styled_components_1.default.div(_templateObject,variables_1.px(variables_1.units.plus));var UnhandledBadge=styled_components_1.default(eui_1.EuiBadge)(_templateObject2,variables_1.px(variables_1.unit),variables_1.px(variables_1.units.half-1));var Label=styled_components_1.default.div(_templateObject3,variables_1.px(variables_1.units.quarter),variables_1.fontSizes.small,variables_1.colors.gray3);var Message=styled_components_1.default.div(_templateObject4,variables_1.fontFamilyCode,variables_1.fontSizes.large,variables_1.px(variables_1.units.half));var Culprit=styled_components_1.default.div(_templateObject5,variables_1.fontFamilyCode);function getShortGroupId(errorGroupId){if(!errorGroupId){return"N/A"}return errorGroupId.slice(0,5)}function ErrorGroupDetails(_ref){var urlParams=_ref.urlParams,location=_ref.location;return react_1.default.createElement(errorGroup_1.ErrorGroupDetailsRequest,{urlParams:urlParams,render:function render(errorGroup){var showDetails=errorGroup.data.occurrencesCount!==0;var logMessage=lodash_1.get(errorGroup.data.error,constants_1.ERROR_LOG_MESSAGE);var excMessage=lodash_1.get(errorGroup.data.error,constants_1.ERROR_EXC_MESSAGE);var culprit=lodash_1.get(errorGroup.data.error,constants_1.ERROR_CULPRIT);var isUnhandled=lodash_1.get(errorGroup.data.error,constants_1.ERROR_EXC_HANDLED)===false;return react_1.default.createElement("div",null,react_1.default.createElement(eui_1.EuiTitle,null,react_1.default.createElement("span",null,"Error group ",getShortGroupId(urlParams.errorGroupId),isUnhandled&&react_1.default.createElement(UnhandledBadge,{color:"warning"},"Unhandled"))),react_1.default.createElement(eui_1.EuiSpacer,{size:"m"}),react_1.default.createElement(KueryBar_1.KueryBar,null),react_1.default.createElement(eui_1.EuiSpacer,{size:"s"}),showDetails&&react_1.default.createElement(Titles,null,react_1.default.createElement(eui_1.EuiText,null,logMessage&&react_1.default.createElement(react_1.Fragment,null,react_1.default.createElement(Label,null,"Log message"),react_1.default.createElement(Message,null,logMessage)),react_1.default.createElement(Label,null,"Exception message"),react_1.default.createElement(Message,null,excMessage||"N/A"),react_1.default.createElement(Label,null,"Culprit"),react_1.default.createElement(Culprit,null,culprit||"N/A"))),react_1.default.createElement(errorDistribution_1.ErrorDistributionRequest,{urlParams:urlParams,render:function render(_ref2){var data=_ref2.data;return react_1.default.createElement(Distribution_1.default,{distribution:data})}}),showDetails&&react_1.default.createElement(DetailView_1.DetailView,{errorGroup:errorGroup,urlParams:urlParams,location:location}))}})}exports.ErrorGroupDetails=ErrorGroupDetails},3096:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_redux_request_1=__webpack_require__(74);var error_groups_1=__webpack_require__(685);var helpers_1=__webpack_require__(226);var ID="errorGroupDetails";var INITIAL_DATA={};var withInitialData=helpers_1.createInitialDataSelector(INITIAL_DATA);function getErrorGroupDetails(state){return withInitialData(state.reactReduxRequest[ID])}exports.getErrorGroupDetails=getErrorGroupDetails;function ErrorGroupDetailsRequest(_ref){var urlParams=_ref.urlParams,render=_ref.render;var serviceName=urlParams.serviceName,errorGroupId=urlParams.errorGroupId,start=urlParams.start,end=urlParams.end,kuery=urlParams.kuery;if(!(serviceName&&start&&end&&errorGroupId)){return null}return react_1.default.createElement(react_redux_request_1.Request,{id:ID,fn:error_groups_1.loadErrorGroupDetails,args:[{serviceName:serviceName,start:start,end:end,errorGroupId:errorGroupId,kuery:kuery}],selector:getErrorGroupDetails,render:render})}exports.ErrorGroupDetailsRequest=ErrorGroupDetailsRequest},3097:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _templateObject=_taggedTemplateLiteral(["\n  margin-bottom: 10px;\n"],["\n  margin-bottom: 10px;\n"]);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _lodash=__webpack_require__(1);var _eui=__webpack_require__(2);var _url=__webpack_require__(44);var _Typeahead=__webpack_require__(3098);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _kuery=__webpack_require__(1117);var _styledComponents=__webpack_require__(18);var _styledComponents2=_interopRequireDefault(_styledComponents);var _get_bool_filter=__webpack_require__(3102);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var Container=_styledComponents2.default.div(_templateObject);var KueryBarView=function(_Component){_inherits(KueryBarView,_Component);function KueryBarView(){var _ref,_this2=this;var _temp,_this,_ret;_classCallCheck(this,KueryBarView);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=KueryBarView.__proto__||Object.getPrototypeOf(KueryBarView)).call.apply(_ref,[this].concat(args))),_this),_this.state={indexPattern:null,suggestions:[],isLoadingIndexPattern:true,isLoadingSuggestions:false},_this.onChange=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(inputValue,selectionStart){var indexPattern,urlParams,currentRequest,boolFilter,suggestions;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:indexPattern=_this.state.indexPattern;urlParams=_this.props.urlParams;_this.setState({suggestions:[],isLoadingSuggestions:true});currentRequest=(0,_lodash.uniqueId)();_this.currentRequest=currentRequest;boolFilter=(0,_get_bool_filter.getBoolFilter)(urlParams);_context.prev=6;_context.next=9;return(0,_kuery.getSuggestions)(inputValue,selectionStart,indexPattern,boolFilter);case 9:_context.t0=function(suggestion){return!(0,_lodash.startsWith)(suggestion.text,"span.")};suggestions=_context.sent.filter(_context.t0);if(!(currentRequest!==_this.currentRequest)){_context.next=13;break}return _context.abrupt("return");case 13:_this.setState({suggestions:suggestions,isLoadingSuggestions:false});_context.next=19;break;case 16:_context.prev=16;_context.t1=_context["catch"](6);console.error("Error while fetching suggestions",_context.t1);case 19:case"end":return _context.stop()}}},_callee,_this2,[[6,16]])}));return function(_x,_x2){return _ref2.apply(this,arguments)}}(),_this.onSubmit=function(inputValue){var indexPattern=_this.state.indexPattern;var location=_this.props.location;try{var res=(0,_kuery.convertKueryToEsQuery)(inputValue,indexPattern);if(!res){return}_url.history.replace(_extends({},location,{search:(0,_url.fromQuery)(_extends({},(0,_url.toQuery)(_this.props.location.search),{kuery:(0,_url.legacyEncodeURIComponent)(inputValue.trim())}))}))}catch(e){console.log("Invalid kuery syntax")}},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(KueryBarView,[{key:"componentDidMount",value:function(){var _ref3=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var indexPattern;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return(0,_kuery.getAPMIndexPatternForKuery)();case 2:indexPattern=_context2.sent;this.setState({indexPattern:indexPattern,isLoadingIndexPattern:false});case 4:case"end":return _context2.stop()}}},_callee2,this)}));function componentDidMount(){return _ref3.apply(this,arguments)}return componentDidMount}()},{key:"render",value:function render(){var apmIndexPatternTitle=_chrome2.default.getInjected("apmIndexPatternTitle");var indexPatternMissing=!this.state.isLoadingIndexPattern&&!this.state.indexPattern;return _react2.default.createElement(Container,null,_react2.default.createElement(_Typeahead.Typeahead,{disabled:indexPatternMissing,isLoading:this.state.isLoadingSuggestions,initialValue:this.props.urlParams.kuery,onChange:this.onChange,onSubmit:this.onSubmit,suggestions:this.state.suggestions}),indexPatternMissing&&_react2.default.createElement(_eui.EuiCallOut,{style:{display:"inline-block",marginTop:"10px"},title:_react2.default.createElement("div",null,"There's no APM index pattern with the title \"",apmIndexPatternTitle,'" available. To use the Query bar, please choose to import the APM index pattern via the'," ",_react2.default.createElement(_url.KibanaLink,{pathname:"/app/kibana",hash:"/home/tutorial/apm"},"Setup Instructions.")),color:"warning",iconType:"alert",size:"s"}))}}]);return KueryBarView}(_react.Component);KueryBarView.propTypes={location:_propTypes2.default.object.isRequired,urlParams:_propTypes2.default.object.isRequired};exports.default=KueryBarView;module.exports=exports["default"]},3098:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Typeahead=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _Suggestions=__webpack_require__(3099);var _Suggestions2=_interopRequireDefault(_Suggestions);var _ClickOutside=__webpack_require__(3101);var _ClickOutside2=_interopRequireDefault(_ClickOutside);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var KEY_CODES={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,ESC:27,TAB:9};var Typeahead=exports.Typeahead=function(_Component){_inherits(Typeahead,_Component);function Typeahead(){var _ref;var _temp,_this,_ret;_classCallCheck(this,Typeahead);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=Typeahead.__proto__||Object.getPrototypeOf(Typeahead)).call.apply(_ref,[this].concat(args))),_this),_this.state={isSuggestionsVisible:false,index:null,value:"",inputIsPristine:true},_this.incrementIndex=function(currentIndex){var nextIndex=currentIndex+1;if(currentIndex===null||nextIndex>=_this.props.suggestions.length){nextIndex=0}_this.setState({index:nextIndex})},_this.decrementIndex=function(currentIndex){var previousIndex=currentIndex-1;if(previousIndex<0){previousIndex=null}_this.setState({index:previousIndex})},_this.onKeyUp=function(event){var selectionStart=event.target.selectionStart;var value=_this.state.value;switch(event.keyCode){case KEY_CODES.LEFT:_this.setState({isSuggestionsVisible:true});_this.props.onChange(value,selectionStart);break;case KEY_CODES.RIGHT:_this.setState({isSuggestionsVisible:true});_this.props.onChange(value,selectionStart);break}},_this.onKeyDown=function(event){var _this$state=_this.state,isSuggestionsVisible=_this$state.isSuggestionsVisible,index=_this$state.index,value=_this$state.value;switch(event.keyCode){case KEY_CODES.DOWN:event.preventDefault();if(isSuggestionsVisible){_this.incrementIndex(index)}else{_this.setState({isSuggestionsVisible:true,index:0})}break;case KEY_CODES.UP:event.preventDefault();if(isSuggestionsVisible){_this.decrementIndex(index)}break;case KEY_CODES.ENTER:event.preventDefault();if(isSuggestionsVisible&&_this.props.suggestions[index]){_this.selectSuggestion(_this.props.suggestions[index])}else{_this.setState({isSuggestionsVisible:false});_this.props.onSubmit(value)}break;case KEY_CODES.ESC:event.preventDefault();_this.setState({isSuggestionsVisible:false});break;case KEY_CODES.TAB:_this.setState({isSuggestionsVisible:false});break}},_this.selectSuggestion=function(suggestion){var nextInputValue=_this.state.value.substr(0,suggestion.start)+suggestion.text+_this.state.value.substr(suggestion.end);_this.setState({value:nextInputValue,index:null});_this.props.onChange(nextInputValue,nextInputValue.length)},_this.onClickOutside=function(){_this.setState({isSuggestionsVisible:false})},_this.onChangeInputValue=function(event){var _event$target=event.target,value=_event$target.value,selectionStart=_event$target.selectionStart;var hasValue=Boolean(value.trim());_this.setState({value:value,inputIsPristine:false,isSuggestionsVisible:hasValue,index:null});if(!hasValue){_this.props.onSubmit(value)}_this.props.onChange(value,selectionStart)},_this.onClickInput=function(event){var selectionStart=event.target.selectionStart;_this.props.onChange(_this.state.value,selectionStart)},_this.onClickSuggestion=function(suggestion){_this.selectSuggestion(suggestion);_this.inputRef.focus()},_this.onMouseEnterSuggestion=function(index){_this.setState({index:index})},_this.onSubmit=function(){_this.props.onSubmit(_this.state.value);_this.setState({isSuggestionsVisible:false})},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(Typeahead,[{key:"render",value:function render(){var _this2=this;return _react2.default.createElement(_ClickOutside2.default,{onClickOutside:this.onClickOutside,style:{position:"relative"}},_react2.default.createElement("div",{style:{position:"relative"}},_react2.default.createElement(_eui.EuiFieldSearch,{fullWidth:true,style:{backgroundImage:"none"},placeholder:"Search transactions and errors... (E.g. transaction.duration.us > 300000 AND context.response.status_code >= 400)",inputRef:function inputRef(node){if(node){_this2.inputRef=node}},disabled:this.props.disabled,value:this.state.value,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onChange:this.onChangeInputValue,onClick:this.onClickInput,autoComplete:"off",spellCheck:false}),this.props.isLoading&&_react2.default.createElement(_eui.EuiProgress,{size:"xs",color:"accent",position:"absolute",style:{bottom:0,top:"initial"}})),_react2.default.createElement(_Suggestions2.default,{show:this.state.isSuggestionsVisible,suggestions:this.props.suggestions,index:this.state.index,onClick:this.onClickSuggestion,onMouseEnter:this.onMouseEnterSuggestion}))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props,state){if(state.inputIsPristine&&props.initialValue){return{value:props.initialValue}}return null}}]);return Typeahead}(_react.Component);Typeahead.propTypes={initialValue:_propTypes2.default.string,isLoading:_propTypes2.default.bool,disabled:_propTypes2.default.bool,onChange:_propTypes2.default.func.isRequired,onSubmit:_propTypes2.default.func.isRequired,suggestions:_propTypes2.default.array.isRequired};Typeahead.defaultProps={isLoading:false,disabled:false,suggestions:[]}},3099:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _templateObject=_taggedTemplateLiteral(["\n  width: 100%;\n  border: 1px solid ",";\n  border-radius: ",";\n  box-shadow: 0px "," ","\n    ",";\n  position: absolute;\n  background: #fff;\n  z-index: 10;\n  left: 0;\n  max-height: ",";\n  overflow: scroll;\n"],["\n  width: 100%;\n  border: 1px solid ",";\n  border-radius: ",";\n  box-shadow: 0px "," ","\n    ",";\n  position: absolute;\n  background: #fff;\n  z-index: 10;\n  left: 0;\n  max-height: ",";\n  overflow: scroll;\n"]);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _styledComponents=__webpack_require__(18);var _styledComponents2=_interopRequireDefault(_styledComponents);var _lodash=__webpack_require__(1);var _Suggestion=__webpack_require__(3100);var _Suggestion2=_interopRequireDefault(_Suggestion);var _variables=__webpack_require__(26);var _polished=__webpack_require__(234);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var List=_styledComponents2.default.ul(_templateObject,_variables.colors.gray4,(0,_variables.px)(_variables.units.quarter),(0,_variables.px)(_variables.units.quarter),(0,_variables.px)(_variables.units.double),(0,_polished.rgba)(_variables.colors.black,.1),(0,_variables.px)(_variables.unit*20));var Suggestions=function(_Component){_inherits(Suggestions,_Component);function Suggestions(){var _ref;var _temp,_this,_ret;_classCallCheck(this,Suggestions);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=Suggestions.__proto__||Object.getPrototypeOf(Suggestions)).call.apply(_ref,[this].concat(args))),_this),_this.childNodes=[],_this.scrollIntoView=function(){var parent=_this.parentNode;var child=_this.childNodes[_this.props.index];if(_this.props.index==null||!parent||!child){return}var scrollTop=Math.max(Math.min(parent.scrollTop,child.offsetTop),child.offsetTop+child.offsetHeight-parent.offsetHeight);parent.scrollTop=scrollTop},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(Suggestions,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(prevProps.index!==this.props.index){this.scrollIntoView()}}},{key:"render",value:function render(){var _this2=this;if(!this.props.show||(0,_lodash.isEmpty)(this.props.suggestions)){return null}var suggestions=this.props.suggestions.map(function(suggestion,index){var key=suggestion+"_"+index;return _react2.default.createElement(_Suggestion2.default,{innerRef:function innerRef(node){return _this2.childNodes[index]=node},selected:index===_this2.props.index,suggestion:suggestion,onClick:_this2.props.onClick,onMouseEnter:function onMouseEnter(){return _this2.props.onMouseEnter(index)},key:key})});return _react2.default.createElement(List,{innerRef:function innerRef(node){return _this2.parentNode=node}},suggestions)}}]);return Suggestions}(_react.Component);Suggestions.propTypes={index:_propTypes2.default.number,onClick:_propTypes2.default.func.isRequired,onMouseEnter:_propTypes2.default.func.isRequired,show:_propTypes2.default.bool,suggestions:_propTypes2.default.array.isRequired};exports.default=Suggestions;module.exports=exports["default"]},3100:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _templateObject=_taggedTemplateLiteral(["\n  color: ",";\n\n  p {\n    display: inline;\n\n    span {\n      font-family: ",";\n      color: ",";\n      padding: 0 ",";\n      display: inline-block;\n    }\n  }\n"],["\n  color: ",";\n\n  p {\n    display: inline;\n\n    span {\n      font-family: ",";\n      color: ",";\n      padding: 0 ",";\n      display: inline-block;\n    }\n  }\n"]),_templateObject2=_taggedTemplateLiteral(["\n  font-size: ",";\n  height: ",";\n  align-items: center;\n  display: flex;\n  background: ",";\n  cursor: pointer;\n  border-radius: ",";\n\n  "," {\n    p span {\n      background: ",";\n    }\n  }\n"],["\n  font-size: ",";\n  height: ",";\n  align-items: center;\n  display: flex;\n  background: ",";\n  cursor: pointer;\n  border-radius: ",";\n\n  "," {\n    p span {\n      background: ",";\n    }\n  }\n"]),_templateObject3=_taggedTemplateLiteral(["\n  flex: 0 0 ",";\n  background: ",";\n  color: ",";\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  line-height: ",";\n"],["\n  flex: 0 0 ",";\n  background: ",";\n  color: ",";\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  line-height: ",";\n"]),_templateObject4=_taggedTemplateLiteral(["\n  flex: 0 0 ",";\n  color: ",";\n  padding: 0 ",";\n"],["\n  flex: 0 0 ",";\n  color: ",";\n  padding: 0 ",";\n"]);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _styledComponents=__webpack_require__(18);var _styledComponents2=_interopRequireDefault(_styledComponents);var _eui=__webpack_require__(2);var _variables=__webpack_require__(26);var _polished=__webpack_require__(234);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function getIconColor(type){switch(type){case"field":return _variables.colors.apmOrange;case"value":return _variables.colors.teal;case"operator":return _variables.colors.apmBlue;case"conjunction":return _variables.colors.apmPurple;case"recentSearch":return _variables.colors.gray3}}var Description=_styledComponents2.default.div(_templateObject,_variables.colors.gray2,_variables.fontFamilyCode,_variables.colors.black,(0,_variables.px)(_variables.units.quarter));var ListItem=_styledComponents2.default.li(_templateObject2,_variables.fontSizes.small,(0,_variables.px)(_variables.units.double),function(props){return props.selected?_variables.colors.gray5:"initial"},(0,_variables.px)(_variables.units.quarter),Description,function(props){return props.selected?_variables.colors.white:_variables.colors.gray5});var Icon=_styledComponents2.default.div(_templateObject3,(0,_variables.px)(_variables.units.double),function(props){return(0,_polished.tint)(.1,getIconColor(props.type))},function(props){return getIconColor(props.type)},(0,_variables.px)(_variables.units.double));var TextValue=_styledComponents2.default.div(_templateObject4,(0,_variables.px)(_variables.unit*16),_variables.colors.black2,(0,_variables.px)(_variables.units.half));function getEuiIconType(type){switch(type){case"field":return"kqlField";case"value":return"kqlValue";case"recentSearch":return"search";case"conjunction":return"kqlSelector";case"operator":return"kqlOperand";default:throw new Error("Unknown type",type)}}function Suggestion(props){return _react2.default.createElement(ListItem,{innerRef:props.innerRef,selected:props.selected,onClick:function onClick(){return props.onClick(props.suggestion)},onMouseEnter:props.onMouseEnter},_react2.default.createElement(Icon,{type:props.suggestion.type},_react2.default.createElement(_eui.EuiIcon,{type:getEuiIconType(props.suggestion.type)})),_react2.default.createElement(TextValue,null,props.suggestion.text),_react2.default.createElement(Description,{dangerouslySetInnerHTML:{__html:props.suggestion.description}}))}Suggestion.propTypes={onClick:_propTypes2.default.func.isRequired,onMouseEnter:_propTypes2.default.func.isRequired,selected:_propTypes2.default.bool,suggestion:_propTypes2.default.object.isRequired,innerRef:_propTypes2.default.func.isRequired};exports.default=Suggestion;module.exports=exports["default"]},3101:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ClickOutside=function(_Component){_inherits(ClickOutside,_Component);function ClickOutside(){var _ref;var _temp,_this,_ret;_classCallCheck(this,ClickOutside);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=ClickOutside.__proto__||Object.getPrototypeOf(ClickOutside)).call.apply(_ref,[this].concat(args))),_this),_this.setNodeRef=function(node){_this.nodeRef=node},_this.onClick=function(event){if(_this.nodeRef&&!_this.nodeRef.contains(event.target)){_this.props.onClickOutside()}},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(ClickOutside,[{key:"componentDidMount",value:function componentDidMount(){document.addEventListener("mousedown",this.onClick)}},{key:"componentWillUnmount",value:function componentWillUnmount(){document.removeEventListener("mousedown",this.onClick)}},{key:"render",value:function render(){var _props=this.props,onClickOutside=_props.onClickOutside,restProps=_objectWithoutProperties(_props,["onClickOutside"]);return _react2.default.createElement("div",_extends({ref:this.setNodeRef},restProps),this.props.children)}}]);return ClickOutside}(_react.Component);exports.default=ClickOutside;ClickOutside.propTypes={onClickOutside:_propTypes2.default.func.isRequired};module.exports=exports["default"]},3102:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getBoolFilter=getBoolFilter;var _constants=__webpack_require__(179);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getBoolFilter(urlParams){var boolFilter=[{range:{"@timestamp":{gte:new Date(urlParams.start).getTime(),lte:new Date(urlParams.end).getTime(),format:"epoch_millis"}}}];if(urlParams.serviceName){boolFilter.push({term:_defineProperty({},_constants.SERVICE_NAME,urlParams.serviceName)})}switch(urlParams.processorEvent){case"transaction":boolFilter.push({term:_defineProperty({},_constants.PROCESSOR_EVENT,"transaction")});if(urlParams.transactionName){boolFilter.push({term:_defineProperty({},_constants.TRANSACTION_NAME+".keyword",urlParams.transactionName)})}if(urlParams.transactionType){boolFilter.push({term:_defineProperty({},_constants.TRANSACTION_TYPE,urlParams.transactionType)})}break;case"error":boolFilter.push({term:_defineProperty({},_constants.PROCESSOR_EVENT,"error")});if(urlParams.errorGroupId){boolFilter.push({term:_defineProperty({},_constants.ERROR_GROUP_ID,urlParams.errorGroupId)})}break;default:boolFilter.push({bool:{should:[{term:_defineProperty({},_constants.PROCESSOR_EVENT,"error")},{term:_defineProperty({},_constants.PROCESSOR_EVENT,"transaction")}]}})}return boolFilter}},3103:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _templateObject=_taggedTemplateLiteral(["\n  position: relative;\n  border: 1px solid ",";\n  border-radius: ",";\n  margin-top: ",";\n"],["\n  position: relative;\n  border: 1px solid ",";\n  border-radius: ",";\n  margin-top: ",";\n"]),_templateObject2=_taggedTemplateLiteral(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  padding: "," "," 0;\n  margin-bottom: ",";\n"],["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  padding: "," "," 0;\n  margin-bottom: ",";\n"]),_templateObject3=_taggedTemplateLiteral(["\n  padding: "," "," 0;\n"],["\n  padding: "," "," 0;\n"]);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var lodash_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var constants_1=__webpack_require__(179);var constants_2=__webpack_require__(179);var constants_3=__webpack_require__(688);var variables_1=__webpack_require__(26);var url_1=__webpack_require__(44);var url_2=__webpack_require__(44);var DiscoverErrorButton_1=__webpack_require__(3104);var PropertiesTable_1=__webpack_require__(494);var Stacktrace_1=__webpack_require__(1123);var StickyProperties_1=__webpack_require__(495);var Container=styled_components_1.default.div(_templateObject,variables_1.colors.gray4,variables_1.borderRadius,variables_1.px(variables_1.units.plus));var HeaderContainer=styled_components_1.default.div(_templateObject2,variables_1.px(variables_1.units.plus),variables_1.px(variables_1.units.plus),variables_1.px(variables_1.unit));var PaddedContainer=styled_components_1.default.div(_templateObject3,variables_1.px(variables_1.units.plus),variables_1.px(variables_1.units.plus));var EXC_STACKTRACE_TAB="exception_stacktrace";var LOG_STACKTRACE_TAB="log_stacktrace";function DetailView(_ref){var errorGroup=_ref.errorGroup,urlParams=_ref.urlParams,location=_ref.location;if(errorGroup.status!==constants_3.STATUS.SUCCESS){return null}var _errorGroup$data=errorGroup.data,transaction=_errorGroup$data.transaction,error=_errorGroup$data.error,occurrencesCount=_errorGroup$data.occurrencesCount;if(!error){return null}var transactionLink=getTransactionLink(error,transaction);var stickyProperties=[{fieldName:"@timestamp",label:"Timestamp",val:error["@timestamp"],width:"50%"},{fieldName:constants_2.REQUEST_URL_FULL,label:"URL",val:lodash_1.get(error,constants_2.REQUEST_URL_FULL,"N/A"),truncated:true,width:"50%"},{fieldName:constants_2.REQUEST_METHOD,label:"Request method",val:lodash_1.get(error,constants_2.REQUEST_METHOD,"N/A"),width:"25%"},{fieldName:constants_2.ERROR_EXC_HANDLED,label:"Handled",val:lodash_1.get(error,constants_2.ERROR_EXC_HANDLED,"N/A"),width:"25%"},{fieldName:constants_2.TRANSACTION_ID,label:"Transaction sample ID",val:transactionLink||"N/A",width:"25%"},{fieldName:constants_2.USER_ID,label:"User ID",val:lodash_1.get(error,constants_2.USER_ID,"N/A"),width:"25%"}];var tabs=getTabs(error);var currentTab=getCurrentTab(tabs,urlParams.detailTab);return react_1.default.createElement(Container,null,react_1.default.createElement(HeaderContainer,null,react_1.default.createElement(eui_1.EuiTitle,{size:"s"},react_1.default.createElement("h3",null,"Error occurrence")),react_1.default.createElement(DiscoverErrorButton_1.DiscoverErrorButton,{error:error,kuery:urlParams.kuery},react_1.default.createElement(eui_1.EuiButtonEmpty,{iconType:"discoverApp"},"View "+occurrencesCount+" occurrences in Discover"))),react_1.default.createElement(PaddedContainer,null,react_1.default.createElement(StickyProperties_1.StickyProperties,{stickyProperties:stickyProperties})),react_1.default.createElement(eui_1.EuiSpacer,null),react_1.default.createElement(eui_1.EuiTabs,null,tabs.map(function(key){return react_1.default.createElement(eui_1.EuiTab,{onClick:function onClick(){url_1.history.replace(_extends({},location,{search:url_1.fromQuery(_extends({},url_1.toQuery(location.search),{detailTab:key}))}))},isSelected:currentTab===key,key:key},lodash_1.capitalize(key.replace("_"," ")))})),react_1.default.createElement(PaddedContainer,null,react_1.default.createElement(TabContent,{error:error,currentTab:currentTab})))}exports.DetailView=DetailView;function getTransactionLink(error,transaction){if(!transaction||!lodash_1.get(error,"transaction.sampled")){return}var path="/"+transaction.context.service.name+"/transactions/"+url_2.legacyEncodeURIComponent(transaction.transaction.type)+"/"+url_2.legacyEncodeURIComponent(transaction.transaction.name);return react_1.default.createElement(url_2.KibanaLink,{pathname:"/app/apm",hash:path,query:{transactionId:transaction.transaction.id,traceId:lodash_1.get(transaction,constants_2.TRACE_ID)}},transaction.transaction.id)}function TabContent(_ref2){var error=_ref2.error,currentTab=_ref2.currentTab;var codeLanguage=error.context.service.name;var agentName=error.context.service.agent.name;var excStackframes=lodash_1.get(error,constants_1.ERROR_EXC_STACKTRACE);var logStackframes=lodash_1.get(error,constants_1.ERROR_LOG_STACKTRACE);switch(currentTab){case LOG_STACKTRACE_TAB:case undefined:return react_1.default.createElement(Stacktrace_1.Stacktrace,{stackframes:logStackframes,codeLanguage:codeLanguage});case EXC_STACKTRACE_TAB:return react_1.default.createElement(Stacktrace_1.Stacktrace,{stackframes:excStackframes,codeLanguage:codeLanguage});default:var propData=error.context[currentTab];return react_1.default.createElement(PropertiesTable_1.PropertiesTable,{propData:propData,propKey:currentTab,agentName:agentName})}}exports.TabContent=TabContent;function getCurrentTab(){var tabs=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var selectedTab=arguments[1];return tabs.includes(selectedTab)?selectedTab:tabs[0]}exports.getCurrentTab=getCurrentTab;function getTabs(error){var hasLogStacktrace=lodash_1.get(error,constants_1.ERROR_LOG_STACKTRACE,[]).length>0;var contextKeys=Object.keys(error.context);return[].concat(_toConsumableArray(hasLogStacktrace?[LOG_STACKTRACE_TAB]:[]),[EXC_STACKTRACE_TAB],_toConsumableArray(PropertiesTable_1.getPropertyTabNames(contextKeys)))}exports.getTabs=getTabs},3104:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var constants_1=__webpack_require__(179);var DiscoverButton_1=__webpack_require__(689);function getDiscoverQuery(error,kuery){var serviceName=error.context.service.name;var groupId=error.error.grouping_key;var query=constants_1.SERVICE_NAME+':"'+serviceName+'" AND '+constants_1.ERROR_GROUP_ID+':"'+groupId+'"';if(kuery){query+=" AND "+kuery}return{_a:{interval:"auto",query:{language:"lucene",query:query},sort:{"@timestamp":"desc"}}}}var DiscoverErrorButton=function DiscoverErrorButton(_ref){var error=_ref.error,kuery=_ref.kuery,children=_ref.children;return react_1.default.createElement(DiscoverButton_1.DiscoverButton,{query:getDiscoverQuery(error,kuery),children:children})};exports.DiscoverErrorButton=DiscoverErrorButton},3105:function(module,exports,__webpack_require__){"use strict";var _templateObject=_taggedTemplateLiteral(["\n  font-family: ",";\n  font-size: ",";\n  width: 100%;\n"],["\n  font-family: ",";\n  font-size: ",";\n  width: 100%;\n"]),_templateObject2=_taggedTemplateLiteral(["\n  border-bottom: "," solid ",";\n  &:last-child {\n    border: 0;\n  }\n"],["\n  border-bottom: "," solid ",";\n  &:last-child {\n    border: 0;\n  }\n"]),_templateObject3=_taggedTemplateLiteral(["\n  vertical-align: top;\n  padding: "," 0;\n  line-height: 1.5;\n\n  ",":first-child> & {\n    padding-top: 0;\n  }\n\n  ",":last-child> & {\n    padding-bottom: 0;\n  }\n\n  &:first-child {\n    width: ",";\n    font-weight: bold;\n  }\n"],["\n  vertical-align: top;\n  padding: "," 0;\n  line-height: 1.5;\n\n  ",":first-child> & {\n    padding-top: 0;\n  }\n\n  ",":last-child> & {\n    padding-bottom: 0;\n  }\n\n  &:first-child {\n    width: ",";\n    font-weight: bold;\n  }\n"]),_templateObject4=_taggedTemplateLiteral(["\n  color: ",";\n"],["\n  color: ",";\n"]);function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var lodash_1=tslib_1.__importDefault(__webpack_require__(1));var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var variables_1=__webpack_require__(26);var Table=styled_components_1.default.table(_templateObject,variables_1.fontFamilyCode,variables_1.fontSizes.small);var Row=styled_components_1.default.tr(_templateObject2,variables_1.px(1),variables_1.colors.gray4);var Cell=styled_components_1.default.td(_templateObject3,variables_1.px(variables_1.units.half),Row,Row,variables_1.px(variables_1.units.unit*20));var EmptyValue=styled_components_1.default.span(_templateObject4,variables_1.colors.gray3);function FormattedKey(_ref){var k=_ref.k,value=_ref.value;if(value==null){return react_1.default.createElement(EmptyValue,null,k)}return react_1.default.createElement(react_1.default.Fragment,null,k)}exports.FormattedKey=FormattedKey;function FormattedValue(_ref2){var value=_ref2.value;if(lodash_1.default.isObject(value)){return react_1.default.createElement("pre",null,JSON.stringify(value,null,4))}else if(lodash_1.default.isBoolean(value)||lodash_1.default.isNumber(value)){return react_1.default.createElement(react_1.default.Fragment,null,String(value))}else if(!value){return react_1.default.createElement(EmptyValue,null,"N/A")}return react_1.default.createElement(react_1.default.Fragment,null,value)}exports.FormattedValue=FormattedValue;function NestedValue(_ref3){var parentKey=_ref3.parentKey,value=_ref3.value,depth=_ref3.depth,keySorter=_ref3.keySorter;if(depth>0&&lodash_1.default.isObject(value)){return react_1.default.createElement(NestedKeyValueTable,{data:value,parentKey:parentKey,keySorter:keySorter,depth:depth-1})}return react_1.default.createElement(FormattedValue,{value:value})}exports.NestedValue=NestedValue;function NestedKeyValueTable(_ref4){var data=_ref4.data,parentKey=_ref4.parentKey,_ref4$keySorter=_ref4.keySorter,keySorter=_ref4$keySorter===undefined?Object.keys:_ref4$keySorter,_ref4$depth=_ref4.depth,depth=_ref4$depth===undefined?0:_ref4$depth;return react_1.default.createElement(Table,null,react_1.default.createElement("tbody",null,keySorter(data,parentKey).map(function(key){return react_1.default.createElement(Row,{key:key},react_1.default.createElement(Cell,null,react_1.default.createElement(FormattedKey,{k:key,value:data[key]})),react_1.default.createElement(Cell,null,react_1.default.createElement(NestedValue,{parentKey:key,value:data[key],keySorter:keySorter,depth:depth})))})))}exports.NestedKeyValueTable=NestedKeyValueTable},3106:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PROPERTY_CONFIG=[{key:"request",required:false,presortedKeys:["http_version","method","url","socket","headers","body"]},{key:"response",required:false,presortedKeys:["status_code","headers","headers_sent","finished"]},{key:"system",required:false,presortedKeys:["hostname","architecture","platform"]},{key:"service",required:false,presortedKeys:["runtime","framework","agent","version"]},{key:"process",required:false,presortedKeys:["pid","title","argv"]},{key:"user",required:true,presortedKeys:["id","username","email"]},{key:"tags",required:true,presortedKeys:[]},{key:"custom",required:true,presortedKeys:[]}]},3107:function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _templateObject=_taggedTemplateLiteral(["\n  margin: 0 0 "," 0;\n  user-select: none;\n"],["\n  margin: 0 0 "," 0;\n  user-select: none;\n"]);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var variables_1=__webpack_require__(26);var Icons_1=__webpack_require__(1124);var Stackframe_1=__webpack_require__(1125);var LibraryFrameToggle=styled_components_1.default.div(_templateObject,variables_1.px(variables_1.units.plus));var LibraryStackFrames=function(_react_1$default$Comp){_inherits(LibraryStackFrames,_react_1$default$Comp);function LibraryStackFrames(){_classCallCheck(this,LibraryStackFrames);var _this=_possibleConstructorReturn(this,(LibraryStackFrames.__proto__||Object.getPrototypeOf(LibraryStackFrames)).apply(this,arguments));_this.state={isVisible:_this.props.initialVisiblity};_this.onClick=function(){_this.setState(function(_ref){var isVisible=_ref.isVisible;return{isVisible:!isVisible}})};return _this}_createClass(LibraryStackFrames,[{key:"render",value:function render(){var _props=this.props,stackframes=_props.stackframes,codeLanguage=_props.codeLanguage;var isVisible=this.state.isVisible;if(stackframes.length===0){return null}if(stackframes.length===1){return react_1.default.createElement(Stackframe_1.Stackframe,{isLibraryFrame:true,codeLanguage:codeLanguage,stackframe:stackframes[0]})}return react_1.default.createElement("div",null,react_1.default.createElement(LibraryFrameToggle,null,react_1.default.createElement(eui_1.EuiLink,{onClick:this.onClick},react_1.default.createElement(Icons_1.Ellipsis,{horizontal:isVisible,style:{marginRight:variables_1.units.half}})," ",stackframes.length," library frames")),react_1.default.createElement("div",null,isVisible&&stackframes.map(function(stackframe,i){return react_1.default.createElement(Stackframe_1.Stackframe,{key:i,isLibraryFrame:true,codeLanguage:codeLanguage,stackframe:stackframe})})))}}]);return LibraryStackFrames}(react_1.default.Component);exports.LibraryStackFrames=LibraryStackFrames},3108:function(module,exports,__webpack_require__){"use strict";var _templateObject=_taggedTemplateLiteral(["\n  color: ",";\n  padding: ",";\n  font-family: ",";\n"],["\n  color: ",";\n  padding: ",";\n  font-family: ",";\n"]),_templateObject2=_taggedTemplateLiteral(["\n  color: ",";\n"],["\n  color: ",";\n"]),_templateObject3=_taggedTemplateLiteral(["\n  font-weight: bold;\n  color: ",";\n"],["\n  font-weight: bold;\n  color: ",";\n"]);function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var lodash_1=__webpack_require__(1);var react_1=tslib_1.__importStar(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var variables_1=__webpack_require__(26);var FileDetails=styled_components_1.default.div(_templateObject,variables_1.colors.gray3,variables_1.px(variables_1.units.half),variables_1.fontFamilyCode);var LibraryFrameFileDetail=styled_components_1.default.span(_templateObject2,variables_1.colors.gray2);var AppFrameFileDetail=styled_components_1.default.span(_templateObject3,variables_1.colors.black);var FrameHeading=function FrameHeading(_ref){var stackframe=_ref.stackframe,isLibraryFrame=_ref.isLibraryFrame;var FileDetail=isLibraryFrame?LibraryFrameFileDetail:AppFrameFileDetail;var lineNumber=lodash_1.get(stackframe,"line.number");return react_1.default.createElement(FileDetails,null,react_1.default.createElement(FileDetail,null,stackframe.filename)," in"," ",react_1.default.createElement(FileDetail,null,stackframe.function),lineNumber>0&&react_1.default.createElement(react_1.Fragment,null," at ",react_1.default.createElement(FileDetail,null,"line ",stackframe.line.number)))};exports.FrameHeading=FrameHeading},3109:function(module,exports,__webpack_require__){"use strict";var _templateObject=_taggedTemplateLiteral(["\n  position: relative;\n  border-radius: 0 0 "," ",";\n"],["\n  position: relative;\n  border-radius: 0 0 "," ",";\n"]),_templateObject2=_taggedTemplateLiteral(["\n  position: absolute;\n  width: 100%;\n  height: ",";\n  top: ",";\n  pointer-events: none;\n  background-color: ",";\n"],["\n  position: absolute;\n  width: 100%;\n  height: ",";\n  top: ",";\n  pointer-events: none;\n  background-color: ",";\n"]),_templateObject3=_taggedTemplateLiteral(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  border-radius: 0 0 0 ",";\n  background: ",";\n"],["\n  position: absolute;\n  top: 0;\n  left: 0;\n  border-radius: 0 0 0 ",";\n  background: ",";\n"]),_templateObject4=_taggedTemplateLiteral(["\n  position: relative;\n  min-width: ",";\n  padding-left: ",";\n  padding-right: ",";\n  color: ",";\n  line-height: ",";\n  text-align: right;\n  border-right: 1px solid ",";\n  background-color: ",";\n\n  &:last-of-type {\n    border-radius: 0 0 0 ",";\n  }\n"],["\n  position: relative;\n  min-width: ",";\n  padding-left: ",";\n  padding-right: ",";\n  color: ",";\n  line-height: ",";\n  text-align: right;\n  border-right: 1px solid ",";\n  background-color: ",";\n\n  &:last-of-type {\n    border-radius: 0 0 0 ",";\n  }\n"]),_templateObject5=_taggedTemplateLiteral(["\n  overflow: auto;\n  margin: 0 0 0 ",";\n  padding: 0;\n  background-color: ",";\n\n  &:last-of-type {\n    border-radius: 0 0 "," 0;\n  }\n"],["\n  overflow: auto;\n  margin: 0 0 0 ",";\n  padding: 0;\n  background-color: ",";\n\n  &:last-of-type {\n    border-radius: 0 0 "," 0;\n  }\n"]),_templateObject6=_taggedTemplateLiteral(["\n  // Override all styles\n  margin: 0;\n  color: inherit;\n  background: inherit;\n  border: 0;\n  border-radius: 0;\n  overflow: initial;\n  padding: 0 ",";\n  line-height: ",";\n"],["\n  // Override all styles\n  margin: 0;\n  color: inherit;\n  background: inherit;\n  border: 0;\n  border-radius: 0;\n  overflow: initial;\n  padding: 0 ",";\n  line-height: ",";\n"]),_templateObject7=_taggedTemplateLiteral(["\n  position: relative;\n  padding: 0;\n  margin: 0;\n  white-space: pre;\n  z-index: 2;\n"],["\n  position: relative;\n  padding: 0;\n  margin: 0;\n  white-space: pre;\n  z-index: 2;\n"]);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var lodash_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var javascript_1=tslib_1.__importDefault(__webpack_require__(4687));var python_1=tslib_1.__importDefault(__webpack_require__(4699));var ruby_1=tslib_1.__importDefault(__webpack_require__(4757));var light_1=tslib_1.__importDefault(__webpack_require__(712));var light_2=__webpack_require__(712);var styles_1=__webpack_require__(1141);light_2.registerLanguage("javascript",javascript_1.default);light_2.registerLanguage("python",python_1.default);light_2.registerLanguage("ruby",ruby_1.default);var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var variables_1=__webpack_require__(26);var ContextContainer=styled_components_1.default.div(_templateObject,variables_1.borderRadius,variables_1.borderRadius);var LINE_HEIGHT=variables_1.units.eighth*9;var LineHighlight=styled_components_1.default.div(_templateObject2,variables_1.px(variables_1.units.eighth*9),function(props){return variables_1.px(props.lineNumber*LINE_HEIGHT)},variables_1.colors.yellow);var LineNumberContainer=styled_components_1.default.div(_templateObject3,variables_1.borderRadius,function(props){return props.isLibraryFrame?variables_1.colors.white:variables_1.colors.gray5});var LineNumber=styled_components_1.default.div(_templateObject4,variables_1.px(variables_1.units.eighth*21),variables_1.px(variables_1.units.half),variables_1.px(variables_1.units.quarter),variables_1.colors.gray3,variables_1.px(variables_1.unit+variables_1.units.eighth),variables_1.colors.gray4,function(props){return props.highlight?variables_1.colors.yellow:null},variables_1.borderRadius);var LineContainer=styled_components_1.default.div(_templateObject5,variables_1.px(variables_1.units.eighth*21),variables_1.colors.white,variables_1.borderRadius);var Line=styled_components_1.default.pre(_templateObject6,variables_1.px(LINE_HEIGHT),variables_1.px(LINE_HEIGHT));var Code=styled_components_1.default.code(_templateObject7);function getStackframeLines(stackframe){var line=stackframe.line.context;var preLines=lodash_1.get(stackframe,"context.pre",[]);var postLines=lodash_1.get(stackframe,"context.post",[]);return[].concat(_toConsumableArray(preLines),[line],_toConsumableArray(postLines))}function getStartLineNumber(stackframe){var preLines=lodash_1.size(lodash_1.get(stackframe,"context.pre",[]));return stackframe.line.number-preLines}function Context(_ref){var stackframe=_ref.stackframe,codeLanguage=_ref.codeLanguage,isLibraryFrame=_ref.isLibraryFrame;var lines=getStackframeLines(stackframe);var startLineNumber=getStartLineNumber(stackframe);var highlightedLineIndex=lodash_1.size(lodash_1.get(stackframe,"context.pre",[]));var language=codeLanguage||"javascript";return react_1.default.createElement(ContextContainer,null,react_1.default.createElement(LineHighlight,{lineNumber:highlightedLineIndex}),react_1.default.createElement(LineNumberContainer,{isLibraryFrame:isLibraryFrame},lines.map(function(line,i){return react_1.default.createElement(LineNumber,{key:line+i,highlight:highlightedLineIndex===i},i+startLineNumber,".")})),react_1.default.createElement(LineContainer,null,lines.map(function(line,i){return react_1.default.createElement(light_1.default,{key:line+i,language:language,style:styles_1.xcode,PreTag:Line,CodeTag:Code,customStyle:{padding:null,overflowX:null}},line||"\n")})))}exports.Context=Context},3113:function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _templateObject=_taggedTemplateLiteral(["\n  background: ",";\n  border-top: 1px solid ",";\n  border-radius: 0 0 "," ",";\n  padding: "," ",";\n  font-family: ",";\n"],["\n  background: ",";\n  border-top: 1px solid ",";\n  border-radius: 0 0 "," ",";\n  padding: "," ",";\n  font-family: ",";\n"]),_templateObject2=_taggedTemplateLiteral(["\n  display: block;\n  cursor: pointer;\n  user-select: none;\n"],["\n  display: block;\n  cursor: pointer;\n  user-select: none;\n"]),_templateObject3=_taggedTemplateLiteral(["\n  padding: "," "," 0;\n"],["\n  padding: "," "," 0;\n"]);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var variables_1=__webpack_require__(26);var Icons_1=__webpack_require__(1124);var PropertiesTable_1=__webpack_require__(494);var VariablesContainer=styled_components_1.default.div(_templateObject,variables_1.colors.white,variables_1.colors.gray4,variables_1.borderRadius,variables_1.borderRadius,variables_1.px(variables_1.units.half),variables_1.px(variables_1.unit),variables_1.fontFamily);var VariablesToggle=styled_components_1.default.a(_templateObject2);var VariablesTableContainer=styled_components_1.default.div(_templateObject3,variables_1.px(variables_1.units.plus),variables_1.px(variables_1.unit));var Variables=function(_react_1$default$Comp){_inherits(Variables,_react_1$default$Comp);function Variables(){_classCallCheck(this,Variables);var _this=_possibleConstructorReturn(this,(Variables.__proto__||Object.getPrototypeOf(Variables)).apply(this,arguments));_this.state={isVisible:false};_this.onClick=function(){_this.setState(function(){return{isVisible:!_this.state.isVisible}})};return _this}_createClass(Variables,[{key:"render",value:function render(){if(!this.props.vars){return null}return react_1.default.createElement(VariablesContainer,null,react_1.default.createElement(VariablesToggle,{onClick:this.onClick},react_1.default.createElement(Icons_1.Ellipsis,{horizontal:this.state.isVisible,style:{marginRight:variables_1.units.half}})," ","Local variables"),this.state.isVisible&&react_1.default.createElement(VariablesTableContainer,null,react_1.default.createElement(PropertiesTable_1.PropertiesTable,{propData:this.props.vars,propKey:"custom"})))}}]);return Variables}(react_1.default.Component);exports.Variables=Variables},3114:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SingleRect(_ref){var innerHeight=_ref.innerHeight,marginTop=_ref.marginTop,style=_ref.style,x=_ref.x,width=_ref.width;return _react2.default.createElement("rect",{style:style,height:innerHeight,width:width,rx:"2px",ry:"2px",x:x,y:marginTop})}SingleRect.requiresSVG=true;SingleRect.propTypes={x:_propTypes2.default.number.isRequired};exports.default=SingleRect;module.exports=exports["default"]},3115:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_redux_1=__webpack_require__(14);var urlParams_1=__webpack_require__(227);var view_1=__webpack_require__(3116);function mapStateToProps(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return{urlParams:urlParams_1.getUrlParams(state)}}var ServiceDetails=react_redux_1.connect(mapStateToProps)(view_1.ServiceDetailsView);exports.ServiceDetails=ServiceDetails},3116:function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var serviceDetails_1=__webpack_require__(1118);var KueryBar_1=__webpack_require__(492);var ServiceDetailTabs_1=__webpack_require__(3117);var ServiceIntegrations_1=__webpack_require__(3138);var ServiceDetailsView=function(_react_1$default$Comp){_inherits(ServiceDetailsView,_react_1$default$Comp);function ServiceDetailsView(){_classCallCheck(this,ServiceDetailsView);return _possibleConstructorReturn(this,(ServiceDetailsView.__proto__||Object.getPrototypeOf(ServiceDetailsView)).apply(this,arguments))}_createClass(ServiceDetailsView,[{key:"render",value:function render(){var _this2=this;var _props=this.props,urlParams=_props.urlParams,location=_props.location;return react_1.default.createElement(serviceDetails_1.ServiceDetailsRequest,{urlParams:urlParams,render:function render(_ref){var data=_ref.data;return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(eui_1.EuiFlexGroup,{justifyContent:"spaceBetween"},react_1.default.createElement(eui_1.EuiFlexItem,null,react_1.default.createElement(eui_1.EuiTitle,{size:"l"},react_1.default.createElement("h1",null,urlParams.serviceName))),react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(ServiceIntegrations_1.ServiceIntegrations,{location:_this2.props.location,urlParams:urlParams,serviceTransactionTypes:data.types}))),react_1.default.createElement(eui_1.EuiSpacer,null),react_1.default.createElement(KueryBar_1.KueryBar,null),react_1.default.createElement(ServiceDetailTabs_1.ServiceDetailTabs,{location:location,urlParams:urlParams,transactionTypes:data.types}))}})}}]);return ServiceDetailsView}(react_1.default.Component);exports.ServiceDetailsView=ServiceDetailsView},3117:function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var HistoryTabs_1=__webpack_require__(1130);var ErrorGroupOverview_1=__webpack_require__(3118);var TransactionOverview_1=__webpack_require__(3121);var ServiceMetrics_1=__webpack_require__(3133);var ServiceDetailTabs=function(_react_1$default$Comp){_inherits(ServiceDetailTabs,_react_1$default$Comp);function ServiceDetailTabs(){_classCallCheck(this,ServiceDetailTabs);return _possibleConstructorReturn(this,(ServiceDetailTabs.__proto__||Object.getPrototypeOf(ServiceDetailTabs)).apply(this,arguments))}_createClass(ServiceDetailTabs,[{key:"render",value:function render(){var _props=this.props,transactionTypes=_props.transactionTypes,urlParams=_props.urlParams,location=_props.location;var serviceName=urlParams.serviceName;var tabs=[{name:"Transactions",path:"/"+serviceName+"/transactions/"+transactionTypes[0],routePath:"/"+serviceName+"/transactions/:transactionType?",render:function render(){return react_1.default.createElement(TransactionOverview_1.TransactionOverview,{urlParams:urlParams,serviceTransactionTypes:transactionTypes})}},{name:"Errors",path:"/"+serviceName+"/errors",render:function render(){return react_1.default.createElement(ErrorGroupOverview_1.ErrorGroupOverview,{urlParams:urlParams,location:location})}},{name:"Metrics",path:"/"+serviceName+"/metrics",render:function render(){return react_1.default.createElement(ServiceMetrics_1.ServiceMetrics,{urlParams:urlParams})}}];return react_1.default.createElement(HistoryTabs_1.HistoryTabs,{tabs:tabs})}}]);return ServiceDetailTabs}(react_1.default.Component);exports.ServiceDetailTabs=ServiceDetailTabs},3118:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var errorGroupList_1=__webpack_require__(3119);var List_1=tslib_1.__importDefault(__webpack_require__(3120));var ErrorGroupOverview=function ErrorGroupOverview(_ref){var urlParams=_ref.urlParams,location=_ref.location;return react_1.default.createElement(errorGroupList_1.ErrorGroupOverviewRequest,{urlParams:urlParams,render:function render(_ref2){var data=_ref2.data;return react_1.default.createElement(List_1.default,{urlParams:urlParams,items:data,location:location})}})};exports.ErrorGroupOverview=ErrorGroupOverview},3119:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_redux_request_1=__webpack_require__(74);var error_groups_1=__webpack_require__(685);var helpers_1=__webpack_require__(226);var ID="errorGroupList";var INITIAL_DATA=[];var withInitialData=helpers_1.createInitialDataSelector(INITIAL_DATA);function getErrorGroupList(state){return withInitialData(state.reactReduxRequest[ID])}exports.getErrorGroupList=getErrorGroupList;function ErrorGroupOverviewRequest(_ref){var urlParams=_ref.urlParams,render=_ref.render;var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,sortField=urlParams.sortField,sortDirection=urlParams.sortDirection,kuery=urlParams.kuery;if(!(serviceName&&start&&end)){return null}return react_1.default.createElement(react_redux_request_1.Request,{id:ID,fn:error_groups_1.loadErrorGroupList,args:[{serviceName:serviceName,start:start,end:end,sortField:sortField,sortDirection:sortDirection,kuery:kuery}],selector:getErrorGroupList,render:render})}exports.ErrorGroupOverviewRequest=ErrorGroupOverviewRequest},3120:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _templateObject=_taggedTemplateLiteral(["\n  font-family: ",";\n"],["\n  font-family: ",";\n"]),_templateObject2=_taggedTemplateLiteral(["\n  ",";\n"],["\n  ",";\n"]),_templateObject3=_taggedTemplateLiteral(["\n  font-family: ",";\n  font-size: ",";\n  ",";\n"],["\n  font-family: ",";\n  font-size: ",";\n  ",";\n"]);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _numeral=__webpack_require__(212);var _numeral2=_interopRequireDefault(_numeral);var _moment=__webpack_require__(13);var _moment2=_interopRequireDefault(_moment);var _url=__webpack_require__(44);var _TooltipOverlay=__webpack_require__(691);var _TooltipOverlay2=_interopRequireDefault(_TooltipOverlay);var _styledComponents=__webpack_require__(18);var _styledComponents2=_interopRequireDefault(_styledComponents);var _variables=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function paginateItems(_ref){var items=_ref.items,pageIndex=_ref.pageIndex,pageSize=_ref.pageSize;return items.slice(pageIndex*pageSize,(pageIndex+1)*pageSize)}var GroupIdLink=(0,_styledComponents2.default)(_url.RelativeLink)(_templateObject,_variables.fontFamilyCode);var MessageAndCulpritCell=_styledComponents2.default.div(_templateObject2,(0,_variables.truncate)("100%"));var MessageLink=(0,_styledComponents2.default)(_url.RelativeLink)(_templateObject3,_variables.fontFamilyCode,_variables.fontSizes.large,(0,_variables.truncate)("100%"));var Culprit=_styledComponents2.default.div(_templateObject,_variables.fontFamilyCode);var List=function(_Component){_inherits(List,_Component);function List(){var _ref2;var _temp,_this,_ret;_classCallCheck(this,List);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref2=List.__proto__||Object.getPrototypeOf(List)).call.apply(_ref2,[this].concat(args))),_this),_this.state={page:{index:0,size:25}},_this.onTableChange=function(_ref3){var _ref3$page=_ref3.page,page=_ref3$page===undefined?{}:_ref3$page,_ref3$sort=_ref3.sort,sort=_ref3$sort===undefined?{}:_ref3$sort;_this.setState({page:page});var location=_this.props.location;_url.history.push(_extends({},location,{search:(0,_url.fromQuery)(_extends({},(0,_url.toQuery)(location.search),{sortField:sort.field,sortDirection:sort.direction}))}))},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(List,[{key:"render",value:function render(){var items=this.props.items;var _props$urlParams=this.props.urlParams,serviceName=_props$urlParams.serviceName,sortDirection=_props$urlParams.sortDirection,sortField=_props$urlParams.sortField;var paginatedItems=paginateItems({items:items,pageIndex:this.state.page.index,pageSize:this.state.page.size});var columns=[{name:"Group ID",field:"groupId",sortable:false,width:(0,_variables.px)(_variables.unit*6),render:function render(groupId){return _react2.default.createElement(GroupIdLink,{path:"/"+serviceName+"/errors/"+groupId},groupId.slice(0,5)||"N/A")}},{name:"Error message and culprit",field:"message",sortable:false,width:"50%",render:function render(message,item){return _react2.default.createElement(MessageAndCulpritCell,null,_react2.default.createElement(_TooltipOverlay2.default,{content:message||"N/A"},_react2.default.createElement(MessageLink,{path:"/"+serviceName+"/errors/"+item.groupId},message||"N/A")),_react2.default.createElement(_TooltipOverlay2.default,{content:item.culprit||"N/A"},_react2.default.createElement(Culprit,null,item.culprit||"N/A")))}},{name:"",field:"handled",sortable:false,align:"right",render:function render(isUnhandled){return isUnhandled===false&&_react2.default.createElement(_eui.EuiBadge,{color:"warning"},"Unhandled")}},{name:"Occurrences",field:"occurrenceCount",sortable:true,dataType:"number",render:function render(value){return value?(0,_numeral2.default)(value).format("0.[0]a"):"N/A"}},{field:"latestOccurrenceAt",sortable:true,name:"Latest occurrence",align:"right",render:function render(value){return value?(0,_moment2.default)(value).fromNow():"N/A"}}];return _react2.default.createElement(_eui.EuiBasicTable,{noItemsMessage:"No errors were found",items:paginatedItems,columns:columns,pagination:{pageIndex:this.state.page.index,pageSize:this.state.page.size,totalItemCount:this.props.items.length},sorting:{sort:{field:sortField||"latestOccurrenceAt",direction:sortDirection||"desc"}},onChange:this.onTableChange})}}]);return List}(_react.Component);List.propTypes={location:_propTypes2.default.object.isRequired};exports.default=List;module.exports=exports["default"]},3121:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_router_dom_1=__webpack_require__(37);var TransactionCharts_1=__webpack_require__(692);var transactionList_1=__webpack_require__(3131);var transactionOverviewCharts_1=__webpack_require__(693);var url_1=__webpack_require__(44);var List_1=tslib_1.__importDefault(__webpack_require__(3132));var TransactionOverviewView=function(_react_1$default$Comp){_inherits(TransactionOverviewView,_react_1$default$Comp);function TransactionOverviewView(){_classCallCheck(this,TransactionOverviewView);var _this=_possibleConstructorReturn(this,(TransactionOverviewView.__proto__||Object.getPrototypeOf(TransactionOverviewView)).apply(this,arguments));_this.handleTypeChange=function(event){var _this$props=_this.props,urlParams=_this$props.urlParams,history=_this$props.history,location=_this$props.location;var type=url_1.legacyEncodeURIComponent(event.target.value);history.push(_extends({},location,{pathname:"/"+urlParams.serviceName+"/transactions/"+type}))};return _this}_createClass(TransactionOverviewView,[{key:"render",value:function render(){var _props=this.props,urlParams=_props.urlParams,serviceTransactionTypes=_props.serviceTransactionTypes,location=_props.location;var serviceName=urlParams.serviceName,transactionType=urlParams.transactionType;if(!serviceName||!transactionType){return null}return react_1.default.createElement(react_1.default.Fragment,null,serviceTransactionTypes.length>1?react_1.default.createElement(eui_1.EuiFormRow,null,react_1.default.createElement(eui_1.EuiSelect,{options:serviceTransactionTypes.map(function(type){return{text:"Filter by type: "+type,value:type}}),value:transactionType,onChange:this.handleTypeChange})):null,react_1.default.createElement(transactionOverviewCharts_1.TransactionOverviewChartsRequest,{urlParams:urlParams,render:function render(_ref){var data=_ref.data;return react_1.default.createElement(TransactionCharts_1.TransactionCharts,{charts:data,location:location,urlParams:urlParams})}}),react_1.default.createElement(eui_1.EuiSpacer,{size:"l"}),react_1.default.createElement(transactionList_1.TransactionListRequest,{urlParams:urlParams,render:function render(_ref2){var data=_ref2.data;return react_1.default.createElement(List_1.default,{items:data,serviceName:serviceName})}}))}}]);return TransactionOverviewView}(react_1.default.Component);exports.TransactionOverviewView=TransactionOverviewView;exports.TransactionOverview=react_router_dom_1.withRouter(TransactionOverviewView)},3123:function(module,exports,__webpack_require__){"use strict";var loadLicense=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",callApi_1.callApi({pathname:"/api/xpack/v1/info"}));case 1:case"end":return _context.stop()}}},_callee,this)}));return function loadLicense(){return _ref.apply(this,arguments)}}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}Object.defineProperty(exports,"__esModule",{value:true});var callApi_1=__webpack_require__(225);exports.loadLicense=loadLicense},3124:function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _templateObject=_taggedTemplateLiteral(["\n  padding-right: 5px;\n  position: relative;\n  top: -1px;\n  display: inline-block;\n"],["\n  padding-right: 5px;\n  position: relative;\n  top: -1px;\n  display: inline-block;\n"]),_templateObject2=_taggedTemplateLiteral(["\n  position: relative;\n  top: 5px;\n"],["\n  position: relative;\n  top: 5px;\n"]);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var react_1=tslib_1.__importStar(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var url_1=__webpack_require__(44);var formatters_1=__webpack_require__(198);var CustomPlot_1=tslib_1.__importDefault(__webpack_require__(695));var SyncChartGroup_1=__webpack_require__(1133);var ShiftedIconWrapper=styled_components_1.default.span(_templateObject);var ShiftedEuiText=styled_components_1.default(eui_1.EuiText)(_templateObject2);var TransactionChartsView=function(_react_1$Component){_inherits(TransactionChartsView,_react_1$Component);function TransactionChartsView(){_classCallCheck(this,TransactionChartsView);var _this=_possibleConstructorReturn(this,(TransactionChartsView.__proto__||Object.getPrototypeOf(TransactionChartsView)).apply(this,arguments));_this.getResponseTimeTickFormatter=function(t){return _this.props.charts.noHits?"- ms":formatters_1.asMillis(t)};_this.getResponseTimeTooltipFormatter=function(p){return _this.props.charts.noHits||!p?"- ms":formatters_1.asMillis(p.y)};_this.getTPMFormatter=function(t){var _this$props=_this.props,urlParams=_this$props.urlParams,charts=_this$props.charts;var unit=formatters_1.tpmUnit(urlParams.transactionType);return charts.noHits||t===null?"- "+unit:formatters_1.asInteger(t)+" "+unit};_this.getTPMTooltipFormatter=function(p){return _this.getTPMFormatter(p.y)};return _this}_createClass(TransactionChartsView,[{key:"renderMLHeader",value:function renderMLHeader(){if(!this.props.mlAvailable||!this.props.hasMLJob){return null}var _props$urlParams=this.props.urlParams,serviceName=_props$urlParams.serviceName,transactionType=_props$urlParams.transactionType;if(!serviceName){return null}return react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(ShiftedEuiText,{size:"xs"},react_1.default.createElement(ShiftedIconWrapper,null,react_1.default.createElement(eui_1.EuiIconTip,{content:"The stream around the average duration shows the expected bounds. An annotation is shown for anomaly scores >= 75."})),react_1.default.createElement("span",null,"Machine learning: "),react_1.default.createElement(url_1.ViewMLJob,{serviceName:serviceName,transactionType:transactionType,location:this.props.location})))}},{key:"render",value:function render(){var _this2=this;var _props=this.props,charts=_props.charts,urlParams=_props.urlParams,_props$chartWrapper=_props.chartWrapper,ChartWrapper=_props$chartWrapper===undefined?react_1.default.Fragment:_props$chartWrapper;var noHits=charts.noHits,responseTimeSeries=charts.responseTimeSeries,tpmSeries=charts.tpmSeries;var transactionType=urlParams.transactionType;return react_1.default.createElement(SyncChartGroup_1.SyncChartGroup,{render:function render(hoverXHandlers){return react_1.default.createElement(eui_1.EuiFlexGrid,{columns:2},react_1.default.createElement(eui_1.EuiFlexItem,null,react_1.default.createElement(ChartWrapper,null,react_1.default.createElement(eui_1.EuiFlexGroup,{justifyContent:"spaceBetween"},react_1.default.createElement(eui_1.EuiFlexItem,null,react_1.default.createElement(eui_1.EuiTitle,{size:"s"},react_1.default.createElement("span",null,responseTimeLabel(transactionType)))),_this2.renderMLHeader()),react_1.default.createElement(CustomPlot_1.default,Object.assign({noHits:noHits,series:responseTimeSeries},hoverXHandlers,{tickFormatY:_this2.getResponseTimeTickFormatter,formatTooltipValue:_this2.getResponseTimeTooltipFormatter})))),react_1.default.createElement(eui_1.EuiFlexItem,{style:{flexShrink:1}},react_1.default.createElement(ChartWrapper,null,react_1.default.createElement(eui_1.EuiTitle,{size:"s"},react_1.default.createElement("span",null,tpmLabel(transactionType))),react_1.default.createElement(CustomPlot_1.default,Object.assign({noHits:noHits,series:tpmSeries},hoverXHandlers,{tickFormatY:_this2.getTPMFormatter,formatTooltipValue:_this2.getTPMTooltipFormatter,truncateLegends:true})))))}})}}]);return TransactionChartsView}(react_1.Component);exports.TransactionChartsView=TransactionChartsView;function tpmLabel(type){return type==="request"?"Requests per minute":"Transactions per minute"}function responseTimeLabel(type){switch(type){case"page-load":return"Page load times";case"route-change":return"Route change times";default:return"Transaction duration"}}},3125:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _templateObject=_taggedTemplateLiteral(["\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  flex-wrap: wrap;\n\n  /* add margin to all direct descendant divs */\n  & > div {\n    margin-top: ",";\n    margin-right: ",";\n    &:last-child {\n      margin-right: 0;\n    }\n  }\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  flex-wrap: wrap;\n\n  /* add margin to all direct descendant divs */\n  & > div {\n    margin-top: ",";\n    margin-right: ",";\n    &:last-child {\n      margin-right: 0;\n    }\n  }\n"]),_templateObject2=_taggedTemplateLiteral(["\n  white-space: nowrap;\n  color: ",";\n  display: flex;\n"],["\n  white-space: nowrap;\n  color: ",";\n  display: flex;\n"]),_templateObject3=_taggedTemplateLiteral(["\n  display: inline-block;\n  ",";\n"],["\n  display: inline-block;\n  ",";\n"]),_templateObject4=_taggedTemplateLiteral(["\n  margin-left: ",";\n  color: ",";\n  display: inline-block;\n"],["\n  margin-left: ",";\n  color: ",";\n  display: inline-block;\n"]),_templateObject5=_taggedTemplateLiteral(["\n  font-size: ",";\n  color: ",";\n"],["\n  font-size: ",";\n  color: ",";\n"]);exports.default=Legends;var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _styledComponents=__webpack_require__(18);var _styledComponents2=_interopRequireDefault(_styledComponents);var _Legend=__webpack_require__(496);var _Legend2=_interopRequireDefault(_Legend);var _variables=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var Container=_styledComponents2.default.div(_templateObject,(0,_variables.px)(_variables.units.half),(0,_variables.px)(_variables.unit));var LegendContent=_styledComponents2.default.span(_templateObject2,_variables.colors.gray3);var TruncatedLabel=_styledComponents2.default.span(_templateObject3,(0,_variables.truncate)((0,_variables.px)(_variables.units.half*10)));var SeriesValue=_styledComponents2.default.span(_templateObject4,(0,_variables.px)(_variables.units.quarter),_variables.colors.black);var MoreSeriesContainer=_styledComponents2.default.div(_templateObject5,_variables.fontSizes.small,_variables.colors.gray3);function MoreSeries(_ref){var hiddenSeriesCount=_ref.hiddenSeriesCount;if(hiddenSeriesCount<=0){return null}return _react2.default.createElement(MoreSeriesContainer,null,"(+",hiddenSeriesCount,")")}function Legends(_ref2){var clickLegend=_ref2.clickLegend,hiddenSeriesCount=_ref2.hiddenSeriesCount,noHits=_ref2.noHits,series=_ref2.series,seriesEnabledState=_ref2.seriesEnabledState,truncateLegends=_ref2.truncateLegends;if(noHits){return null}return _react2.default.createElement(Container,null,series.map(function(serie,i){if(serie.hideLegend){return null}var text=_react2.default.createElement(LegendContent,null,truncateLegends?_react2.default.createElement(TruncatedLabel,{title:serie.title},serie.title):serie.title,serie.legendValue&&_react2.default.createElement(SeriesValue,null,serie.legendValue));return _react2.default.createElement(_Legend2.default,{key:i,onClick:function onClick(){return clickLegend(i)},disabled:seriesEnabledState[i],text:text,color:serie.color})}),_react2.default.createElement(MoreSeries,{hiddenSeriesCount:hiddenSeriesCount}))}Legends.propTypes={clickLegend:_propTypes2.default.func.isRequired,hiddenSeriesCount:_propTypes2.default.number.isRequired,noHits:_propTypes2.default.bool.isRequired,series:_propTypes2.default.array.isRequired,seriesEnabledState:_propTypes2.default.array.isRequired,truncateLegends:_propTypes2.default.bool.isRequired};module.exports=exports["default"]},3126:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _reactVis=__webpack_require__(247);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _lodash=__webpack_require__(1);var _polished=__webpack_require__(234);var _StatusText=__webpack_require__(3127);var _StatusText2=_interopRequireDefault(_StatusText);var _plotUtils=__webpack_require__(497);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var X_TICK_TOTAL=7;var StaticPlot=function(_PureComponent){_inherits(StaticPlot,_PureComponent);function StaticPlot(){_classCallCheck(this,StaticPlot);return _possibleConstructorReturn(this,(StaticPlot.__proto__||Object.getPrototypeOf(StaticPlot)).apply(this,arguments))}_createClass(StaticPlot,[{key:"getVisSeries",value:function getVisSeries(series,plotValues){var _this2=this;return series.slice().reverse().map(function(serie){return _this2.getSerie(serie,plotValues)})}},{key:"getSerie",value:function getSerie(serie,plotValues){switch(serie.type){case"line":return _react2.default.createElement(_reactVis.LineSeries,{getNull:function getNull(d){return d.y!==null},key:serie.title,xType:"time",curve:"curveMonotoneX",data:serie.data,color:serie.color});case"area":return _react2.default.createElement(_reactVis.AreaSeries,{getNull:function getNull(d){return d.y!==null},key:serie.title,xType:"time",curve:"curveMonotoneX",data:serie.data,color:serie.color,stroke:serie.color,fill:serie.areaColor||(0,_polished.rgba)(serie.color,.3)});case"areaMaxHeight":var yMax=(0,_lodash.last)(plotValues.yTickValues);var data=serie.data.map(function(p){return{x0:p.x0,x:p.x,y0:0,y:yMax}});return _react2.default.createElement(_reactVis.VerticalRectSeries,{getNull:function getNull(d){return d.y!==null},key:serie.title,xType:"time",curve:"curveMonotoneX",data:data,color:serie.color,stroke:serie.color,fill:serie.areaColor});case"linemark":return _react2.default.createElement(_reactVis.LineMarkSeries,{getNull:function getNull(d){return d.y!==null},key:serie.title,xType:"time",curve:"curveMonotoneX",data:serie.data,color:serie.color,size:.5});default:throw new Error("Unknown type "+serie.type)}}},{key:"render",value:function render(){var _props=this.props,series=_props.series,tickFormatX=_props.tickFormatX,tickFormatY=_props.tickFormatY,plotValues=_props.plotValues,noHits=_props.noHits;var yTickValues=plotValues.yTickValues;return _react2.default.createElement(_plotUtils.SharedPlot,{plotValues:plotValues},_react2.default.createElement(_reactVis.HorizontalGridLines,{tickValues:yTickValues}),_react2.default.createElement(_reactVis.XAxis,{tickSize:0,tickTotal:X_TICK_TOTAL,tickFormat:tickFormatX}),_react2.default.createElement(_reactVis.YAxis,{tickSize:0,tickValues:yTickValues,tickFormat:tickFormatY,style:{line:{stroke:"none",fill:"none"}}}),noHits?_react2.default.createElement(_StatusText2.default,{marginLeft:30,text:"No data within this time range."}):this.getVisSeries(series,plotValues))}}]);return StaticPlot}(_react.PureComponent);exports.default=StaticPlot;StaticPlot.propTypes={noHits:_propTypes2.default.bool.isRequired,series:_propTypes2.default.array.isRequired,plotValues:_propTypes2.default.object.isRequired,tickFormatX:_propTypes2.default.func,tickFormatY:_propTypes2.default.func.isRequired};module.exports=exports["default"]},3127:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function StatusText(_ref){var marginLeft=_ref.marginLeft,marginRight=_ref.marginRight,marginTop=_ref.marginTop,marginBottom=_ref.marginBottom,text=_ref.text;var xTransform="calc(-50% + "+(marginLeft-marginRight)+"px)";var yTransform="calc(-50% + "+(marginTop-marginBottom)+"px - 15px)";return _react2.default.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate("+xTransform+","+yTransform+")"}},text)}StatusText.propTypes={text:_propTypes2.default.string};exports.default=StatusText;module.exports=exports["default"]},3128:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _plotUtils=__webpack_require__(497);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _SelectionMarker=__webpack_require__(3129);var _SelectionMarker2=_interopRequireDefault(_SelectionMarker);var _reactVis=__webpack_require__(247);var _Tooltip=__webpack_require__(1129);var _Tooltip2=_interopRequireDefault(_Tooltip);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function getPointByX(serie,x){return serie.data.find(function(point){return point.x===x})}var InteractivePlot=function(_PureComponent){_inherits(InteractivePlot,_PureComponent);function InteractivePlot(){var _ref;var _temp,_this,_ret;_classCallCheck(this,InteractivePlot);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=InteractivePlot.__proto__||Object.getPrototypeOf(InteractivePlot)).call.apply(_ref,[this].concat(args))),_this),_this.getMarkPoints=function(hoverX){return _this.props.series.filter(function(serie){return serie.data.some(function(point){return point.x===hoverX&&point.y!=null})}).map(function(serie){var _ref2=getPointByX(serie,hoverX)||{},x=_ref2.x,y=_ref2.y;return{x:x,y:y,color:serie.color}})},_this.getTooltipPoints=function(hoverX){return _this.props.series.filter(function(series){return!series.hideTooltipValue}).map(function(serie){var point=getPointByX(serie,hoverX)||{};return{color:serie.color,value:_this.props.formatTooltipValue(point),text:serie.titleShort||serie.title}})},_temp),_possibleConstructorReturn(_this,_ret)}_createClass(InteractivePlot,[{key:"render",value:function render(){var _props=this.props,plotValues=_props.plotValues,hoverX=_props.hoverX,series=_props.series,isDrawing=_props.isDrawing,selectionStart=_props.selectionStart,selectionEnd=_props.selectionEnd;if(_lodash2.default.isEmpty(series)){return null}var tooltipPoints=this.getTooltipPoints(hoverX);var markPoints=this.getMarkPoints(hoverX);var x=plotValues.x,yTickValues=plotValues.yTickValues;var yValueMiddle=yTickValues[1];return _react2.default.createElement(_plotUtils.SharedPlot,{plotValues:plotValues},hoverX&&_react2.default.createElement(_Tooltip2.default,{tooltipPoints:tooltipPoints,x:hoverX,y:yValueMiddle}),hoverX&&_react2.default.createElement(_reactVis.MarkSeries,{data:markPoints,colorType:"literal"}),hoverX&&_react2.default.createElement(_reactVis.VerticalGridLines,{tickValues:[hoverX]}),isDrawing&&selectionEnd!==null&&_react2.default.createElement(_SelectionMarker2.default,{start:x(selectionStart),end:x(selectionEnd)}))}}]);return InteractivePlot}(_react.PureComponent);InteractivePlot.propTypes={formatTooltipValue:_propTypes2.default.func.isRequired,hoverX:_propTypes2.default.number,isDrawing:_propTypes2.default.bool.isRequired,plotValues:_propTypes2.default.object.isRequired,selectionEnd:_propTypes2.default.number,selectionStart:_propTypes2.default.number,series:_propTypes2.default.array.isRequired};exports.default=InteractivePlot;module.exports=exports["default"]},3129:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function SelectionMarker(_ref){var innerHeight=_ref.innerHeight,marginTop=_ref.marginTop,start=_ref.start,end=_ref.end;var width=Math.abs(end-start);var x=start<end?start:end;return _react2.default.createElement("rect",{pointerEvents:"none",fill:"black",fillOpacity:"0.1",x:x,y:marginTop,width:width,height:innerHeight})}SelectionMarker.requiresSVG=true;SelectionMarker.propTypes={start:_propTypes2.default.number,end:_propTypes2.default.number};exports.default=SelectionMarker;module.exports=exports["default"]},3130:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _reactVis=__webpack_require__(247);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _plotUtils=__webpack_require__(497);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function getXValuesCombined(series){return _lodash2.default.union.apply(_lodash2.default,_toConsumableArray(series.map(function(serie){return serie.data.map(function(p){return p.x})}))).map(function(x){return{x:x}})}var VoronoiPlot=function(_PureComponent){_inherits(VoronoiPlot,_PureComponent);function VoronoiPlot(){_classCallCheck(this,VoronoiPlot);return _possibleConstructorReturn(this,(VoronoiPlot.__proto__||Object.getPrototypeOf(VoronoiPlot)).apply(this,arguments))}_createClass(VoronoiPlot,[{key:"render",value:function render(){var _props=this.props,series=_props.series,plotValues=_props.plotValues,noHits=_props.noHits;var XY_MARGIN=plotValues.XY_MARGIN,XY_HEIGHT=plotValues.XY_HEIGHT,XY_WIDTH=plotValues.XY_WIDTH,_x=plotValues.x;var xValuesCombined=getXValuesCombined(series);if(!xValuesCombined||noHits){return null}return _react2.default.createElement(_plotUtils.SharedPlot,{plotValues:plotValues,onMouseLeave:this.props.onMouseLeave},_react2.default.createElement(_reactVis.Voronoi,{extent:[[XY_MARGIN.left,XY_MARGIN.top],[XY_WIDTH,XY_HEIGHT]],nodes:xValuesCombined,onHover:this.props.onHover,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,x:function x(d){return _x(d.x)},y:function y(){return 0}}))}}]);return VoronoiPlot}(_react.PureComponent);exports.default=VoronoiPlot;VoronoiPlot.propTypes={noHits:_propTypes2.default.bool.isRequired,onHover:_propTypes2.default.func.isRequired,onMouseDown:_propTypes2.default.func.isRequired,onMouseLeave:_propTypes2.default.func.isRequired,onMouseUp:_propTypes2.default.func.isRequired,series:_propTypes2.default.array.isRequired,plotValues:_propTypes2.default.object.isRequired};module.exports=exports["default"]},3131:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_redux_request_1=__webpack_require__(74);var reselect_1=__webpack_require__(27);var transaction_groups_1=__webpack_require__(493);var helpers_1=__webpack_require__(226);var ID="transactionList";var INITIAL_DATA=[];var withInitialData=helpers_1.createInitialDataSelector(INITIAL_DATA);var getRelativeImpact=function getRelativeImpact(impact,impactMin,impactMax){return Math.max((impact-impactMin)/Math.max(impactMax-impactMin,1)*100,1)};function getWithRelativeImpact(items){var impacts=items.map(function(_ref){var impact=_ref.impact;return impact});var impactMin=Math.min.apply(Math,_toConsumableArray(impacts));var impactMax=Math.max.apply(Math,_toConsumableArray(impacts));return items.map(function(item){return _extends({},item,{impactRelative:getRelativeImpact(item.impact,impactMin,impactMax)})})}exports.getTransactionList=reselect_1.createSelector(function(state){return withInitialData(state.reactReduxRequest[ID])},function(transactionList){return _extends({},transactionList,{data:getWithRelativeImpact(transactionList.data)})});function TransactionListRequest(_ref2){var urlParams=_ref2.urlParams,render=_ref2.render;var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,transactionType=urlParams.transactionType,kuery=urlParams.kuery;if(!(serviceName&&start&&end)){return null}return react_1.default.createElement(react_redux_request_1.Request,{id:ID,fn:transaction_groups_1.loadTransactionList,args:[{serviceName:serviceName,start:start,end:end,transactionType:transactionType,kuery:kuery}],selector:exports.getTransactionList,render:render})}exports.TransactionListRequest=TransactionListRequest},3132:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _templateObject=_taggedTemplateLiteral(["\n  ",";\n  font-family: ",";\n"],["\n  ",";\n  font-family: ",";\n"]);exports.default=TransactionList;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _styledComponents=__webpack_require__(18);var _styledComponents2=_interopRequireDefault(_styledComponents);var _TooltipOverlay=__webpack_require__(691);var _TooltipOverlay2=_interopRequireDefault(_TooltipOverlay);var _url=__webpack_require__(44);var _formatters=__webpack_require__(198);var _ImpactBar=__webpack_require__(1134);var _variables=__webpack_require__(26);var _ManagedTable=__webpack_require__(696);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var TransactionNameLink=(0,_styledComponents2.default)(_url.RelativeLink)(_templateObject,(0,_variables.truncate)("100%"),_variables.fontFamilyCode);function TransactionList(_ref){var items=_ref.items,serviceName=_ref.serviceName,rest=_objectWithoutProperties(_ref,["items","serviceName"]);var columns=[{field:"name",name:"Name",width:"50%",sortable:true,render:function render(transactionName,data){var encodedType=(0,_url.legacyEncodeURIComponent)(data.sample.transaction.type);var encodedName=(0,_url.legacyEncodeURIComponent)(transactionName);var transactionPath="/"+serviceName+"/transactions/"+encodedType+"/"+encodedName;return _react2.default.createElement(_TooltipOverlay2.default,{content:transactionName||"N/A"},_react2.default.createElement(TransactionNameLink,{path:transactionPath},transactionName||"N/A"))}},{field:"averageResponseTime",name:"Avg. duration",sortable:true,dataType:"number",render:function render(value){return(0,_formatters.asMillis)(value)}},{field:"p95",name:"95th percentile",sortable:true,dataType:"number",render:function render(value){return(0,_formatters.asMillis)(value)}},{field:"transactionsPerMinute",name:"Trans. per minute",sortable:true,dataType:"number",render:function render(value){return(0,_formatters.asDecimal)(value)+" tpm"}},{field:"impact",name:"Impact",sortable:true,dataType:"number",render:function render(value){return _react2.default.createElement(_ImpactBar.ImpactBar,{value:value})}}];return _react2.default.createElement(_ManagedTable.ManagedTable,_extends({columns:columns,items:items,initialSort:{field:"impact",direction:"desc"},initialPageSize:25},rest))}module.exports=exports["default"]},3133:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var Distribution_1=tslib_1.__importDefault(__webpack_require__(1127));var SyncChartGroup_1=__webpack_require__(1133);var TransactionCharts_1=__webpack_require__(692);var errorDistribution_1=__webpack_require__(1116);var serviceMetricsCharts_1=__webpack_require__(3134);var transactionOverviewCharts_1=__webpack_require__(693);var CPUUsageChart_1=__webpack_require__(3136);var MemoryUsageChart_1=__webpack_require__(3137);exports.ServiceMetrics=function(_ref){var urlParams=_ref.urlParams;return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(transactionOverviewCharts_1.TransactionOverviewChartsRequestForAllTypes,{urlParams:urlParams,render:function render(_ref2){var data=_ref2.data;return react_1.default.createElement(TransactionCharts_1.TransactionCharts,{charts:data,urlParams:urlParams,location:location})}}),react_1.default.createElement(eui_1.EuiSpacer,{size:"xxl"}),react_1.default.createElement(eui_1.EuiFlexGroup,null,react_1.default.createElement(eui_1.EuiFlexItem,null,react_1.default.createElement(errorDistribution_1.ErrorDistributionRequest,{urlParams:urlParams,render:function render(_ref3){var data=_ref3.data;return react_1.default.createElement(Distribution_1.default,{distribution:data,title:react_1.default.createElement(eui_1.EuiTitle,{size:"s"},react_1.default.createElement("span",null,"Error occurrences"))})}}))),react_1.default.createElement(eui_1.EuiSpacer,{size:"xxl"}),react_1.default.createElement(serviceMetricsCharts_1.MetricsChartDataRequest,{urlParams:urlParams,render:function render(_ref4){var data=_ref4.data;return react_1.default.createElement(SyncChartGroup_1.SyncChartGroup,{render:function render(hoverXHandlers){return react_1.default.createElement(eui_1.EuiFlexGrid,{columns:2},react_1.default.createElement(eui_1.EuiFlexItem,null,react_1.default.createElement(CPUUsageChart_1.CPUUsageChart,{data:data.cpu,hoverXHandlers:hoverXHandlers})),react_1.default.createElement(eui_1.EuiFlexItem,null,react_1.default.createElement(MemoryUsageChart_1.MemoryUsageChart,{data:data.memory,hoverXHandlers:hoverXHandlers})))}})}}),react_1.default.createElement(eui_1.EuiSpacer,{size:"xxl"}))}},3134:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_redux_request_1=__webpack_require__(74);var reselect_1=__webpack_require__(27);var metrics_1=__webpack_require__(3135);var chartSelectors_1=__webpack_require__(694);var urlParams_1=__webpack_require__(227);var helpers_1=__webpack_require__(226);var ID="metricsChartData";var INITIAL_DATA={memory:{series:{averagePercentMemoryUsed:[],maximumPercentMemoryUsed:[]},overallValues:{averagePercentMemoryUsed:null,maximumPercentMemoryUsed:null},totalHits:0},cpu:{series:{systemCPUAverage:[],systemCPUMax:[],processCPUAverage:[],processCPUMax:[]},overallValues:{systemCPUAverage:null,systemCPUMax:null,processCPUAverage:null,processCPUMax:null},totalHits:0}};var withInitialData=helpers_1.createInitialDataSelector(INITIAL_DATA);var selectMetricsChartData=function selectMetricsChartData(state){return withInitialData(state.reactReduxRequest[ID])};exports.selectTransformedMetricsChartData=reselect_1.createSelector([urlParams_1.getUrlParams,selectMetricsChartData],function(urlParams,response){return _extends({},response,{data:_extends({},response.data,{memory:chartSelectors_1.getMemorySeries(urlParams,response.data.memory),cpu:chartSelectors_1.getCPUSeries(response.data.cpu)})})});function MetricsChartDataRequest(_ref){var urlParams=_ref.urlParams,render=_ref.render;var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end;if(!(serviceName&&start&&end)){return null}return react_1.default.createElement(react_redux_request_1.Request,{id:ID,fn:metrics_1.loadMetricsChartDataForService,args:[urlParams],selector:exports.selectTransformedMetricsChartData,render:render})}exports.MetricsChartDataRequest=MetricsChartDataRequest},3135:function(module,exports,__webpack_require__){"use strict";var loadMetricsChartDataForService=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var serviceName=_ref.serviceName,start=_ref.start,end=_ref.end,kuery=_ref.kuery;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=callApi_1;_context.t1="/api/apm/services/"+serviceName+"/metrics/charts";_context.t2=start;_context.t3=end;_context.next=6;return apm_1.getEncodedEsQuery(kuery);case 6:_context.t4=_context.sent;_context.t5={start:_context.t2,end:_context.t3,esFilterQuery:_context.t4};_context.t6={pathname:_context.t1,query:_context.t5};return _context.abrupt("return",_context.t0.callApi.call(_context.t0,_context.t6));case 10:case"end":return _context.stop()}}},_callee,this)}));return function loadMetricsChartDataForService(_x){return _ref2.apply(this,arguments)}}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}Object.defineProperty(exports,"__esModule",{value:true});var callApi_1=__webpack_require__(225);var apm_1=__webpack_require__(348);exports.loadMetricsChartDataForService=loadMetricsChartDataForService},3136:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var CustomPlot_1=tslib_1.__importDefault(__webpack_require__(695));var formatters_1=__webpack_require__(198);function CPUUsageChart(_ref){var data=_ref.data,hoverXHandlers=_ref.hoverXHandlers;return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(eui_1.EuiTitle,{size:"s"},react_1.default.createElement("span",null,"CPU usage")),react_1.default.createElement(CustomPlot_1.default,Object.assign({},hoverXHandlers,{noHits:data.totalHits===0,series:data.series,tickFormatY:function tickFormatY(y){return(y||0)*100+"%"},formatTooltipValue:function formatTooltipValue(c){return formatters_1.asPercent(c.y||0,1)},yMax:1})))}exports.CPUUsageChart=CPUUsageChart},3137:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var CustomPlot_1=tslib_1.__importDefault(__webpack_require__(695));var formatters_1=__webpack_require__(198);function MemoryUsageChart(_ref){var data=_ref.data,hoverXHandlers=_ref.hoverXHandlers;return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(eui_1.EuiTitle,{size:"s"},react_1.default.createElement("span",null,"Memory usage")),react_1.default.createElement(CustomPlot_1.default,Object.assign({},hoverXHandlers,{noHits:data.totalHits===0,series:data.series,tickFormatY:function tickFormatY(y){return(y||0)*100+"%"},formatTooltipValue:function formatTooltipValue(c){return formatters_1.asPercent(c.y||0,1)},yMax:1})))}exports.MemoryUsageChart=MemoryUsageChart},3138:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_redux_1=__webpack_require__(14);var license_1=__webpack_require__(1131);var view_1=__webpack_require__(3139);function mapStateToProps(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return{mlAvailable:license_1.selectIsMLAvailable(state)}}var ServiceIntegrations=react_redux_1.connect(mapStateToProps)(view_1.ServiceIntegrationsView);exports.ServiceIntegrations=ServiceIntegrations},3139:function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var chrome_1=tslib_1.__importDefault(__webpack_require__(8));var MachineLearningFlyout_1=__webpack_require__(3140);var WatcherFlyout_1=__webpack_require__(3143);var ServiceIntegrationsView=function(_react_1$default$Comp){_inherits(ServiceIntegrationsView,_react_1$default$Comp);function ServiceIntegrationsView(){_classCallCheck(this,ServiceIntegrationsView);var _this=_possibleConstructorReturn(this,(ServiceIntegrationsView.__proto__||Object.getPrototypeOf(ServiceIntegrationsView)).apply(this,arguments));_this.state={isPopoverOpen:false,activeFlyout:null};_this.getPanelItems=_.memoize(function(mlAvailable){var panelItems=[];if(mlAvailable){panelItems=panelItems.concat(_this.getMLPanelItems())}return panelItems.concat(_this.getWatcherPanelItems())});_this.getMLPanelItems=function(){return[{name:"Enable ML anomaly detection",icon:"machineLearningApp",toolTipContent:"Set up a machine learning job for this service",onClick:function onClick(){_this.closePopover();_this.openFlyout("ML")}},{name:"View existing ML jobs",icon:"machineLearningApp",href:chrome_1.default.addBasePath("/app/ml"),target:"_blank",onClick:function onClick(){return _this.closePopover()}}]};_this.getWatcherPanelItems=function(){return[{name:"Enable watcher error reports",icon:"watchesApp",onClick:function onClick(){_this.closePopover();_this.openFlyout("Watcher")}},{name:"View existing watches",icon:"watchesApp",href:chrome_1.default.addBasePath("/app/kibana#/management/elasticsearch/watcher"),target:"_blank",onClick:function onClick(){return _this.closePopover()}}]};_this.openPopover=function(){return _this.setState({isPopoverOpen:true})};_this.closePopover=function(){return _this.setState({isPopoverOpen:false})};_this.openFlyout=function(name){return _this.setState({activeFlyout:name})};_this.closeFlyouts=function(){return _this.setState({activeFlyout:null})};return _this}_createClass(ServiceIntegrationsView,[{key:"render",value:function render(){var button=react_1.default.createElement(eui_1.EuiButton,{iconType:"arrowDown",iconSide:"right",onClick:this.openPopover},"Integrations");return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(eui_1.EuiPopover,{id:"integrations-menu",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downRight"},react_1.default.createElement(eui_1.EuiContextMenu,{initialPanelId:0,panels:[{id:0,items:this.getPanelItems(this.props.mlAvailable)}]})),react_1.default.createElement(MachineLearningFlyout_1.MachineLearningFlyout,{location:this.props.location,isOpen:this.state.activeFlyout==="ML",onClose:this.closeFlyouts,urlParams:this.props.urlParams,serviceTransactionTypes:this.props.serviceTransactionTypes}),react_1.default.createElement(WatcherFlyout_1.WatcherFlyout,{location:this.props.location,isOpen:this.state.activeFlyout==="Watcher",onClose:this.closeFlyouts,urlParams:this.props.urlParams}))}}]);return ServiceIntegrationsView}(react_1.default.Component);exports.ServiceIntegrationsView=ServiceIntegrationsView},3140:function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var react_1=tslib_1.__importStar(__webpack_require__(0));var notify_1=__webpack_require__(10);var ml_1=__webpack_require__(1135);var savedObjects_1=__webpack_require__(686);var machineLearningJobs_1=__webpack_require__(3141);var url_1=__webpack_require__(44);var TransactionSelect_1=__webpack_require__(3142);var MachineLearningFlyout=function(_react_1$Component){_inherits(MachineLearningFlyout,_react_1$Component);function MachineLearningFlyout(){var _this2=this;_classCallCheck(this,MachineLearningFlyout);var _this=_possibleConstructorReturn(this,(MachineLearningFlyout.__proto__||Object.getPrototypeOf(MachineLearningFlyout)).apply(this,arguments));_this.state={isLoading:false,hasIndexPattern:false,hasMLJob:false,selectedTransactionType:_this.props.urlParams.transactionType};_this.createJob=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this$props$urlParams,serviceName,transactionType,res,didSucceed;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({isLoading:true});_context.prev=1;_this$props$urlParams=_this.props.urlParams,serviceName=_this$props$urlParams.serviceName,transactionType=_this$props$urlParams.transactionType;if(!serviceName){_context.next=11;break}_context.next=6;return ml_1.startMLJob({serviceName:serviceName,transactionType:transactionType});case 6:res=_context.sent;didSucceed=res.datafeeds[0].success&&res.jobs[0].success;if(didSucceed){_context.next=10;break}throw new Error("Creating ML job failed");case 10:_this.addSuccessToast();case 11:_context.next=16;break;case 13:_context.prev=13;_context.t0=_context["catch"](1);_this.addErrorToast();case 16:_this.setState({isLoading:false});_this.props.onClose();case 18:case"end":return _context.stop()}}},_callee,_this2,[[1,13]])}));_this.addErrorToast=function(){var urlParams=_this.props.urlParams;var _urlParams$serviceNam=urlParams.serviceName,serviceName=_urlParams$serviceNam===undefined?"unknown":_urlParams$serviceNam;if(!serviceName){return}notify_1.toastNotifications.addWarning({title:"Job creation failed",text:react_1.default.createElement("p",null,"Your current license may not allow for creating machine learning jobs, or this job may already exist.")})};_this.addSuccessToast=function(){var _this$props=_this.props,location=_this$props.location,urlParams=_this$props.urlParams;var _urlParams$serviceNam2=urlParams.serviceName,serviceName=_urlParams$serviceNam2===undefined?"unknown":_urlParams$serviceNam2,transactionType=urlParams.transactionType;notify_1.toastNotifications.addSuccess({title:"Job successfully created",text:react_1.default.createElement("p",null,"The analysis is now running for ",serviceName," (",transactionType,"). It might take a while before results are added to the response times graph."," ",react_1.default.createElement(url_1.ViewMLJob,{serviceName:serviceName,transactionType:transactionType,location:location},"View job"))})};return _this}_createClass(MachineLearningFlyout,[{key:"componentDidMount",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var indexPattern;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return savedObjects_1.getAPMIndexPattern();case 2:indexPattern=_context2.sent;this.setState({hasIndexPattern:!!indexPattern});case 4:case"end":return _context2.stop()}}},_callee2,this)}));function componentDidMount(){return _ref2.apply(this,arguments)}return componentDidMount}()},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(prevProps.urlParams.transactionType!==this.props.urlParams.transactionType){this.setState({selectedTransactionType:this.props.urlParams.transactionType})}}},{key:"render",value:function render(){var _this3=this;var _props=this.props,isOpen=_props.isOpen,onClose=_props.onClose,urlParams=_props.urlParams;var serviceName=urlParams.serviceName,transactionType=urlParams.transactionType;var _state=this.state,isLoading=_state.isLoading,hasIndexPattern=_state.hasIndexPattern,selectedTransactionType=_state.selectedTransactionType;if(!isOpen||!serviceName){return null}return react_1.default.createElement(machineLearningJobs_1.MLJobsRequest,{serviceName:serviceName,render:function render(_ref3){var data=_ref3.data,status=_ref3.status;if(status==="LOADING"){return null}var hasMLJob=data.jobs.some(function(job){return job.jobId&&job.jobId.startsWith(ml_1.getMlPrefix(serviceName,selectedTransactionType))});return react_1.default.createElement(eui_1.EuiFlyout,{onClose:onClose,size:"s"},react_1.default.createElement(eui_1.EuiFlyoutHeader,null,react_1.default.createElement(eui_1.EuiTitle,null,react_1.default.createElement("h2",null,"Enable anomaly detection")),react_1.default.createElement(eui_1.EuiSpacer,{size:"s"})),react_1.default.createElement(eui_1.EuiFlyoutBody,null,hasMLJob&&react_1.default.createElement("div",null,react_1.default.createElement(eui_1.EuiCallOut,{title:"Job already exists",color:"success",iconType:"check"},react_1.default.createElement("p",null,"There is currently a job running for ",serviceName," (",transactionType,")."," ",react_1.default.createElement(url_1.ViewMLJob,{serviceName:serviceName,transactionType:transactionType,location:location},"View existing job"))),react_1.default.createElement(eui_1.EuiSpacer,{size:"m"})),!hasIndexPattern&&react_1.default.createElement("div",null,react_1.default.createElement(eui_1.EuiCallOut,{title:react_1.default.createElement("span",null,"No APM index pattern available. To create a job, please import the APM index pattern via the"," ",react_1.default.createElement(url_1.KibanaLink,{pathname:"/app/kibana",hash:"/home/tutorial/apm"},"Setup Instructions")),color:"warning",iconType:"alert"}),react_1.default.createElement(eui_1.EuiSpacer,{size:"m"})),react_1.default.createElement(eui_1.EuiText,null,react_1.default.createElement("p",null,"Here you can create a machine learning job to calculate anomaly scores on durations for APM transactions within the"," ",serviceName," service. Once enabled,"," ",react_1.default.createElement("b",null,"the transaction duration graph")," will show the expected bounds and annotate the graph once the anomaly score is >=75."),react_1.default.createElement("p",null,"Jobs can be created for each service + transaction type combination. Once a job is created, you can manage it and see more details in the"," ",react_1.default.createElement(url_1.KibanaLink,{pathname:"/app/ml"},"Machine Learning jobs management page"),"."," ",react_1.default.createElement("em",null,"Note: It might take a few minutes for the job to begin calculating results."))),react_1.default.createElement(eui_1.EuiSpacer,null)),react_1.default.createElement(eui_1.EuiFlyoutFooter,null,react_1.default.createElement(eui_1.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexEnd"},react_1.default.createElement(eui_1.EuiFlexItem,null,_this3.props.serviceTransactionTypes.length>1?react_1.default.createElement(TransactionSelect_1.TransactionSelect,{types:_this3.props.serviceTransactionTypes,selected:_this3.state.selectedTransactionType,existingJobs:data.jobs,onChange:function onChange(value){return _this3.setState({selectedTransactionType:value})}}):null),react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(eui_1.EuiFormRow,null,react_1.default.createElement(eui_1.EuiButton,{onClick:_this3.createJob,fill:true,disabled:isLoading||hasMLJob||!hasIndexPattern},"Create new job"))))))}})}}]);return MachineLearningFlyout}(react_1.Component);exports.MachineLearningFlyout=MachineLearningFlyout},3141:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_redux_request_1=__webpack_require__(74);var ml_1=__webpack_require__(1135);var helpers_1=__webpack_require__(226);var INITIAL_DATA={count:0,jobs:[]};var withInitialData=helpers_1.createInitialDataSelector(INITIAL_DATA);var ID="MLJobs";function selectMlJobs(state){return withInitialData(state.reactReduxRequest[ID])}function MLJobsRequest(_ref){var serviceName=_ref.serviceName,_ref$transactionType=_ref.transactionType,transactionType=_ref$transactionType===undefined?"*":_ref$transactionType,render=_ref.render;return react_1.default.createElement(react_redux_request_1.Request,{id:ID,fn:ml_1.getMLJob,args:[{serviceName:serviceName,transactionType:transactionType}],render:render,selector:selectMlJobs})}exports.MLJobsRequest=MLJobsRequest},3142:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));exports.TransactionSelect=function(_ref){var existingJobs=_ref.existingJobs,types=_ref.types,selected=_ref.selected,onChange=_ref.onChange;return react_1.default.createElement(eui_1.EuiFormRow,{label:"Select a transaction type for this job"},react_1.default.createElement(eui_1.EuiSuperSelect,{valueOfSelected:selected,onChange:onChange,options:types.map(function(type,i){return{value:type,inputDisplay:type,dropdownDisplay:react_1.default.createElement(eui_1.EuiFlexGroup,{justifyContent:"spaceBetween"},react_1.default.createElement(eui_1.EuiFlexItem,null,react_1.default.createElement(eui_1.EuiText,null,type)),react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},Boolean(existingJobs.find(function(job){return job.jobId&&job.jobId.includes(type)}))?react_1.default.createElement(eui_1.EuiToolTip,{content:"ML job exists for this type"},react_1.default.createElement(eui_1.EuiIcon,{type:"machineLearningApp"})):react_1.default.createElement(eui_1.EuiIcon,{type:"empty"})))}})}))}},3143:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _templateObject=_taggedTemplateLiteral(["\n  .euiFormRow {\n    max-width: 85px;\n  }\n  .euiFormHelpText {\n    width: 200px;\n  }\n"],["\n  .euiFormRow {\n    max-width: 85px;\n  }\n  .euiFormHelpText {\n    width: 200px;\n  }\n"]);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var lodash_1=tslib_1.__importDefault(__webpack_require__(1));var moment_timezone_1=tslib_1.__importDefault(__webpack_require__(191));var react_1=tslib_1.__importStar(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var chrome_1=tslib_1.__importDefault(__webpack_require__(8));var notify_1=__webpack_require__(10);var xpack_1=__webpack_require__(3144);var url_1=__webpack_require__(44);var createErrorGroupWatch_1=__webpack_require__(3145);var getUserTimezone=lodash_1.default.memoize(function(){var uiSettings=chrome_1.default.getUiSettingsClient();return uiSettings.get("dateFormat:tz")==="Browser"?moment_timezone_1.default.tz.guess():uiSettings.get("dateFormat:tz")});var SmallInput=styled_components_1.default.div(_templateObject);var WatcherFlyout=function(_react_1$Component){_inherits(WatcherFlyout,_react_1$Component);function WatcherFlyout(){_classCallCheck(this,WatcherFlyout);var _this=_possibleConstructorReturn(this,(WatcherFlyout.__proto__||Object.getPrototypeOf(WatcherFlyout)).apply(this,arguments));_this.state={schedule:"daily",threshold:10,actions:{slack:false,email:false},interval:{value:10,unit:"m"},daily:"08:00",emails:"",slackUrl:""};_this.onChangeSchedule=function(schedule){_this.setState({schedule:schedule})};_this.onChangeThreshold=function(event){_this.setState({threshold:parseInt(event.target.value,10)})};_this.onChangeDailyUnit=function(event){_this.setState({daily:event.target.value})};_this.onChangeIntervalValue=function(event){_this.setState({interval:{value:parseInt(event.target.value,10),unit:_this.state.interval.unit}})};_this.onChangeIntervalUnit=function(event){_this.setState({interval:{value:_this.state.interval.value,unit:event.target.value}})};_this.onChangeAction=function(actionName){_this.setState({actions:_extends({},_this.state.actions,_defineProperty({},actionName,!_this.state.actions[actionName]))})};_this.onChangeEmails=function(event){_this.setState({emails:event.target.value})};_this.onChangeSlackUrl=function(event){_this.setState({slackUrl:event.target.value})};_this.createWatch=function(){var serviceName=_this.props.urlParams.serviceName;if(!serviceName){return}var emails=_this.state.actions.email?_this.state.emails.split(",").map(function(email){return email.trim()}).filter(function(email){return!!email}):[];var slackUrl=_this.state.actions.slack?_this.state.slackUrl:"";var schedule=_this.state.schedule==="interval"?{interval:""+_this.state.interval.value+_this.state.interval.unit}:{daily:{at:""+_this.state.daily}};var timeRange=_this.state.schedule==="interval"?{value:_this.state.interval.value,unit:_this.state.interval.unit}:{value:24,unit:"h"};return createErrorGroupWatch_1.createErrorGroupWatch({emails:emails,schedule:schedule,serviceName:serviceName,slackUrl:slackUrl,threshold:_this.state.threshold,timeRange:timeRange}).then(function(id){_this.props.onClose();_this.addSuccessToast(id)}).catch(function(e){console.error(e);_this.addErrorToast()})};_this.addErrorToast=function(){notify_1.toastNotifications.addWarning({title:"Watch creation failed",text:react_1.default.createElement("p",null,"Make sure your user has permission to create watches.")})};_this.addSuccessToast=function(id){notify_1.toastNotifications.addSuccess({title:"New watch created!",text:react_1.default.createElement("p",null,"The watch is now ready and will send error reports for"," ",_this.props.urlParams.serviceName,"."," ",react_1.default.createElement(url_1.UnconnectedKibanaLink,{location:_this.props.location,pathname:"/app/kibana",hash:"/management/elasticsearch/watcher/watches/watch/"+id},"View watch."))})};return _this}_createClass(WatcherFlyout,[{key:"render",value:function render(){var _this2=this;if(!this.props.isOpen){return null}var userTimezoneSetting=getUserTimezone();var dailyTime=this.state.daily;var inputTime=dailyTime+"Z";var inputFormat="HH:mmZ";var dailyTimeFormatted=moment_timezone_1.default(inputTime,inputFormat).tz(userTimezoneSetting).format("HH:mm");var dailyTime12HourFormatted=moment_timezone_1.default(inputTime,inputFormat).tz(userTimezoneSetting).format("hh:mm A (z)");var intervalHours=lodash_1.default.range(24).map(function(i){var hour=lodash_1.default.padLeft(i.toString(),2,"0");return{value:hour+":00",text:hour+":00 UTC"}});var flyoutBody=react_1.default.createElement(eui_1.EuiText,null,react_1.default.createElement("p",null,"This form will assist in creating a Watch that can notify you of error occurrences from this service. To learn more about Watcher, please read our"," ",react_1.default.createElement(eui_1.EuiLink,{target:"_blank",href:xpack_1.XPACK_DOCS.xpackWatcher},"documentation"),"."),react_1.default.createElement(eui_1.EuiForm,null,react_1.default.createElement("h3",null,"Condition"),react_1.default.createElement(eui_1.EuiFormRow,{label:"Occurrences threshold per error group",helpText:"Threshold to be met for error group to be included in report.",compressed:true},react_1.default.createElement(eui_1.EuiFieldNumber,{icon:"number",min:1,value:this.state.threshold,onChange:this.onChangeThreshold})),react_1.default.createElement("h3",null,"Trigger schedule"),react_1.default.createElement("p",null,"Choose the time interval for the report, when the threshold is exceeded."),react_1.default.createElement(eui_1.EuiRadio,{id:"daily",label:"Daily report",onChange:function onChange(){return _this2.onChangeSchedule("daily")},checked:this.state.schedule==="daily"}),react_1.default.createElement(eui_1.EuiSpacer,{size:"m"}),react_1.default.createElement(eui_1.EuiFormRow,{helpText:"The daily report will be sent at "+dailyTimeFormatted+" / "+dailyTime12HourFormatted+".",compressed:true},react_1.default.createElement(eui_1.EuiSelect,{value:dailyTime,onChange:this.onChangeDailyUnit,options:intervalHours,disabled:this.state.schedule!=="daily"})),react_1.default.createElement(eui_1.EuiRadio,{id:"interval",label:"Interval",onChange:function onChange(){return _this2.onChangeSchedule("interval")},checked:this.state.schedule==="interval"}),react_1.default.createElement(eui_1.EuiSpacer,{size:"m"}),react_1.default.createElement(eui_1.EuiFlexGroup,null,react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(SmallInput,null,react_1.default.createElement(eui_1.EuiFormRow,{helpText:"Time interval between reports.",compressed:true},react_1.default.createElement(eui_1.EuiFieldNumber,{icon:"clock",min:1,value:this.state.interval.value,onChange:this.onChangeIntervalValue,disabled:this.state.schedule!=="interval"})))),react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(eui_1.EuiFormRow,{compressed:true},react_1.default.createElement(eui_1.EuiSelect,{value:this.state.interval.unit,onChange:this.onChangeIntervalUnit,options:[{value:"m",text:"mins"},{value:"h",text:"hrs"}],disabled:this.state.schedule!=="interval"})))),react_1.default.createElement("h3",null,"Actions"),react_1.default.createElement("p",null,"Reports can be sent by email or posted to a Slack channel. Each report will include the top 10 errors sorted by occurrence."),react_1.default.createElement(eui_1.EuiSwitch,{label:"Send email",checked:this.state.actions.email,onChange:function onChange(){return _this2.onChangeAction("email")}}),react_1.default.createElement(eui_1.EuiSpacer,{size:"m"}),this.state.actions.email&&react_1.default.createElement(eui_1.EuiFormRow,{label:"Recipients (separated with comma)",compressed:true,helpText:react_1.default.createElement("span",null,"If you have not configured email, please see the"," ",react_1.default.createElement(eui_1.EuiLink,{target:"_blank",href:xpack_1.XPACK_DOCS.xpackEmails},"documentation"),".")},react_1.default.createElement(eui_1.EuiFieldText,{icon:"user",value:this.state.emails,onChange:this.onChangeEmails})),react_1.default.createElement(eui_1.EuiSwitch,{label:"Send Slack notification",checked:this.state.actions.slack,onChange:function onChange(){return _this2.onChangeAction("slack")}}),react_1.default.createElement(eui_1.EuiSpacer,{size:"m"}),this.state.actions.slack&&react_1.default.createElement(eui_1.EuiFormRow,{label:"Slack Webhook URL",compressed:true,helpText:react_1.default.createElement("span",null,"To get a Slack webhook, please see the"," ",react_1.default.createElement(eui_1.EuiLink,{target:"_blank",href:"https://get.slack.help/hc/en-us/articles/115005265063-Incoming-WebHooks-for-Slack"},"documentation"),".")},react_1.default.createElement(eui_1.EuiFieldText,{icon:"link",value:this.state.slackUrl,onChange:this.onChangeSlackUrl}))));return react_1.default.createElement(eui_1.EuiFlyout,{onClose:this.props.onClose,size:"s"},react_1.default.createElement(eui_1.EuiFlyoutHeader,null,react_1.default.createElement(eui_1.EuiTitle,null,react_1.default.createElement("h2",null,"Enable error reports"))),react_1.default.createElement(eui_1.EuiFlyoutBody,null,flyoutBody),react_1.default.createElement(eui_1.EuiFlyoutFooter,null,react_1.default.createElement(eui_1.EuiButton,{onClick:this.createWatch,fill:true,disabled:!this.state.actions.email&&!this.state.actions.slack},"Create watch")))}}]);return WatcherFlyout}(react_1.Component);exports.WatcherFlyout=WatcherFlyout},3144:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var metadata_1=__webpack_require__(190);var STACK_VERSION=metadata_1.metadata.branch;var XPACK_URL_ROOT="https://www.elastic.co/guide/en/x-pack/"+STACK_VERSION;exports.XPACK_DOCS={xpackEmails:XPACK_URL_ROOT+"/actions-email.html#configuring-email",xpackWatcher:XPACK_URL_ROOT+"/watcher-getting-started.html"}},3145:function(module,exports,__webpack_require__){"use strict";var createErrorGroupWatch=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var _ref$emails=_ref.emails,emails=_ref$emails===undefined?[]:_ref$emails,schedule=_ref.schedule,serviceName=_ref.serviceName,slackUrl=_ref.slackUrl,threshold=_ref.threshold,timeRange=_ref.timeRange;var id,apmIndexPatternTitle,slackUrlPath,emailTemplate,slackTemplate,actions,body;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id="apm-"+uuid_1.default.v4();apmIndexPatternTitle=chrome_1.default.getInjected("apmIndexPatternTitle");slackUrlPath=getSlackPathUrl(slackUrl);emailTemplate='Your service "{{ctx.metadata.serviceName}}" has error groups which exceeds {{ctx.metadata.threshold}} occurrences within "{{ctx.metadata.timeRangeValue}}{{ctx.metadata.timeRangeUnit}}"\n\n{{#ctx.payload.aggregations.error_groups.buckets}}\n<strong>{{sample.hits.hits.0._source.error.log.message}}{{^sample.hits.hits.0._source.error.log.message}}{{sample.hits.hits.0._source.error.exception.message}}{{/sample.hits.hits.0._source.error.log.message}}</strong>\n{{sample.hits.hits.0._source.error.culprit}}{{^sample.hits.hits.0._source.error.culprit}}N/A{{/sample.hits.hits.0._source.error.culprit}}\n{{doc_count}} occurrences\n{{/ctx.payload.aggregations.error_groups.buckets}}'.replace(/\n/g,"<br/>");slackTemplate='Your service "{{ctx.metadata.serviceName}}" has error groups which exceeds {{ctx.metadata.threshold}} occurrences within "{{ctx.metadata.timeRangeValue}}{{ctx.metadata.timeRangeUnit}}"\n{{#ctx.payload.aggregations.error_groups.buckets}}\n>*{{sample.hits.hits.0._source.error.log.message}}{{^sample.hits.hits.0._source.error.log.message}}{{sample.hits.hits.0._source.error.exception.message}}{{/sample.hits.hits.0._source.error.log.message}}*\n>{{#sample.hits.hits.0._source.error.culprit}}`{{sample.hits.hits.0._source.error.culprit}}`{{/sample.hits.hits.0._source.error.culprit}}{{^sample.hits.hits.0._source.error.culprit}}N/A{{/sample.hits.hits.0._source.error.culprit}}\n>{{doc_count}} occurrences\n{{/ctx.payload.aggregations.error_groups.buckets}}';actions={log_error:{logging:{text:emailTemplate}}};body={metadata:{emails:emails,trigger:"This value must be changed in trigger section",serviceName:serviceName,threshold:threshold,timeRangeValue:timeRange.value,timeRangeUnit:timeRange.unit,slackUrlPath:slackUrlPath},trigger:{schedule:schedule},input:{search:{request:{indices:[apmIndexPatternTitle],body:{size:0,query:{bool:{filter:[{term:_defineProperty({},constants_1.SERVICE_NAME,"{{ctx.metadata.serviceName}}")},{term:_defineProperty({},constants_1.PROCESSOR_EVENT,"error")},{range:{"@timestamp":{gte:"now-{{ctx.metadata.timeRangeValue}}{{ctx.metadata.timeRangeUnit}}"}}}]}},aggs:{error_groups:{terms:{min_doc_count:"{{ctx.metadata.threshold}}",field:constants_1.ERROR_GROUP_ID,size:10,order:{_count:"desc"}},aggs:{sample:{top_hits:{_source:[constants_1.ERROR_LOG_MESSAGE,constants_1.ERROR_EXC_MESSAGE,constants_1.ERROR_EXC_HANDLED,constants_1.ERROR_CULPRIT,constants_1.ERROR_GROUP_ID,"@timestamp"],sort:[{"@timestamp":"desc"}],size:1}}}}}}}}},condition:{script:{source:"return ctx.payload.aggregations.error_groups.buckets.length > 0"}},actions:actions};if(slackUrlPath){body.actions.slack_webhook={webhook:{scheme:"https",host:"hooks.slack.com",port:443,method:"POST",path:"{{ctx.metadata.slackUrlPath}}",headers:{"Content-Type":"application/json"},body:"__json__::"+JSON.stringify({text:slackTemplate})}}}if(!lodash_1.isEmpty(emails)){body.actions.email={email:{to:"{{#join}}ctx.metadata.emails{{/join}}",subject:'"{{ctx.metadata.serviceName}}" has error groups which exceeds the threshold',body:{html:emailTemplate}}}}_context.next=11;return watcher_1.createWatch(id,body);case 11:return _context.abrupt("return",id);case 12:case"end":return _context.stop()}}},_callee,this)}));return function createErrorGroupWatch(_x){return _ref2.apply(this,arguments)}}();function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var lodash_1=__webpack_require__(1);var chrome_1=tslib_1.__importDefault(__webpack_require__(8));var url_1=tslib_1.__importDefault(__webpack_require__(54));var uuid_1=tslib_1.__importDefault(__webpack_require__(64));var constants_1=__webpack_require__(179);var watcher_1=__webpack_require__(3146);function getSlackPathUrl(slackUrl){if(slackUrl){var _url_1$default$parse=url_1.default.parse(slackUrl),path=_url_1$default$parse.path;return path}}exports.createErrorGroupWatch=createErrorGroupWatch},3146:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createWatch=undefined;var createWatch=exports.createWatch=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(id,watch){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",(0,_callApi.callApi)({method:"PUT",pathname:"/api/watcher/watch/"+id,body:JSON.stringify({type:"json",id:id,watch:watch})}));case 1:case"end":return _context.stop()}}},_callee,this)}));return function createWatch(_x,_x2){return _ref.apply(this,arguments)}}();var _callApi=__webpack_require__(225);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}},3147:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_redux_1=__webpack_require__(14);var view_1=__webpack_require__(3148);var urlParams_1=__webpack_require__(227);function mapStateToProps(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return{location:state.location,urlParams:urlParams_1.getUrlParams(state)}}exports.TransactionDetails=react_redux_1.connect(mapStateToProps)(view_1.TransactionDetailsView)},3148:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var transactionDetails_1=__webpack_require__(3149);var transactionDetailsCharts_1=__webpack_require__(3150);var transactionDistribution_1=__webpack_require__(1120);var waterfall_1=__webpack_require__(3151);var TransactionCharts_1=__webpack_require__(692);var EmptyMessage_1=__webpack_require__(349);var KueryBar_1=__webpack_require__(492);var Distribution_1=__webpack_require__(3154);var Transaction_1=__webpack_require__(3155);function TransactionDetailsView(_ref){var urlParams=_ref.urlParams,location=_ref.location;return react_1.default.createElement("div",null,react_1.default.createElement(eui_1.EuiTitle,{size:"l"},react_1.default.createElement("h1",null,urlParams.transactionName)),react_1.default.createElement(eui_1.EuiSpacer,null),react_1.default.createElement(KueryBar_1.KueryBar,null),react_1.default.createElement(eui_1.EuiSpacer,{size:"s"}),react_1.default.createElement(transactionDetailsCharts_1.TransactionDetailsChartsRequest,{urlParams:urlParams,render:function render(_ref2){var data=_ref2.data;return react_1.default.createElement(TransactionCharts_1.TransactionCharts,{charts:data,urlParams:urlParams,location:location})}}),react_1.default.createElement(eui_1.EuiSpacer,null),react_1.default.createElement(transactionDistribution_1.TransactionDistributionRequest,{urlParams:urlParams,render:function render(_ref3){var data=_ref3.data;return react_1.default.createElement(Distribution_1.Distribution,{distribution:data,urlParams:urlParams,location:location})}}),react_1.default.createElement(eui_1.EuiSpacer,{size:"l"}),react_1.default.createElement(transactionDetails_1.TransactionDetailsRequest,{urlParams:urlParams,render:function render(_ref4){var transaction=_ref4.data;if(!transaction){return react_1.default.createElement(EmptyMessage_1.EmptyMessage,{heading:"No transaction sample available.",subheading:"Try another time range, reset the search filter or select another bucket from the distribution histogram."})}return react_1.default.createElement(waterfall_1.WaterfallRequest,{urlParams:urlParams,transaction:transaction,render:function render(_ref5){var waterfall=_ref5.data;return react_1.default.createElement(Transaction_1.Transaction,{location:location,transaction:transaction,urlParams:urlParams,waterfall:waterfall})}})}}))}exports.TransactionDetailsView=TransactionDetailsView},3149:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_redux_request_1=__webpack_require__(74);var transactions_1=__webpack_require__(1136);var ID="transactionDetails";function getTransactionDetails(state){return state.reactReduxRequest[ID]}exports.getTransactionDetails=getTransactionDetails;function TransactionDetailsRequest(_ref){var urlParams=_ref.urlParams,render=_ref.render;var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,transactionId=urlParams.transactionId,traceId=urlParams.traceId,kuery=urlParams.kuery;if(!(serviceName&&start&&end&&transactionId)){return null}return react_1.default.createElement(react_redux_request_1.Request,{id:ID,fn:transactions_1.loadTransaction,selector:getTransactionDetails,args:[{serviceName:serviceName,start:start,end:end,transactionId:transactionId,traceId:traceId,kuery:kuery}],render:render})}exports.TransactionDetailsRequest=TransactionDetailsRequest},3150:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_redux_request_1=__webpack_require__(74);var reselect_1=__webpack_require__(27);var transaction_groups_1=__webpack_require__(493);var chartSelectors_1=__webpack_require__(694);var urlParams_1=__webpack_require__(227);var ID="transactionDetailsCharts";var INITIAL_DATA={apmTimeseries:{totalHits:0,responseTimes:{avg:[],p95:[],p99:[]},tpmBuckets:[],overallAvgDuration:undefined},anomalyTimeseries:undefined};exports.getTransactionDetailsCharts=reselect_1.createSelector(urlParams_1.getUrlParams,function(state){return state.reactReduxRequest[ID]},function(urlParams){var detailCharts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return _extends({},detailCharts,{data:chartSelectors_1.getTransactionCharts(urlParams,detailCharts.data||INITIAL_DATA)})});function TransactionDetailsChartsRequest(_ref){var urlParams=_ref.urlParams,render=_ref.render;var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,transactionType=urlParams.transactionType,transactionName=urlParams.transactionName,kuery=urlParams.kuery;if(!(serviceName&&start&&end&&transactionType&&transactionName)){return null}return react_1.default.createElement(react_redux_request_1.Request,{id:ID,fn:transaction_groups_1.loadDetailsCharts,args:[{serviceName:serviceName,start:start,end:end,transactionType:transactionType,transactionName:transactionName,kuery:kuery}],selector:exports.getTransactionDetailsCharts,render:render})}exports.TransactionDetailsChartsRequest=TransactionDetailsChartsRequest},3151:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var waterfallV1_1=__webpack_require__(3152);var waterfallV2_1=__webpack_require__(3153);function WaterfallRequest(_ref){var urlParams=_ref.urlParams,transaction=_ref.transaction,render=_ref.render;var hasTrace=transaction.hasOwnProperty("trace");if(hasTrace){return react_1.default.createElement(waterfallV2_1.WaterfallV2Request,{urlParams:urlParams,transaction:transaction,render:render})}else{return react_1.default.createElement(waterfallV1_1.WaterfallV1Request,{urlParams:urlParams,transaction:transaction,render:render})}}exports.WaterfallRequest=WaterfallRequest},3152:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var lodash_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_redux_request_1=__webpack_require__(74);var constants_1=__webpack_require__(179);var waterfall_helpers_1=__webpack_require__(1137);var transactions_1=__webpack_require__(1136);exports.ID="waterfallV1";function WaterfallV1Request(_ref){var urlParams=_ref.urlParams,transaction=_ref.transaction,_render=_ref.render;var start=urlParams.start,end=urlParams.end;var transactionId=lodash_1.get(transaction,constants_1.TRANSACTION_ID);var serviceName=lodash_1.get(transaction,constants_1.SERVICE_NAME);if(!(serviceName&&transactionId&&start&&end)){return null}return react_1.default.createElement(react_redux_request_1.Request,{id:exports.ID,fn:transactions_1.loadSpans,args:[{serviceName:serviceName,start:start,end:end,transactionId:transactionId}],render:function render(_ref2){var status=_ref2.status,_ref2$data=_ref2.data,data=_ref2$data===undefined?[]:_ref2$data,args=_ref2.args;var waterfall=waterfall_helpers_1.getWaterfall([transaction].concat(_toConsumableArray(data)),transaction);return _render({status:status,data:waterfall,args:args})}})}exports.WaterfallV1Request=WaterfallV1Request},3153:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var lodash_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_redux_request_1=__webpack_require__(74);var constants_1=__webpack_require__(179);var waterfall_helpers_1=__webpack_require__(1137);var traces_1=__webpack_require__(1138);exports.ID="waterfallV2";function WaterfallV2Request(_ref){var urlParams=_ref.urlParams,transaction=_ref.transaction,_render=_ref.render;var start=urlParams.start,end=urlParams.end;var traceId=lodash_1.get(transaction,constants_1.TRACE_ID);if(!(traceId&&start&&end)){return null}return react_1.default.createElement(react_redux_request_1.Request,{id:exports.ID,fn:traces_1.loadTrace,args:[{traceId:traceId,start:start,end:end}],render:function render(_ref2){var args=_ref2.args,_ref2$data=_ref2.data,data=_ref2$data===undefined?[]:_ref2$data,status=_ref2.status;var waterfall=waterfall_helpers_1.getWaterfall(data,transaction);return _render({args:args,data:waterfall,status:status})}})}exports.WaterfallV2Request=WaterfallV2Request},3154:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var d3_1=tslib_1.__importDefault(__webpack_require__(20));var react_1=tslib_1.__importStar(__webpack_require__(0));var formatters_1=__webpack_require__(198);var url_1=__webpack_require__(44);var Histogram_1=tslib_1.__importDefault(__webpack_require__(1128));var EmptyMessage_1=__webpack_require__(349);function getFormattedBuckets(buckets,bucketSize){if(!buckets){return[]}return buckets.map(function(_ref){var sample=_ref.sample,count=_ref.count,key=_ref.key;return{sample:sample,x0:key,x:key+bucketSize,y:count,style:{cursor:count>0&&sample?"pointer":"default"}}})}exports.getFormattedBuckets=getFormattedBuckets;var Distribution=function(_react_1$Component){_inherits(Distribution,_react_1$Component);function Distribution(){_classCallCheck(this,Distribution);var _this=_possibleConstructorReturn(this,(Distribution.__proto__||Object.getPrototypeOf(Distribution)).apply(this,arguments));_this.formatYShort=function(t){return t+" "+unitShort(_this.props.urlParams.transactionType)};_this.formatYLong=function(t){return t+" "+unitLong(_this.props.urlParams.transactionType,t)};return _this}_createClass(Distribution,[{key:"render",value:function render(){var _props=this.props,location=_props.location,distribution=_props.distribution,urlParams=_props.urlParams;var buckets=getFormattedBuckets(distribution.buckets,distribution.bucketSize);var isEmpty=distribution.totalHits===0;var xMax=d3_1.default.max(buckets,function(d){return d.x})||0;var timeFormatter=formatters_1.getTimeFormatter(xMax);var unit=formatters_1.timeUnit(xMax);if(isEmpty){return react_1.default.createElement(EmptyMessage_1.EmptyMessage,{heading:"No transactions were found."})}var bucketIndex=buckets.findIndex(function(bucket){return bucket.sample!=null&&bucket.sample.transactionId===urlParams.transactionId&&bucket.sample.traceId===urlParams.traceId});return react_1.default.createElement("div",null,react_1.default.createElement(eui_1.EuiTitle,{size:"s"},react_1.default.createElement("h5",null,"Transactions duration distribution"," ",react_1.default.createElement(eui_1.EuiToolTip,{content:react_1.default.createElement("div",null,react_1.default.createElement(eui_1.EuiText,null,react_1.default.createElement("strong",null,"Sampling")),react_1.default.createElement(eui_1.EuiText,null,"Each bucket will show a sample transaction. If there's no sample available, it's most likely because of the sampling limit set in the agent configuration."))},react_1.default.createElement(eui_1.EuiIcon,{type:"questionInCircle"})))),react_1.default.createElement(Histogram_1.default,{buckets:buckets,bucketSize:distribution.bucketSize,bucketIndex:bucketIndex,onClick:function onClick(bucket){if(bucket.sample&&bucket.y>0){url_1.history.replace(_extends({},location,{search:url_1.fromQuery(_extends({},url_1.toQuery(location.search),{transactionId:bucket.sample.transactionId,traceId:bucket.sample.traceId}))}))}},formatX:timeFormatter,formatYShort:this.formatYShort,formatYLong:this.formatYLong,verticalLineHover:function verticalLineHover(bucket){return bucket.y>0&&!bucket.sample},backgroundHover:function backgroundHover(bucket){return bucket.y>0&&bucket.sample},tooltipHeader:function tooltipHeader(bucket){return timeFormatter(bucket.x0,{withUnit:false})+" - "+timeFormatter(bucket.x,{withUnit:false})+" "+unit},tooltipFooter:function tooltipFooter(bucket){return!bucket.sample&&"No sample available for this bucket"}}))}}]);return Distribution}(react_1.Component);exports.Distribution=Distribution;function unitShort(type){return type==="request"?"req.":"trans."}function unitLong(type,count){var suffix=count>1?"s":"";return type==="request"?"request"+suffix:"transaction"+suffix}},3155:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var TransactionActionMenu_1=__webpack_require__(1139);var TransactionLink_1=__webpack_require__(697);var StickyTransactionProperties_1=__webpack_require__(1140);var TransactionPropertiesTable_1=__webpack_require__(3158);function MaybeViewTraceLink(_ref){var transaction=_ref.transaction,waterfall=_ref.waterfall;if(!waterfall.traceRoot){return react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(eui_1.EuiToolTip,{content:"The trace parent cannot be found"},react_1.default.createElement(eui_1.EuiButton,{iconType:"apmApp",disabled:true},"View full trace")))}var isRoot=transaction.transaction.id===waterfall.traceRoot.transaction.id;if(isRoot){return react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(eui_1.EuiToolTip,{content:"Currently viewing the full trace"},react_1.default.createElement(eui_1.EuiButton,{iconType:"apmApp",disabled:true},"View full trace")))}else{return react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(TransactionLink_1.TransactionLink,{transaction:waterfall.traceRoot},react_1.default.createElement(eui_1.EuiButton,{iconType:"apmApp"},"View full trace")))}}exports.Transaction=function(_ref2){var transaction=_ref2.transaction,urlParams=_ref2.urlParams,location=_ref2.location,waterfall=_ref2.waterfall;return react_1.default.createElement(eui_1.EuiPanel,{paddingSize:"m"},react_1.default.createElement(eui_1.EuiFlexGroup,{justifyContent:"spaceBetween"},react_1.default.createElement(eui_1.EuiFlexItem,null,react_1.default.createElement(eui_1.EuiTitle,{size:"s"},react_1.default.createElement("h5",null,"Transaction sample"))),react_1.default.createElement(eui_1.EuiFlexItem,null,react_1.default.createElement(eui_1.EuiFlexGroup,{justifyContent:"flexEnd"},react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(TransactionActionMenu_1.TransactionActionMenu,{transaction:transaction,location:location})),react_1.default.createElement(MaybeViewTraceLink,{transaction:transaction,waterfall:waterfall})))),react_1.default.createElement(eui_1.EuiSpacer,null),react_1.default.createElement(StickyTransactionProperties_1.StickyTransactionProperties,{transaction:transaction,totalDuration:waterfall.traceRootDuration}),react_1.default.createElement(eui_1.EuiSpacer,null),react_1.default.createElement(TransactionPropertiesTable_1.TransactionPropertiesTable,{transaction:transaction,location:location,urlParams:urlParams,waterfall:waterfall}))}},3157:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var constants_1=__webpack_require__(179);var DiscoverButton_1=__webpack_require__(689);function getDiscoverQuery(transaction){var transactionId=transaction.transaction.id;var traceId=transaction.version==="v2"?transaction.trace.id:undefined;var query=constants_1.PROCESSOR_EVENT+':"transaction" AND '+constants_1.TRANSACTION_ID+':"'+transactionId+'"';if(traceId){query+=" AND "+constants_1.TRACE_ID+':"'+traceId+'"'}return{_a:{interval:"auto",query:{language:"lucene",query:query}}}}exports.getDiscoverQuery=getDiscoverQuery;exports.DiscoverTransactionButton=function(_ref){var transaction=_ref.transaction,children=_ref.children;return react_1.default.createElement(DiscoverButton_1.DiscoverButton,{query:getDiscoverQuery(transaction),children:children})}},3158:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _templateObject=_taggedTemplateLiteral(["\n  padding: "," "," 0;\n"],["\n  padding: "," "," 0;\n"]);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var lodash_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var variables_1=__webpack_require__(26);var url_1=__webpack_require__(44);var PropertiesTable_1=__webpack_require__(494);var WaterfallContainer_1=__webpack_require__(3159);var TableContainer=styled_components_1.default.div(_templateObject,variables_1.px(variables_1.units.plus),variables_1.px(variables_1.units.plus));function getCurrentTab(){var tabs=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var selectedTab=arguments[1];return selectedTab&&tabs.includes(selectedTab)?selectedTab:lodash_1.first(tabs)}var TIMELINE_TAB="timeline";function getTabs(transactionData){var dynamicProps=Object.keys(transactionData.context||{});return[TIMELINE_TAB].concat(_toConsumableArray(PropertiesTable_1.getPropertyTabNames(dynamicProps)))}function TransactionPropertiesTable(_ref){var location=_ref.location,transaction=_ref.transaction,urlParams=_ref.urlParams,waterfall=_ref.waterfall;var tabs=getTabs(transaction);var currentTab=getCurrentTab(tabs,urlParams.detailTab);var agentName=transaction.context.service.agent.name;return react_1.default.createElement("div",null,react_1.default.createElement(eui_1.EuiTabs,null,tabs.map(function(key){return react_1.default.createElement(eui_1.EuiTab,{onClick:function onClick(){url_1.history.replace(_extends({},location,{search:url_1.fromQuery(_extends({},url_1.toQuery(location.search),{detailTab:key}))}))},isSelected:currentTab===key,key:key},lodash_1.capitalize(key))})),react_1.default.createElement(eui_1.EuiSpacer,null),currentTab===TIMELINE_TAB&&react_1.default.createElement(WaterfallContainer_1.WaterfallContainer,{transaction:transaction,location:location,urlParams:urlParams,waterfall:waterfall}),currentTab!==TIMELINE_TAB&&react_1.default.createElement(TableContainer,null,react_1.default.createElement(PropertiesTable_1.PropertiesTable,{propData:lodash_1.get(transaction.context,currentTab),propKey:currentTab,agentName:agentName})))}exports.TransactionPropertiesTable=TransactionPropertiesTable},3159:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var get_agent_marks_1=__webpack_require__(3160);var ServiceLegends_1=__webpack_require__(3161);var Waterfall_1=__webpack_require__(3162);function WaterfallContainer(_ref){var location=_ref.location,urlParams=_ref.urlParams,transaction=_ref.transaction,waterfall=_ref.waterfall;var agentMarks=get_agent_marks_1.getAgentMarks(transaction);if(!waterfall){return null}return react_1.default.createElement("div",null,react_1.default.createElement(ServiceLegends_1.ServiceLegends,{serviceColors:waterfall.serviceColors}),react_1.default.createElement(Waterfall_1.Waterfall,{agentMarks:agentMarks,location:location,serviceColors:waterfall.serviceColors,urlParams:urlParams,waterfall:waterfall}))}exports.WaterfallContainer=WaterfallContainer},3160:function(module,exports,__webpack_require__){"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();Object.defineProperty(exports,"__esModule",{value:true});var lodash_1=__webpack_require__(1);function getAgentMarks(transaction){if(!(transaction.transaction.marks&&transaction.transaction.marks.agent)){return[]}return lodash_1.sortBy(Object.entries(transaction.transaction.marks.agent).map(function(_ref){var _ref2=_slicedToArray(_ref,2),name=_ref2[0],ms=_ref2[1];return{name:name,us:ms*1e3}}),"us")}exports.getAgentMarks=getAgentMarks},3161:function(module,exports,__webpack_require__){"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _templateObject=_taggedTemplateLiteral(["\n  display: flex;\n\n  > * {\n    margin-right: ",";\n    &:last-child {\n      margin-right: 0;\n    }\n  }\n"],["\n  display: flex;\n\n  > * {\n    margin-right: ",";\n    &:last-child {\n      margin-right: 0;\n    }\n  }\n"]);function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var variables_1=__webpack_require__(26);var Legend_1=tslib_1.__importDefault(__webpack_require__(496));var Legends=styled_components_1.default.div(_templateObject,variables_1.px(variables_1.unit));function ServiceLegends(_ref){var serviceColors=_ref.serviceColors;return react_1.default.createElement(Legends,null,react_1.default.createElement(eui_1.EuiTitle,{size:"xxxs"},react_1.default.createElement("span",null,"Services")),Object.entries(serviceColors).map(function(_ref2){var _ref3=_slicedToArray(_ref2,2),label=_ref3[0],color=_ref3[1];return react_1.default.createElement(Legend_1.default,{key:color,color:color,text:label})}))}exports.ServiceLegends=ServiceLegends},3162:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _templateObject=_taggedTemplateLiteral(["\n  transition: 0.1s padding ease;\n  position: relative;\n  overflow: hidden;\n"],["\n  transition: 0.1s padding ease;\n  position: relative;\n  overflow: hidden;\n"]);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importStar(__webpack_require__(0));var react_sticky_1=__webpack_require__(1149);var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var url_1=__webpack_require__(44);var Timeline_1=tslib_1.__importDefault(__webpack_require__(3163));var SpanFlyout_1=__webpack_require__(3169);var TransactionFlyout_1=__webpack_require__(3175);var WaterfallItem_1=__webpack_require__(3177);var Container=styled_components_1.default.div(_templateObject);var TIMELINE_MARGINS={top:40,left:50,right:50,bottom:0};var Waterfall=function(_react_1$Component){_inherits(Waterfall,_react_1$Component);function Waterfall(){_classCallCheck(this,Waterfall);var _this=_possibleConstructorReturn(this,(Waterfall.__proto__||Object.getPrototypeOf(Waterfall)).apply(this,arguments));_this.onOpenFlyout=function(item){_this.setQueryParams({flyoutDetailTab:undefined,waterfallItemId:String(item.id)})};_this.onCloseFlyout=function(){_this.setQueryParams({flyoutDetailTab:undefined,waterfallItemId:undefined})};_this.getWaterfallItem=function(item){var _this$props=_this.props,serviceColors=_this$props.serviceColors,waterfall=_this$props.waterfall,urlParams=_this$props.urlParams;return react_1.default.createElement(WaterfallItem_1.WaterfallItem,{key:item.id,timelineMargins:TIMELINE_MARGINS,color:serviceColors[item.serviceName],item:item,totalDuration:waterfall.duration,isSelected:item.id===urlParams.waterfallItemId,onClick:function onClick(){return _this.onOpenFlyout(item)}})};_this.getFlyOut=function(){var _this$props2=_this.props,waterfall=_this$props2.waterfall,location=_this$props2.location,urlParams=_this$props2.urlParams;var currentItem=urlParams.waterfallItemId&&waterfall.itemsById[urlParams.waterfallItemId];if(!currentItem){return null}switch(currentItem.docType){case"span":var parentTransaction=waterfall.getTransactionById(currentItem.parentId);return react_1.default.createElement(SpanFlyout_1.SpanFlyout,{totalDuration:waterfall.duration,span:currentItem.span,parentTransaction:parentTransaction,onClose:_this.onCloseFlyout});case"transaction":return react_1.default.createElement(TransactionFlyout_1.TransactionFlyout,{transaction:currentItem.transaction,onClose:_this.onCloseFlyout,location:location,urlParams:urlParams,waterfall:waterfall});default:return null}};return _this}_createClass(Waterfall,[{key:"render",value:function render(){var waterfall=this.props.waterfall;var itemContainerHeight=58;var waterfallHeight=itemContainerHeight*waterfall.items.length;return react_1.default.createElement(Container,null,react_1.default.createElement(react_sticky_1.StickyContainer,null,react_1.default.createElement(Timeline_1.default,{agentMarks:this.props.agentMarks,duration:waterfall.duration,traceRootDuration:waterfall.traceRootDuration,height:waterfallHeight,margins:TIMELINE_MARGINS}),react_1.default.createElement("div",{style:{paddingTop:TIMELINE_MARGINS.top}},waterfall.items.map(this.getWaterfallItem))),this.getFlyOut())}},{key:"setQueryParams",value:function setQueryParams(params){var location=this.props.location;url_1.history.replace(_extends({},location,{search:url_1.fromQuery(_extends({},url_1.toQuery(location.search),params))}))}}]);return Waterfall}(react_1.Component);exports.Waterfall=Waterfall},3163:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _reactVis=__webpack_require__(247);var _plotUtils=__webpack_require__(3164);var _TimelineAxis=__webpack_require__(3165);var _TimelineAxis2=_interopRequireDefault(_TimelineAxis);var _VerticalLines=__webpack_require__(3168);var _VerticalLines2=_interopRequireDefault(_VerticalLines);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Timeline=function(_PureComponent){_inherits(Timeline,_PureComponent);function Timeline(){_classCallCheck(this,Timeline);return _possibleConstructorReturn(this,(Timeline.__proto__||Object.getPrototypeOf(Timeline)).apply(this,arguments))}_createClass(Timeline,[{key:"render",value:function render(){var _props=this.props,width=_props.width,duration=_props.duration,agentMarks=_props.agentMarks,traceRootDuration=_props.traceRootDuration,height=_props.height,margins=_props.margins;if(duration==null||!width){return null}var plotValues=(0,_plotUtils.getPlotValues)({width:width,duration:duration,height:height,margins:margins});return _react2.default.createElement("div",null,_react2.default.createElement(_TimelineAxis2.default,{plotValues:plotValues,agentMarks:agentMarks,traceRootDuration:traceRootDuration}),_react2.default.createElement(_VerticalLines2.default,{plotValues:plotValues,agentMarks:agentMarks,traceRootDuration:traceRootDuration}))}}]);return Timeline}(_react.PureComponent);Timeline.propTypes={agentMarks:_propTypes2.default.array,duration:_propTypes2.default.number,height:_propTypes2.default.number.isRequired,header:_propTypes2.default.node,margins:_propTypes2.default.object.isRequired,width:_propTypes2.default.number};exports.default=(0,_reactVis.makeWidthFlexible)(Timeline);module.exports=exports["default"]},3164:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPlotValues=getPlotValues;var _d3Scale=__webpack_require__(358);function getPlotValues(_ref){var width=_ref.width,duration=_ref.duration,height=_ref.height,margins=_ref.margins;var xMin=0;var xMax=duration;var xScale=(0,_d3Scale.scaleLinear)().domain([xMin,xMax]).range([margins.left,width-margins.right]);return{height:height,margins:margins,tickValues:xScale.ticks(7),width:width,xDomain:xScale.domain(),xMax:xMax,xScale:xScale}}},3165:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _lodash=__webpack_require__(1);var _reactSticky=__webpack_require__(1149);var _reactVis=__webpack_require__(247);var _LastTickValue=__webpack_require__(3166);var _LastTickValue2=_interopRequireDefault(_LastTickValue);var _AgentMarker=__webpack_require__(3167);var _AgentMarker2=_interopRequireDefault(_AgentMarker);var _variables=__webpack_require__(26);var _formatters=__webpack_require__(198);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getXAxisTickValues=function getXAxisTickValues(tickValues,traceRootDuration){if(traceRootDuration==null){return tickValues}var padding=(tickValues[1]-tickValues[0])/2;var lowerBound=traceRootDuration-padding;var upperBound=traceRootDuration+padding;return tickValues.filter(function(value){var isInRange=(0,_lodash.inRange)(value,lowerBound,upperBound);return!isInRange&&value!==traceRootDuration})};function TimelineAxis(_ref){var plotValues=_ref.plotValues,agentMarks=_ref.agentMarks,traceRootDuration=_ref.traceRootDuration;var margins=plotValues.margins,tickValues=plotValues.tickValues,width=plotValues.width,xDomain=plotValues.xDomain,xMax=plotValues.xMax,xScale=plotValues.xScale;var tickFormat=(0,_formatters.getTimeFormatter)(xMax);var xAxisTickValues=getXAxisTickValues(tickValues,traceRootDuration);return _react2.default.createElement(_reactSticky.Sticky,{disableCompensation:true},function(_ref2){var style=_ref2.style;return _react2.default.createElement("div",{style:_extends({position:"absolute",backgroundColor:_variables.colors.white,borderBottom:"1px solid "+_variables.colors.gray3,height:(0,_variables.px)(margins.top),zIndex:2,width:"100%"},style)},_react2.default.createElement(_reactVis.XYPlot,{dontCheckIfEmpty:true,width:width,height:margins.top,margin:{top:margins.top,left:margins.left,right:margins.right},xDomain:xDomain},_react2.default.createElement(_reactVis.XAxis,{hideLine:true,orientation:"top",tickSize:0,tickValues:xAxisTickValues,tickFormat:tickFormat,tickPadding:20,style:{text:{fill:_variables.colors.gray3}}}),traceRootDuration&&_react2.default.createElement(_LastTickValue2.default,{x:xScale(traceRootDuration),value:tickFormat(traceRootDuration),marginTop:28}),agentMarks.map(function(agentMark){return _react2.default.createElement(_AgentMarker2.default,{key:agentMark.name,agentMark:agentMark,x:xScale(agentMark.us)})})))})}TimelineAxis.propTypes={header:_propTypes2.default.node,plotValues:_propTypes2.default.object.isRequired,agentMarks:_propTypes2.default.array};TimelineAxis.defaultProps={agentMarks:[]};exports.default=TimelineAxis;module.exports=exports["default"]},3166:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=LastTickValue;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function LastTickValue(_ref){var x=_ref.x,marginTop=_ref.marginTop,value=_ref.value;return _react2.default.createElement("g",{transform:"translate("+x+", "+marginTop+")"},_react2.default.createElement("text",{textAnchor:"middle",dy:"0",transform:"translate(0, -8)"},value))}LastTickValue.requiresSVG=true;module.exports=exports["default"]},3167:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _templateObject=_taggedTemplateLiteral(["\n  border-bottom: 1px solid ",";\n  padding-bottom: ",";\n"],["\n  border-bottom: 1px solid ",";\n  padding-bottom: ",";\n"]),_templateObject2=_taggedTemplateLiteral(["\n  color: ",";\n  padding-top: ",";\n"],["\n  color: ",";\n  padding-top: ",";\n"]);exports.default=AgentMarker;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _eui=__webpack_require__(2);var _Legend=__webpack_require__(496);var _Legend2=_interopRequireDefault(_Legend);var _variables=__webpack_require__(26);var _styledComponents=__webpack_require__(18);var _styledComponents2=_interopRequireDefault(_styledComponents);var _formatters=__webpack_require__(198);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var NameContainer=_styledComponents2.default.div(_templateObject,_variables.colors.gray3,(0,_variables.px)(_variables.units.half));var TimeContainer=_styledComponents2.default.div(_templateObject2,_variables.colors.gray3,(0,_variables.px)(_variables.units.half));function AgentMarker(_ref){var agentMark=_ref.agentMark,x=_ref.x;var legendWidth=11;return _react2.default.createElement("div",{style:{position:"absolute",left:(0,_variables.px)(x-legendWidth/2),bottom:0}},_react2.default.createElement(_eui.EuiToolTip,{id:agentMark.name,position:"top",content:_react2.default.createElement("div",null,_react2.default.createElement(NameContainer,null,agentMark.name),_react2.default.createElement(TimeContainer,null,(0,_formatters.asTime)(agentMark.us)))},_react2.default.createElement(_Legend2.default,{clickable:true,color:_variables.colors.gray3})))}AgentMarker.propTypes={agentMark:_propTypes2.default.object.isRequired,x:_propTypes2.default.number.isRequired};module.exports=exports["default"]},3168:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _reactVis=__webpack_require__(247);var _variables=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var VerticalLines=function(_PureComponent){_inherits(VerticalLines,_PureComponent);function VerticalLines(){_classCallCheck(this,VerticalLines);return _possibleConstructorReturn(this,(VerticalLines.__proto__||Object.getPrototypeOf(VerticalLines)).apply(this,arguments))}_createClass(VerticalLines,[{key:"render",value:function render(){var traceRootDuration=this.props.traceRootDuration;var _props$plotValues=this.props.plotValues,width=_props$plotValues.width,height=_props$plotValues.height,margins=_props$plotValues.margins,xDomain=_props$plotValues.xDomain,tickValues=_props$plotValues.tickValues;var agentMarkTimes=this.props.agentMarks.map(function(_ref){var us=_ref.us;return us});return _react2.default.createElement("div",{style:{position:"absolute",top:0,left:0}},_react2.default.createElement(_reactVis.XYPlot,{dontCheckIfEmpty:true,width:width,height:height+margins.top,margin:margins,xDomain:xDomain},_react2.default.createElement(_reactVis.VerticalGridLines,{tickValues:tickValues,style:{stroke:_variables.colors.gray5}}),_react2.default.createElement(_reactVis.VerticalGridLines,{tickValues:agentMarkTimes,style:{stroke:_variables.colors.gray3}}),traceRootDuration&&_react2.default.createElement(_reactVis.VerticalGridLines,{tickValues:[traceRootDuration],style:{stroke:_variables.colors.gray3}})))}}]);return VerticalLines}(_react.PureComponent);VerticalLines.propTypes={plotValues:_propTypes2.default.object.isRequired,agentMarks:_propTypes2.default.array};VerticalLines.defaultProps={agentMarks:[]};exports.default=VerticalLines;module.exports=exports["default"]},3169:function(module,exports,__webpack_require__){"use strict";var _templateObject=_taggedTemplateLiteral(["\n  margin-top: ",";\n"],["\n  margin-top: ",";\n"]),_templateObject2=_taggedTemplateLiteral(["\n  font-weight: bold;\n"],["\n  font-weight: bold;\n"]);function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var lodash_1=__webpack_require__(1);var react_1=tslib_1.__importStar(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var constants_1=__webpack_require__(179);var variables_1=__webpack_require__(26);var DatabaseContext_1=__webpack_require__(3170);var HttpContext_1=__webpack_require__(3172);var StickySpanProperties_1=__webpack_require__(3173);var DiscoverSpanButton_1=__webpack_require__(3174);var Stacktrace_1=__webpack_require__(1123);var FlyoutTopLevelProperties_1=__webpack_require__(1142);var StackTraceContainer=styled_components_1.default.div(_templateObject,variables_1.px(variables_1.unit));var TagName=styled_components_1.default.div(_templateObject2);function SpanFlyout(_ref){var span=_ref.span,parentTransaction=_ref.parentTransaction,totalDuration=_ref.totalDuration,onClose=_ref.onClose;if(!span){return null}var stackframes=span.span.stacktrace;var codeLanguage=lodash_1.get(span,constants_1.SERVICE_LANGUAGE_NAME);var dbContext=span.context.db;var httpContext=span.context.http;var tagContext=span.context.tags;var tags=lodash_1.keys(tagContext).map(function(key){return{key:key,value:lodash_1.get(tagContext,key)}});return react_1.default.createElement(eui_1.EuiPortal,null,react_1.default.createElement(eui_1.EuiFlyout,{onClose:onClose,size:"m",ownFocus:true},react_1.default.createElement(eui_1.EuiFlyoutHeader,{hasBorder:true},react_1.default.createElement(eui_1.EuiFlexGroup,null,react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(eui_1.EuiTitle,null,react_1.default.createElement("h2",null,"Span details"))),react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(DiscoverSpanButton_1.DiscoverSpanButton,{span:span},react_1.default.createElement(eui_1.EuiButtonEmpty,{iconType:"discoverApp"},"View span in Discover"))))),react_1.default.createElement(eui_1.EuiFlyoutBody,null,react_1.default.createElement(FlyoutTopLevelProperties_1.FlyoutTopLevelProperties,{transaction:parentTransaction}),react_1.default.createElement(eui_1.EuiHorizontalRule,null),react_1.default.createElement(StickySpanProperties_1.StickySpanProperties,{span:span,totalDuration:totalDuration}),react_1.default.createElement(eui_1.EuiHorizontalRule,null),react_1.default.createElement(eui_1.EuiTabbedContent,{tabs:[{id:"stack-trace",name:"Stack Trace",content:react_1.default.createElement(react_1.Fragment,null,react_1.default.createElement(HttpContext_1.HttpContext,{httpContext:httpContext}),react_1.default.createElement(DatabaseContext_1.DatabaseContext,{dbContext:dbContext}),react_1.default.createElement(StackTraceContainer,null,react_1.default.createElement(Stacktrace_1.Stacktrace,{stackframes:stackframes,codeLanguage:codeLanguage})))},{id:"tags",name:"Tags",content:react_1.default.createElement(react_1.Fragment,null,react_1.default.createElement(eui_1.EuiBasicTable,{columns:[{name:"",field:"key",render:function render(key){return react_1.default.createElement(TagName,null,key)}},{name:"",field:"value"}],items:tags}))}]}))))}exports.SpanFlyout=SpanFlyout},3170:function(module,exports,__webpack_require__){"use strict";var _templateObject=_taggedTemplateLiteral(["\n  margin-top: ",";\n  padding: "," ",";\n  background: ",";\n  border-radius: ",";\n  border: 1px solid ",";\n  font-family: ",";\n"],["\n  margin-top: ",";\n  padding: "," ",";\n  background: ",";\n  border-radius: ",";\n  border: 1px solid ",";\n  font-family: ",";\n"]);function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importStar(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var variables_1=__webpack_require__(26);var light_1=tslib_1.__importStar(__webpack_require__(712));var styles_1=__webpack_require__(1141);var sql_1=tslib_1.__importDefault(__webpack_require__(4963));var eui_1=__webpack_require__(2);light_1.registerLanguage("sql",sql_1.default);var DatabaseStatement=styled_components_1.default.div(_templateObject,variables_1.px(variables_1.unit),variables_1.px(variables_1.units.half),variables_1.px(variables_1.unit),variables_1.colors.yellow,variables_1.borderRadius,variables_1.colors.gray4,variables_1.fontFamilyCode);function DatabaseContext(_ref){var dbContext=_ref.dbContext;if(!dbContext||!dbContext.statement){return null}if(dbContext.type!=="sql"){return react_1.default.createElement(DatabaseStatement,null,dbContext.statement)}return react_1.default.createElement(react_1.Fragment,null,react_1.default.createElement(eui_1.EuiTitle,{size:"xs"},react_1.default.createElement("h3",null,"Database statement")),react_1.default.createElement(DatabaseStatement,null,react_1.default.createElement(light_1.default,{language:"sql",style:styles_1.xcode,customStyle:{color:null,background:null,padding:null,lineHeight:variables_1.px(variables_1.unit*1.5),whiteSpace:"pre-wrap",overflowX:"scroll"}},dbContext.statement)))}exports.DatabaseContext=DatabaseContext},3172:function(module,exports,__webpack_require__){"use strict";var _templateObject=_taggedTemplateLiteral(["\n  margin-top: ",";\n  padding: "," ",";\n  background: ",";\n  border-radius: ",";\n  border: 1px solid ",";\n  font-family: ",";\n"],["\n  margin-top: ",";\n  padding: "," ",";\n  background: ",";\n  border-radius: ",";\n  border: 1px solid ",";\n  font-family: ",";\n"]);function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importStar(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var variables_1=__webpack_require__(26);var eui_1=__webpack_require__(2);var DatabaseStatement=styled_components_1.default.div(_templateObject,variables_1.px(variables_1.unit),variables_1.px(variables_1.units.half),variables_1.px(variables_1.unit),variables_1.colors.gray5,variables_1.borderRadius,variables_1.colors.gray4,variables_1.fontFamilyCode);function HttpContext(_ref){var httpContext=_ref.httpContext;if(!httpContext||!httpContext.url){return null}return react_1.default.createElement(react_1.Fragment,null,react_1.default.createElement(eui_1.EuiTitle,{size:"xs"},react_1.default.createElement("h3",null,"HTTP URL")),react_1.default.createElement(DatabaseStatement,null,httpContext.url))}exports.HttpContext=HttpContext},3173:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var lodash_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var constants_1=__webpack_require__(179);var formatters_1=__webpack_require__(198);var StickyProperties_1=__webpack_require__(495);function getSpanLabel(type){switch(type){case"db":return"DB";case"hard-navigation":return"Navigation timing";default:return type}}function getPrimaryType(type){return lodash_1.first(type.split("."))}function StickySpanProperties(_ref){var span=_ref.span,totalDuration=_ref.totalDuration;if(!totalDuration){return null}var spanName=span.span.name;var spanDuration=span.span.duration.us;var spanTypeLabel=getSpanLabel(getPrimaryType(span.span.type));var stickyProperties=[{label:"Name",fieldName:constants_1.SPAN_NAME,val:spanName||"N/A",truncated:true,width:"50%"},{fieldName:constants_1.SPAN_TYPE,label:"Type",val:spanTypeLabel,truncated:true,widht:"50%"},{fieldName:constants_1.SPAN_DURATION,label:"Duration",val:formatters_1.asMillis(spanDuration),width:"50%"},{label:"% of transaction",val:formatters_1.asPercent(spanDuration,totalDuration),width:"50%"}];return react_1.default.createElement(StickyProperties_1.StickyProperties,{stickyProperties:stickyProperties})}exports.StickySpanProperties=StickySpanProperties},3174:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var constants_1=__webpack_require__(179);var DiscoverButton_1=__webpack_require__(689);function getDiscoverQuery(span){var query=span.version==="v2"?constants_1.SPAN_HEX_ID+':"'+span.span.hex_id+'"':constants_1.SPAN_ID+':"'+span.span.id+'"';return{_a:{interval:"auto",query:{language:"lucene",query:query}}}}exports.DiscoverSpanButton=function(_ref){var span=_ref.span,children=_ref.children;return react_1.default.createElement(DiscoverButton_1.DiscoverButton,{query:getDiscoverQuery(span),children:children})}},3175:function(module,exports,__webpack_require__){"use strict";var _templateObject=_taggedTemplateLiteral(["\n  width: 100%;\n\n  @media (min-width: 800px) {\n    width: 90%;\n  }\n\n  @media (min-width: 1000px) {\n    width: 70%;\n  }\n\n  @media (min-width: 1400px) {\n    width: 50%;\n  }\n\n  @media (min-width: 2000px) {\n    width: 35%;\n  }\n"],["\n  width: 100%;\n\n  @media (min-width: 800px) {\n    width: 90%;\n  }\n\n  @media (min-width: 1000px) {\n    width: 70%;\n  }\n\n  @media (min-width: 1400px) {\n    width: 50%;\n  }\n\n  @media (min-width: 2000px) {\n    width: 35%;\n  }\n"]);function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var lodash_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var TransactionActionMenu_1=__webpack_require__(1139);var agents_1=__webpack_require__(1122);var StickyTransactionProperties_1=__webpack_require__(1140);var TransactionPropertiesTableForFlyout_1=__webpack_require__(3176);var FlyoutTopLevelProperties_1=__webpack_require__(1142);var ResponsiveFlyout=styled_components_1.default(eui_1.EuiFlyout)(_templateObject);function DroppedSpansWarning(_ref){var transactionDoc=_ref.transactionDoc;var dropped=lodash_1.get(transactionDoc,"transaction.span_count.dropped.total",0);if(dropped===0){return null}var url=agents_1.APM_AGENT_DROPPED_SPANS_DOCS[transactionDoc.context.service.agent.name];var docsLink=url?react_1.default.createElement(eui_1.EuiLink,{href:url,target:"_blank"},"Learn more."):null;return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(eui_1.EuiCallOut,{size:"s"},"The APM agent that reported this transaction dropped ",dropped," spans or more based on its configuration. ",docsLink),react_1.default.createElement(eui_1.EuiHorizontalRule,null))}function TransactionFlyout(_ref2){var transactionDoc=_ref2.transaction,onClose=_ref2.onClose,location=_ref2.location,urlParams=_ref2.urlParams,waterfall=_ref2.waterfall;if(!transactionDoc){return null}return react_1.default.createElement(eui_1.EuiPortal,null,react_1.default.createElement(ResponsiveFlyout,{onClose:onClose,ownFocus:true,maxWidth:false},react_1.default.createElement(eui_1.EuiFlyoutHeader,{hasBorder:true},react_1.default.createElement(eui_1.EuiFlexGroup,null,react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(eui_1.EuiTitle,null,react_1.default.createElement("h4",null,"Transaction details"))),react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(TransactionActionMenu_1.TransactionActionMenu,{transaction:transactionDoc,location:location})))),react_1.default.createElement(eui_1.EuiFlyoutBody,null,react_1.default.createElement(FlyoutTopLevelProperties_1.FlyoutTopLevelProperties,{transaction:transactionDoc}),react_1.default.createElement(eui_1.EuiHorizontalRule,null),react_1.default.createElement(StickyTransactionProperties_1.StickyTransactionProperties,{transaction:transactionDoc,totalDuration:waterfall.traceRootDuration}),react_1.default.createElement(eui_1.EuiHorizontalRule,null),react_1.default.createElement(DroppedSpansWarning,{transactionDoc:transactionDoc}),react_1.default.createElement(TransactionPropertiesTableForFlyout_1.TransactionPropertiesTableForFlyout,{transaction:transactionDoc,location:location,urlParams:urlParams}))))}exports.TransactionFlyout=TransactionFlyout},3176:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var lodash_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var url_1=__webpack_require__(44);var PropertiesTable_1=__webpack_require__(494);function getCurrentTab(){var tabs=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var selectedTab=arguments[1];return selectedTab&&tabs.includes(selectedTab)?selectedTab:lodash_1.first(tabs)}function getTabs(transactionData){var dynamicProps=Object.keys(transactionData.context||{});return PropertiesTable_1.getPropertyTabNames(dynamicProps)}exports.TransactionPropertiesTableForFlyout=function(_ref){var location=_ref.location,transaction=_ref.transaction,urlParams=_ref.urlParams;var tabs=getTabs(transaction);var currentTab=getCurrentTab(tabs,urlParams.flyoutDetailTab);var agentName=transaction.context.service.agent.name;return react_1.default.createElement("div",null,react_1.default.createElement(eui_1.EuiTabs,null,tabs.map(function(key){return react_1.default.createElement(eui_1.EuiTab,{onClick:function onClick(){url_1.history.replace(_extends({},location,{search:url_1.fromQuery(_extends({},url_1.toQuery(location.search),{flyoutDetailTab:key}))}))},isSelected:currentTab===key,key:key},lodash_1.capitalize(key))})),react_1.default.createElement(eui_1.EuiSpacer,null),react_1.default.createElement(PropertiesTable_1.PropertiesTable,{propData:lodash_1.get(transaction.context,currentTab),propKey:currentTab,agentName:agentName}))}},3177:function(module,exports,__webpack_require__){"use strict";var _templateObject=_taggedTemplateLiteral(["\n  position: relative;\n  display: block;\n  user-select: none;\n  padding-top: ",";\n  padding-bottom: ",";\n  margin-right: ",";\n  margin-left: ",";\n  border-top: 1px solid ",";\n  background-color: ",";\n  cursor: pointer;\n  &:hover {\n    background-color: ",";\n  }\n"],["\n  position: relative;\n  display: block;\n  user-select: none;\n  padding-top: ",";\n  padding-bottom: ",";\n  margin-right: ",";\n  margin-left: ",";\n  border-top: 1px solid ",";\n  background-color: ",";\n  cursor: pointer;\n  &:hover {\n    background-color: ",";\n  }\n"]),_templateObject2=_taggedTemplateLiteral(["\n  box-sizing: border-box;\n  position: relative;\n  height: ",";\n  min-width: 2px;\n  background-color: ",";\n"],["\n  box-sizing: border-box;\n  position: relative;\n  height: ",";\n  min-width: 2px;\n  background-color: ",";\n"]),_templateObject3=_taggedTemplateLiteral(["\n  position: absolute;\n  right: 0;\n  display: flex;\n  align-items: center;\n  height: ",";\n\n  /* add margin to all direct descendants */\n  & > * {\n    margin-right: ",";\n  }\n"],["\n  position: absolute;\n  right: 0;\n  display: flex;\n  align-items: center;\n  height: ",";\n\n  /* add margin to all direct descendants */\n  & > * {\n    margin-right: ",";\n  }\n"]),_templateObject4=_taggedTemplateLiteral(["\n  color: ",";\n  font-weight: normal;\n  white-space: nowrap;\n"],["\n  color: ",";\n  font-weight: normal;\n  white-space: nowrap;\n"]),_templateObject5=_taggedTemplateLiteral(["\n  font-weight: 600;\n  white-space: nowrap;\n"],["\n  font-weight: 600;\n  white-space: nowrap;\n"]);function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var eui_1=__webpack_require__(2);var formatters_1=__webpack_require__(198);var variables_1=__webpack_require__(26);var Container=styled_components_1.default("div")(_templateObject,variables_1.px(variables_1.units.half),variables_1.px(variables_1.units.plus),function(props){return variables_1.px(props.timelineMargins.right)},function(props){return variables_1.px(props.timelineMargins.left)},variables_1.colors.gray4,function(props){return props.isSelected?variables_1.colors.gray5:"initial"},variables_1.colors.gray5);var ItemBar=styled_components_1.default("div")(_templateObject2,variables_1.px(variables_1.unit),function(props){return props.color});var ItemText=styled_components_1.default.span(_templateObject3,variables_1.px(variables_1.units.plus),variables_1.px(variables_1.units.half));var SpanNameLabel=styled_components_1.default.span(_templateObject4,variables_1.colors.gray2);var TransactionNameLabel=styled_components_1.default.span(_templateObject5);function PrefixIcon(_ref){var item=_ref.item;if(item.docType==="span"){var isDbType=item.span.span.type.startsWith("db");if(isDbType){return react_1.default.createElement(eui_1.EuiIcon,{type:"database"})}return null}var isRumAgent=item.transaction.context.service.agent.name==="js-base";if(isRumAgent){return react_1.default.createElement(eui_1.EuiIcon,{type:"globe"})}return react_1.default.createElement(eui_1.EuiIcon,{type:"merge"})}function Duration(_ref2){var item=_ref2.item;return react_1.default.createElement(eui_1.EuiText,{color:"subdued",size:"xs"},formatters_1.asTime(item.duration))}function HttpStatusCode(_ref3){var item=_ref3.item;var httpStatusCode=item.docType==="transaction"&&item.transaction.transaction.type==="request"?item.transaction.transaction.result:undefined;if(!httpStatusCode){return null}return react_1.default.createElement(eui_1.EuiText,{size:"xs"},httpStatusCode)}function NameLabel(_ref4){var item=_ref4.item;var StyledLabel=item.docType==="span"?SpanNameLabel:TransactionNameLabel;return react_1.default.createElement(StyledLabel,null,item.name)}function WaterfallItem(_ref5){var timelineMargins=_ref5.timelineMargins,totalDuration=_ref5.totalDuration,item=_ref5.item,color=_ref5.color,isSelected=_ref5.isSelected,onClick=_ref5.onClick;if(!totalDuration){return null}var width=item.duration/totalDuration*100;var left=(item.offset+item.skew)/totalDuration*100;return react_1.default.createElement(Container,{type:item.docType,timelineMargins:timelineMargins,isSelected:isSelected,onClick:onClick},react_1.default.createElement(ItemBar,{style:{left:left+"%",width:width+"%"},color:color,type:item.docType}),react_1.default.createElement(ItemText,{style:{minWidth:Math.max(100-left,0)+"%"}},react_1.default.createElement(PrefixIcon,{item:item}),react_1.default.createElement(HttpStatusCode,{item:item}),react_1.default.createElement(NameLabel,{item:item}),react_1.default.createElement(Duration,{item:item})))}exports.WaterfallItem=WaterfallItem},3178:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var HistoryTabs_1=__webpack_require__(1130);var KueryBar_1=__webpack_require__(492);var SetupInstructionsLink_1=__webpack_require__(1143);var ServiceOverview_1=__webpack_require__(3179);var TraceOverview_1=__webpack_require__(3183);var homeTabs=[{path:"/services",name:"Services",render:function render(props){return react_1.default.createElement(ServiceOverview_1.ServiceOverview,Object.assign({},props))}},{path:"/traces",name:"Traces",render:function render(props){return react_1.default.createElement(TraceOverview_1.TraceOverview,Object.assign({},props))}}];function Home(){return react_1.default.createElement("div",null,react_1.default.createElement(eui_1.EuiFlexGroup,{justifyContent:"spaceBetween"},react_1.default.createElement(eui_1.EuiFlexItem,null,react_1.default.createElement(eui_1.EuiTitle,{size:"l"},react_1.default.createElement("h1",null,"APM"))),react_1.default.createElement(eui_1.EuiFlexItem,{grow:false},react_1.default.createElement(SetupInstructionsLink_1.SetupInstructionsLink,null))),react_1.default.createElement(eui_1.EuiSpacer,null),react_1.default.createElement(KueryBar_1.KueryBar,null),react_1.default.createElement(HistoryTabs_1.HistoryTabs,{tabs:homeTabs}))}exports.Home=Home},3179:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_redux_1=__webpack_require__(14);var serviceList_1=__webpack_require__(1144);var urlParams_1=__webpack_require__(227);var view_1=__webpack_require__(3180);function mapStateToProps(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return{serviceList:serviceList_1.getServiceList(state),urlParams:urlParams_1.getUrlParams(state)}}exports.ServiceOverview=react_redux_1.connect(mapStateToProps)(view_1.ServiceOverview)},3180:function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importStar(__webpack_require__(0));var status_check_1=__webpack_require__(3181);var serviceList_1=__webpack_require__(1144);var EmptyMessage_1=__webpack_require__(349);var SetupInstructionsLink_1=__webpack_require__(1143);var ServiceList_1=__webpack_require__(3182);var ServiceOverview=function(_react_1$Component){_inherits(ServiceOverview,_react_1$Component);function ServiceOverview(){_classCallCheck(this,ServiceOverview);var _this=_possibleConstructorReturn(this,(ServiceOverview.__proto__||Object.getPrototypeOf(ServiceOverview)).apply(this,arguments));_this.state={historicalDataFound:true};return _this}_createClass(ServiceOverview,[{key:"checkForHistoricalData",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var result;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return status_check_1.loadAgentStatus();case 2:result=_context.sent;this.setState({historicalDataFound:result.dataFound});case 4:case"end":return _context.stop()}}},_callee,this)}));function checkForHistoricalData(){return _ref.apply(this,arguments)}return checkForHistoricalData}()},{key:"componentDidMount",value:function componentDidMount(){this.checkForHistoricalData()}},{key:"render",value:function render(){var _this2=this;var urlParams=this.props.urlParams;var historicalDataFound=this.state.historicalDataFound;var noItemsMessage=react_1.default.createElement(EmptyMessage_1.EmptyMessage,{heading:historicalDataFound?"No services were found":"Looks like you don't have any services with APM installed. Let's add some!",subheading:!historicalDataFound?react_1.default.createElement(SetupInstructionsLink_1.SetupInstructionsLink,{buttonFill:true}):null});return react_1.default.createElement("div",null,react_1.default.createElement(serviceList_1.ServiceListRequest,{urlParams:urlParams,render:function render(){return react_1.default.createElement(ServiceList_1.ServiceList,{items:_this2.props.serviceList.data,noItemsMessage:noItemsMessage})}}))}}]);return ServiceOverview}(react_1.Component);exports.ServiceOverview=ServiceOverview},3181:function(module,exports,__webpack_require__){"use strict";var loadServerStatus=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",callApi_1.callApi({pathname:"/api/apm/status/server"}));case 1:case"end":return _context.stop()}}},_callee,this)}));return function loadServerStatus(){return _ref.apply(this,arguments)}}();var loadAgentStatus=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return",callApi_1.callApi({pathname:"/api/apm/status/agent"}));case 1:case"end":return _context2.stop()}}},_callee2,this)}));return function loadAgentStatus(){return _ref2.apply(this,arguments)}}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}Object.defineProperty(exports,"__esModule",{value:true});var callApi_1=__webpack_require__(225);exports.loadServerStatus=loadServerStatus;exports.loadAgentStatus=loadAgentStatus},3182:function(module,exports,__webpack_require__){"use strict";var _templateObject=_taggedTemplateLiteral(["\n  font-size: ",";\n  ",";\n"],["\n  font-size: ",";\n  ",";\n"]);function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var variables_1=__webpack_require__(26);var formatters_1=__webpack_require__(198);var url_1=__webpack_require__(44);var ManagedTable_1=__webpack_require__(696);function formatNumber(value){if(value===0){return"0"}else if(value<=.1){return"< 0.1"}else{return formatters_1.asDecimal(value)}}function formatString(value){return value||"N/A"}var AppLink=styled_components_1.default(url_1.RelativeLink)(_templateObject,variables_1.fontSizes.large,variables_1.truncate("100%"));exports.SERVICE_COLUMNS=[{field:"serviceName",name:"Name",width:"50%",sortable:true,render:function render(serviceName){return react_1.default.createElement(eui_1.EuiToolTip,{content:formatString(serviceName),id:"service-name-tooltip"},react_1.default.createElement(AppLink,{path:"/"+serviceName+"/transactions"},formatString(serviceName)))}},{field:"agentName",name:"Agent",sortable:true,render:function render(agentName){return formatString(agentName)}},{field:"avgResponseTime",name:"Avg. response time",sortable:true,dataType:"number",render:function render(value){return formatters_1.asMillis(value)}},{field:"transactionsPerMinute",name:"Trans. per minute",sortable:true,dataType:"number",render:function render(value){return formatNumber(value)+" tpm"}},{field:"errorsPerMinute",name:"Errors per minute",sortable:true,dataType:"number",render:function render(value){return formatNumber(value)+" err."}}];function ServiceList(_ref){var _ref$items=_ref.items,items=_ref$items===undefined?[]:_ref$items,noItemsMessage=_ref.noItemsMessage;return react_1.default.createElement(ManagedTable_1.ManagedTable,{columns:exports.SERVICE_COLUMNS,items:items,noItemsMessage:noItemsMessage,initialSort:{field:"serviceName",direction:"asc"}})}exports.ServiceList=ServiceList},3183:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_redux_1=__webpack_require__(14);var urlParams_1=__webpack_require__(227);var view_1=__webpack_require__(3184);function mapStateToProps(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return{urlParams:urlParams_1.getUrlParams(state)}}exports.TraceOverview=react_redux_1.connect(mapStateToProps)(view_1.TraceOverview)},3184:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var traceList_1=__webpack_require__(3185);var EmptyMessage_1=__webpack_require__(349);var TraceList_1=__webpack_require__(3186);function TraceOverview(props){var urlParams=props.urlParams;return react_1.default.createElement(traceList_1.TraceListRequest,{urlParams:urlParams,render:function render(_ref){var data=_ref.data,status=_ref.status;return react_1.default.createElement(TraceList_1.TraceList,{items:data,isLoading:status==="LOADING",noItemsMessage:react_1.default.createElement(EmptyMessage_1.EmptyMessage,{heading:"No traces found for this query"})})}})}exports.TraceOverview=TraceOverview},3185:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.selectTraceList=undefined;exports.TraceListRequest=TraceListRequest;var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _reactReduxRequest=__webpack_require__(74);var _reselect=__webpack_require__(27);var _traces=__webpack_require__(1138);var _helpers=__webpack_require__(226);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ID="traceList";var INITIAL_DATA=[];var withInitialData=(0,_helpers.createInitialDataSelector)(INITIAL_DATA);var selectRRR=function selectRRR(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return state.reactReduxRequest};var selectTraceList=exports.selectTraceList=(0,_reselect.createSelector)([selectRRR],function(reactReduxRequest){return withInitialData(reactReduxRequest[ID])});function TraceListRequest(_ref){var _ref$urlParams=_ref.urlParams,urlParams=_ref$urlParams===undefined?{}:_ref$urlParams,render=_ref.render;var start=urlParams.start,end=urlParams.end,kuery=urlParams.kuery;if(!start||!end){return null}return _react2.default.createElement(_reactReduxRequest.Request,{id:ID,fn:_traces.loadTraceList,args:[{start:start,end:end,kuery:kuery}],selector:selectTraceList,render:render})}},3186:function(module,exports,__webpack_require__){"use strict";var _templateObject=_taggedTemplateLiteral(["\n  font-size: ",";\n  ",";\n"],["\n  font-size: ",";\n  ",";\n"]);function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var variables_1=__webpack_require__(26);var formatters_1=__webpack_require__(198);var ImpactBar_1=__webpack_require__(1134);var ManagedTable_1=__webpack_require__(696);var TooltipOverlay_1=tslib_1.__importDefault(__webpack_require__(691));var TransactionLink_1=__webpack_require__(697);var StyledTransactionLink=styled_components_1.default(TransactionLink_1.TransactionLink)(_templateObject,variables_1.fontSizes.large,variables_1.truncate("100%"));var traceListColumns=[{field:"name",name:"Name",width:"40%",sortable:true,render:function render(name,group){return react_1.default.createElement(TooltipOverlay_1.default,{content:name},react_1.default.createElement(StyledTransactionLink,{transaction:group.sample},name))}},{field:"sample.context.service.name",name:"Originating service",sortable:true},{field:"averageResponseTime",name:"Avg. response time",sortable:true,dataType:"number",render:function render(value){return formatters_1.asMillis(value)}},{field:"transactionsPerMinute",name:"Traces per minute",sortable:true,dataType:"number",render:function render(value){return value.toLocaleString()+" tpm"}},{field:"impact",name:"Impact",width:"20%",align:"right",sortable:true,render:function render(value){return react_1.default.createElement(ImpactBar_1.ImpactBar,{value:value})}}];function TraceList(_ref){var _ref$items=_ref.items,items=_ref$items===undefined?[]:_ref$items,noItemsMessage=_ref.noItemsMessage,isLoading=_ref.isLoading;var noItems=isLoading?null:noItemsMessage;return react_1.default.createElement(ManagedTable_1.ManagedTable,{columns:traceListColumns,items:items,initialSort:{field:"impact",direction:"desc"},noItemsMessage:noItems,initialPageSize:25})}exports.TraceList=TraceList},3187:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ScrollToTopOnPathChange=function(_Component){_inherits(ScrollToTopOnPathChange,_Component);function ScrollToTopOnPathChange(){_classCallCheck(this,ScrollToTopOnPathChange);return _possibleConstructorReturn(this,(ScrollToTopOnPathChange.__proto__||Object.getPrototypeOf(ScrollToTopOnPathChange)).apply(this,arguments))}_createClass(ScrollToTopOnPathChange,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){if(this.props.location.pathname!==prevProps.location.pathname){window.scrollTo(0,0)}}},{key:"render",value:function render(){return null}}]);return ScrollToTopOnPathChange}(_react.Component);exports.default=ScrollToTopOnPathChange;module.exports=exports["default"]},3188:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _reactRedux=__webpack_require__(14);var _view=__webpack_require__(3189);var _view2=_interopRequireDefault(_view);var _location=__webpack_require__(687);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mapDispatchToProps={updateLocation:_location.updateLocation};exports.default=(0,_reactRedux.connect)(null,mapDispatchToProps)(_view2.default);module.exports=exports["default"]},3189:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ConnectRouterToRedux=function(_Component){_inherits(ConnectRouterToRedux,_Component);function ConnectRouterToRedux(){_classCallCheck(this,ConnectRouterToRedux);return _possibleConstructorReturn(this,(ConnectRouterToRedux.__proto__||Object.getPrototypeOf(ConnectRouterToRedux)).apply(this,arguments))}_createClass(ConnectRouterToRedux,[{key:"componentDidMount",value:function componentDidMount(){this.props.updateLocation(this.props.location)}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.props.updateLocation(this.props.location)}},{key:"render",value:function render(){return null}}]);return ConnectRouterToRedux}(_react.Component);ConnectRouterToRedux.propTypes={location:_propTypes2.default.object.isRequired};exports.default=ConnectRouterToRedux;module.exports=exports["default"]},3190:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _reactRouterBreadcrumbsHoc=__webpack_require__(5011);var _lodash=__webpack_require__(1);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);var _url=__webpack_require__(44);var _routeConfig=__webpack_require__(1115);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Breadcrumbs=function(_React$Component){_inherits(Breadcrumbs,_React$Component);function Breadcrumbs(){_classCallCheck(this,Breadcrumbs);return _possibleConstructorReturn(this,(Breadcrumbs.__proto__||Object.getPrototypeOf(Breadcrumbs)).apply(this,arguments))}_createClass(Breadcrumbs,[{key:"updateHeaderBreadcrumbs",value:function updateHeaderBreadcrumbs(){var _toQuery=(0,_url.toQuery)(this.props.location.search),_toQuery$_g=_toQuery._g,_g=_toQuery$_g===undefined?"":_toQuery$_g,_toQuery$kuery=_toQuery.kuery,kuery=_toQuery$kuery===undefined?"":_toQuery$kuery;var breadcrumbs=this.props.breadcrumbs.map(function(_ref){var breadcrumb=_ref.breadcrumb,match=_ref.match;return{text:breadcrumb,href:"#"+match.url+"?_g="+_g+"&kuery="+kuery}});_chrome2.default.breadcrumbs.set(breadcrumbs)}},{key:"componentDidMount",value:function componentDidMount(){this.updateHeaderBreadcrumbs()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.updateHeaderBreadcrumbs()}},{key:"render",value:function render(){var _props=this.props,breadcrumbs=_props.breadcrumbs,location=_props.location,showPluginBreadcrumbs=_props.showPluginBreadcrumbs;var _toQuery2=(0,_url.toQuery)(location.search),_toQuery2$_g=_toQuery2._g,_g=_toQuery2$_g===undefined?"":_toQuery2$_g,_toQuery2$kuery=_toQuery2.kuery,kuery=_toQuery2$kuery===undefined?"":_toQuery2$kuery;if(!showPluginBreadcrumbs){return null}return _react2.default.createElement("div",{className:"kuiLocalBreadcrumbs"},breadcrumbs.map(function(_ref2,i){var breadcrumb=_ref2.breadcrumb,path=_ref2.path,match=_ref2.match;var isLast=i===breadcrumbs.length-1;return _react2.default.createElement("div",{key:path,className:"kuiLocalBreadcrumb",style:{lineHeight:"29px"}},isLast?_react2.default.createElement("span",{ref:function ref(node){if(node&&document.title!==node.textContent){document.title=(0,_lodash.capitalize)(node.textContent)}}},breadcrumb):_react2.default.createElement("a",{href:"#"+match.url+"?_g="+_g+"&kuery="+kuery},breadcrumb))}))}}]);return Breadcrumbs}(_react2.default.Component);var flatRoutes=(0,_lodash.flatten)(_routeConfig.routes.map(function(route){return route.switch?route.routes:route}));exports.default=(0,_reactRouterBreadcrumbsHoc.withBreadcrumbs)(flatRoutes)(Breadcrumbs);module.exports=exports["default"]},3192:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initTimepicker=initTimepicker;var _modules=__webpack_require__(4);var _chrome=__webpack_require__(8);var _chrome2=_interopRequireDefault(_chrome);__webpack_require__(207);var _urlParams=__webpack_require__(227);var _timefilter=__webpack_require__(16);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var currentInterval=void 0;var waitForAngularReady=new Promise(function(resolve){var checkInterval=setInterval(function(){var hasElm=!!document.querySelector("#react-apm-breadcrumbs");if(hasElm){clearInterval(checkInterval);resolve()}},10)});function initTimepicker(history,dispatch){return new Promise(function(resolve){_chrome2.default.getUiSettingsClient().overrideLocalDefault("timepicker:timeDefaults",JSON.stringify({from:"now-24h",to:"now",mode:"quick"}));_modules.uiModules.get("app/apm",[]).controller("TimePickerController",function($scope,globalState,$rootScope,i18n){$scope.topNavMenu=[];$scope.topNavMenu.push({key:"APM feedback",label:i18n("xpack.apm.topNav.apmFeedbackLabel",{defaultMessage:"APM feedback"}),description:i18n("xpack.apm.topNav.apmFeedbackDescription",{defaultMessage:"APM feedback"}),tooltip:i18n("xpack.apm.topNav.apmFeedbackTooltip",{defaultMessage:"Provide feedback on APM"}),template:__webpack_require__(3193)});history.listen(function(){updateRefreshRate(dispatch);globalState.fetch()});$scope.$listen(_timefilter.timefilter,"timeUpdate",function(){return dispatch(updateTimePickerAction())});(0,_timefilter.registerTimefilterWithGlobalState)(globalState,$rootScope);_timefilter.timefilter.enableTimeRangeSelector();_timefilter.timefilter.enableAutoRefreshSelector();dispatch(updateTimePickerAction());updateRefreshRate(dispatch);Promise.all([waitForAngularReady]).then(resolve)})})}function updateTimePickerAction(){return(0,_urlParams.updateTimePicker)({min:_timefilter.timefilter.getBounds().min.toISOString(),max:_timefilter.timefilter.getBounds().max.toISOString()})}function updateRefreshRate(dispatch){var refreshInterval=_timefilter.timefilter.getRefreshInterval().value;if(currentInterval){clearInterval(currentInterval)}if(refreshInterval>0&&!_timefilter.timefilter.getRefreshInterval().pause){currentInterval=setInterval(function(){return dispatch(updateTimePickerAction())},refreshInterval)}}},3193:function(module,exports){module.exports='<div style="padding: 16px;">\n    <div class="euiText">\n        <h2>Provide APM feedback</h2>\n        <p>Please send us feedback by starting a new thread in our forum.\n            <br>Comments and suggestions are much appreciated. Thanks!\n        </p>\n    </div>\n    <br>\n    <a\n      href="https://discuss.elastic.co/c/apm"\n      target="_blank"\n      class="euiLink euiButton euiButton--primary euiButton--small euiButton--fill"\n      rel="noopener noreferrer"\n    >\n        <span class="euiButton__content">\n            <i class="fa fa-external-link" aria-hidden="true" style="margin-right: 5px;"></i>\n            <span>Submit feedback</span>\n        </span>\n    </a>\n</div>\n'},3194:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _configureStore=__webpack_require__(3195);var _configureStore2=_interopRequireDefault(_configureStore);var _configureStore3=__webpack_require__(3196);var _configureStore4=_interopRequireDefault(_configureStore3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var store=true?_configureStore2.default:undefined;exports.default=store;module.exports=exports["default"]},3195:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=configureStore;var _redux=__webpack_require__(28);var _reduxThunk=__webpack_require__(264);var _reduxThunk2=_interopRequireDefault(_reduxThunk);var _rootReducer=__webpack_require__(1145);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function configureStore(preloadedState){return(0,_redux.createStore)(_rootReducer.rootReducer,preloadedState,(0,_redux.applyMiddleware)(_reduxThunk2.default))}module.exports=exports["default"]},3196:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=configureStore;var _redux=__webpack_require__(28);var _reduxThunk=__webpack_require__(264);var _reduxThunk2=_interopRequireDefault(_reduxThunk);var _throttle=__webpack_require__(3197);var _throttle2=_interopRequireDefault(_throttle);var _rootReducer=__webpack_require__(1145);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function configureStore(preloadedState){var composeEnhancers=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_redux.compose;return(0,_redux.createStore)(_rootReducer.rootReducer,preloadedState,composeEnhancers((0,_redux.applyMiddleware)(_throttle2.default,_reduxThunk2.default)))}module.exports=exports["default"]},3197:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var MAX_DISPATCHES=50;var INTERVAL_MS=2e3;var IS_THROTTLED=false;var count=0;setInterval(function(){count=0},INTERVAL_MS);function throttle(){return function(next){return function(action){count+=1;if(count>MAX_DISPATCHES||IS_THROTTLED){IS_THROTTLED=true;console.error("Action was throttled",action);return{}}return next(action)}}}exports.default=throttle;module.exports=exports["default"]},3198:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _reactRedux=__webpack_require__(14);var _view=__webpack_require__(3199);var _view2=_interopRequireDefault(_view);var _lodash=__webpack_require__(1);var _index=__webpack_require__(688);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getIsLoading(state){return(0,_lodash.some)(state.reactReduxRequest,function(subState){return(0,_lodash.get)(subState,"status")===_index.STATUS.LOADING})}function mapStateToProps(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return{isLoading:getIsLoading(state)}}exports.default=(0,_reactRedux.connect)(mapStateToProps)(_view2.default);module.exports=exports["default"]},3199:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _eui=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=function(_ref){var isLoading=_ref.isLoading;return _react2.default.createElement(_eui.EuiDelayHide,{hide:!isLoading,minimumDuration:1e3,render:function render(){return _react2.default.createElement(_eui.EuiProgress,{size:"xs",position:"fixed"})}})};module.exports=exports["default"]},3200:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _index=__webpack_require__(688);var _license=__webpack_require__(1132);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function LicenseChecker(){return _react2.default.createElement(_license.LicenceRequest,{render:function render(_ref){var data=_ref.data,status=_ref.status;if(status===_index.STATUS.SUCCESS&&!data.license.isActive){window.location="#/invalid-license"}return null}})}exports.default=LicenseChecker;module.exports=exports["default"]},348:function(module,exports,__webpack_require__){"use strict";var getEncodedEsQuery=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(kuery){var indexPattern,esFilterQuery;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(kuery){_context.next=2;break}return _context.abrupt("return");case 2:_context.next=4;return kuery_1.getAPMIndexPatternForKuery();case 4:indexPattern=_context.sent;if(indexPattern){_context.next=7;break}return _context.abrupt("return");case 7:esFilterQuery=kuery_1.convertKueryToEsQuery(kuery,indexPattern);return _context.abrupt("return",encodeURIComponent(JSON.stringify(esFilterQuery)));case 9:case"end":return _context.stop()}}},_callee,this)}));return function getEncodedEsQuery(_x){return _ref.apply(this,arguments)}}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}Object.defineProperty(exports,"__esModule",{value:true});var kuery_1=__webpack_require__(1117);exports.getEncodedEsQuery=getEncodedEsQuery;function addVersion(item){if(item!=null){item.version=item.hasOwnProperty("trace")?"v2":"v1"}return item}exports.addVersion=addVersion},349:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var react_1=tslib_1.__importDefault(__webpack_require__(0));var EmptyMessage=function EmptyMessage(_ref){var _ref$heading=_ref.heading,heading=_ref$heading===undefined?"No data found.":_ref$heading,_ref$subheading=_ref.subheading,subheading=_ref$subheading===undefined?"Try another time range or reset the search filter.":_ref$subheading,_ref$hideSubheading=_ref.hideSubheading,hideSubheading=_ref$hideSubheading===undefined?false:_ref$hideSubheading;return react_1.default.createElement(eui_1.EuiEmptyPrompt,{titleSize:"s",title:react_1.default.createElement("div",null,heading||"No data found."),body:!hideSubheading&&subheading})};exports.EmptyMessage=EmptyMessage},4371:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(964)},44:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var i18n_1=__webpack_require__(9);var createHashHistory_1=tslib_1.__importDefault(__webpack_require__(4371));var lodash_1=__webpack_require__(1);var querystring_1=tslib_1.__importDefault(__webpack_require__(240));var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_redux_1=__webpack_require__(14);var react_router_dom_1=__webpack_require__(37);var rison_node_1=tslib_1.__importDefault(__webpack_require__(206));var chrome_1=tslib_1.__importDefault(__webpack_require__(8));var url_1=tslib_1.__importDefault(__webpack_require__(54));var DEFAULT_KIBANA_TIME_RANGE={time:{from:"now-24h",mode:"quick",to:"now"}};var viewJobLabel=i18n_1.i18n.translate("xpack.apm.viewMLJob.viewJobLabel",{defaultMessage:"View Job"});exports.ViewMLJob=function(_ref){var serviceName=_ref.serviceName,transactionType=_ref.transactionType,location=_ref.location,_ref$children=_ref.children,children=_ref$children===undefined?viewJobLabel:_ref$children;var pathname="/app/ml";var hash="/timeseriesexplorer";var jobId=serviceName+"-"+(transactionType?transactionType+"-":"")+"high_mean_response_time";var query={_g:{ml:{jobIds:[jobId]}}};return react_1.default.createElement(exports.UnconnectedKibanaLink,{pathname:pathname,hash:hash,query:query,children:children,location:location})};function toQuery(search){return search?querystring_1.default.parse(search.slice(1)):{}}exports.toQuery=toQuery;function fromQuery(query){var encodedQuery=encodeQuery(query,["_g","_a"]);return stringifyWithoutEncoding(encodedQuery)}exports.fromQuery=fromQuery;function encodeQuery(query){var exclude=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return lodash_1.mapValues(query,function(value,key){if(exclude.includes(key)){return encodeURI(value)}return querystring_1.default.escape(value)})}exports.encodeQuery=encodeQuery;function stringifyWithoutEncoding(query){return querystring_1.default.stringify(query,undefined,undefined,{encodeURIComponent:function encodeURIComponent(v){return v}})}function risonSafeDecode(value){try{var decoded=rison_node_1.default.decode(value);return lodash_1.isPlainObject(decoded)?decoded:{}}catch(e){return{}}}function decodeAndMergeG(g,toBeMerged){var decoded=risonSafeDecode(g);return _extends({},DEFAULT_KIBANA_TIME_RANGE,decoded,toBeMerged)}function RelativeLinkComponent(_ref2){var location=_ref2.location,path=_ref2.path,query=_ref2.query,disabled=_ref2.disabled,props=_objectWithoutProperties(_ref2,["location","path","query","disabled"]);if(disabled){return react_1.default.createElement(eui_1.EuiLink,Object.assign({"aria-disabled":"true"},props))}var pathname=path||lodash_1.get(props.to,"pathname")||location.pathname;var search=query||lodash_1.get(props.to,"query")?fromQuery(_extends({},toQuery(location.search),query,lodash_1.get(props.to,"query"))):location.search;return react_1.default.createElement(react_router_dom_1.Link,Object.assign({},props,{to:_extends({},location,props.to,{pathname:pathname,search:search}),className:"euiLink euiLink--primary "+(props.className||"")}))}exports.RelativeLinkComponent=RelativeLinkComponent;function getKibanaHref(kibanaLinkArgs){var location=kibanaLinkArgs.location,pathname=kibanaLinkArgs.pathname,hash=kibanaLinkArgs.hash,_kibanaLinkArgs$query=kibanaLinkArgs.query,query=_kibanaLinkArgs$query===undefined?{}:_kibanaLinkArgs$query;var currentQuery=toQuery(location.search);var g=decodeAndMergeG(currentQuery._g,query._g);var nextQuery=_extends({},query,{_g:rison_node_1.default.encode(g),_a:query._a?rison_node_1.default.encode(query._a):""});var search=stringifyWithoutEncoding(nextQuery);var href=url_1.default.format({pathname:chrome_1.default.addBasePath(pathname),hash:hash+"?"+search});return href}exports.getKibanaHref=getKibanaHref;exports.UnconnectedKibanaLink=function(_ref3){var location=_ref3.location,pathname=_ref3.pathname,hash=_ref3.hash,_ref3$query=_ref3.query,query=_ref3$query===undefined?{}:_ref3$query,props=_objectWithoutProperties(_ref3,["location","pathname","hash","query"]);var href=getKibanaHref({location:location,pathname:pathname,hash:hash,query:query});return react_1.default.createElement(eui_1.EuiLink,Object.assign({},props,{href:href}))};var withLocation=react_redux_1.connect(function(_ref4){var location=_ref4.location;return{location:location}},{});exports.RelativeLink=withLocation(RelativeLinkComponent);exports.KibanaLink=withLocation(exports.UnconnectedKibanaLink);function legacyEncodeURIComponent(rawUrl){return rawUrl&&encodeURIComponent(rawUrl).replace(/%/g,"~")}exports.legacyEncodeURIComponent=legacyEncodeURIComponent;function legacyDecodeURIComponent(encodedUrl){return encodedUrl&&decodeURIComponent(encodedUrl.replace(/~/g,"%"))}exports.legacyDecodeURIComponent=legacyDecodeURIComponent;function ExternalLink(props){return react_1.default.createElement(eui_1.EuiLink,Object.assign({target:"_blank",rel:"noopener noreferrer"},props))}exports.ExternalLink=ExternalLink;exports.history=createHashHistory_1.default()},4440:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(2461)},4687:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(3066)},4699:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(3067)},4757:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(3068)},4762:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(2555)},4823:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(2466)},492:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.KueryBar=undefined;var _reactRedux=__webpack_require__(14);var _urlParams=__webpack_require__(227);var _view=__webpack_require__(3097);var _view2=_interopRequireDefault(_view);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function mapStateToProps(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return{location:state.location,urlParams:(0,_urlParams.getUrlParams)(state)}}var KueryBar=exports.KueryBar=(0,_reactRedux.connect)(mapStateToProps)(_view2.default)},493:function(module,exports,__webpack_require__){"use strict";var loadTransactionList=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var serviceName=_ref.serviceName,start=_ref.start,end=_ref.end,kuery=_ref.kuery,_ref$transactionType=_ref.transactionType,transactionType=_ref$transactionType===undefined?"request":_ref$transactionType;var groups;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=callApi_1;_context.t1="/api/apm/services/"+serviceName+"/transaction_groups/"+transactionType;_context.t2=start;_context.t3=end;_context.next=6;return apm_1.getEncodedEsQuery(kuery);case 6:_context.t4=_context.sent;_context.t5={start:_context.t2,end:_context.t3,esFilterQuery:_context.t4};_context.t6={pathname:_context.t1,query:_context.t5};_context.next=11;return _context.t0.callApi.call(_context.t0,_context.t6);case 11:groups=_context.sent;return _context.abrupt("return",groups.map(function(group){group.sample=apm_1.addVersion(group.sample);return group}));case 13:case"end":return _context.stop()}}},_callee,this)}));return function loadTransactionList(_x){return _ref2.apply(this,arguments)}}();var loadTransactionDistribution=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref3){var serviceName=_ref3.serviceName,start=_ref3.start,end=_ref3.end,transactionName=_ref3.transactionName,_ref3$transactionType=_ref3.transactionType,transactionType=_ref3$transactionType===undefined?"request":_ref3$transactionType,transactionId=_ref3.transactionId,kuery=_ref3.kuery;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=callApi_1;_context2.t1="/api/apm/services/"+serviceName+"/transaction_groups/"+transactionType+"/"+encodeURIComponent(transactionName)+"/distribution";_context2.t2=start;_context2.t3=end;_context2.t4=transactionId;_context2.next=7;return apm_1.getEncodedEsQuery(kuery);case 7:_context2.t5=_context2.sent;_context2.t6={start:_context2.t2,end:_context2.t3,transactionId:_context2.t4,esFilterQuery:_context2.t5};_context2.t7={pathname:_context2.t1,query:_context2.t6};return _context2.abrupt("return",_context2.t0.callApi.call(_context2.t0,_context2.t7));case 11:case"end":return _context2.stop()}}},_callee2,this)}));return function loadTransactionDistribution(_x2){return _ref4.apply(this,arguments)}}();var loadDetailsCharts=function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(_ref5){var serviceName=_ref5.serviceName,start=_ref5.start,end=_ref5.end,kuery=_ref5.kuery,_ref5$transactionType=_ref5.transactionType,transactionType=_ref5$transactionType===undefined?"request":_ref5$transactionType,transactionName=_ref5.transactionName;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.t0=callApi_1;_context3.t1="/api/apm/services/"+serviceName+"/transaction_groups/"+transactionType+"/"+encodeURIComponent(transactionName)+"/charts";_context3.t2=start;_context3.t3=end;_context3.next=6;return apm_1.getEncodedEsQuery(kuery);case 6:_context3.t4=_context3.sent;_context3.t5={start:_context3.t2,end:_context3.t3,esFilterQuery:_context3.t4};_context3.t6={pathname:_context3.t1,query:_context3.t5};return _context3.abrupt("return",_context3.t0.callApi.call(_context3.t0,_context3.t6));case 10:case"end":return _context3.stop()}}},_callee3,this)}));return function loadDetailsCharts(_x3){return _ref6.apply(this,arguments)}}();var loadOverviewCharts=function(){var _ref8=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(_ref7){var serviceName=_ref7.serviceName,start=_ref7.start,end=_ref7.end,kuery=_ref7.kuery,_ref7$transactionType=_ref7.transactionType,transactionType=_ref7$transactionType===undefined?"request":_ref7$transactionType;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.t0=callApi_1;_context4.t1="/api/apm/services/"+serviceName+"/transaction_groups/"+transactionType+"/charts";_context4.t2=start;_context4.t3=end;_context4.next=6;return apm_1.getEncodedEsQuery(kuery);case 6:_context4.t4=_context4.sent;_context4.t5={start:_context4.t2,end:_context4.t3,esFilterQuery:_context4.t4};_context4.t6={pathname:_context4.t1,query:_context4.t5};return _context4.abrupt("return",_context4.t0.callApi.call(_context4.t0,_context4.t6));case 10:case"end":return _context4.stop()}}},_callee4,this)}));return function loadOverviewCharts(_x4){return _ref8.apply(this,arguments)}}();var loadOverviewChartsForAllTypes=function(){var _ref10=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(_ref9){var serviceName=_ref9.serviceName,start=_ref9.start,end=_ref9.end,kuery=_ref9.kuery;return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.t0=callApi_1;_context5.t1="/api/apm/services/"+serviceName+"/transaction_groups/charts";_context5.t2=start;_context5.t3=end;_context5.next=6;return apm_1.getEncodedEsQuery(kuery);case 6:_context5.t4=_context5.sent;_context5.t5={start:_context5.t2,end:_context5.t3,esFilterQuery:_context5.t4};_context5.t6={pathname:_context5.t1,query:_context5.t5};return _context5.abrupt("return",_context5.t0.callApi.call(_context5.t0,_context5.t6));case 10:case"end":return _context5.stop()}}},_callee5,this)}));return function loadOverviewChartsForAllTypes(_x5){return _ref10.apply(this,arguments)}}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}Object.defineProperty(exports,"__esModule",{value:true});var callApi_1=__webpack_require__(225);var apm_1=__webpack_require__(348);exports.loadTransactionList=loadTransactionList;exports.loadTransactionDistribution=loadTransactionDistribution;exports.loadDetailsCharts=loadDetailsCharts;exports.loadOverviewCharts=loadOverviewCharts;exports.loadOverviewChartsForAllTypes=loadOverviewChartsForAllTypes},494:function(module,exports,__webpack_require__){"use strict";var _templateObject=_taggedTemplateLiteral(["\n  padding-bottom: ",";\n"],["\n  padding-bottom: ",";\n"]),_templateObject2=_taggedTemplateLiteral(["\n  padding: "," 0 0;\n  text-align: center;\n  font-size: ",";\n  color: ",";\n  line-height: 1.5;\n"],["\n  padding: "," 0 0;\n  text-align: center;\n  font-size: ",";\n  color: ",";\n  line-height: 1.5;\n"]),_templateObject3=_taggedTemplateLiteral(["\n  font-size: ",";\n  color: ",";\n"],["\n  font-size: ",";\n  color: ",";\n"]),_templateObject4=_taggedTemplateLiteral(["\n  margin-right: ",";\n"],["\n  margin-right: ",";\n"]);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var lodash_1=tslib_1.__importDefault(__webpack_require__(1));var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var variables_1=__webpack_require__(26);var agents_1=__webpack_require__(1122);var url_1=__webpack_require__(44);var NestedKeyValueTable_1=__webpack_require__(3105);var propertyConfig_1=__webpack_require__(3106);var TableContainer=styled_components_1.default.div(_templateObject,variables_1.px(variables_1.units.double));var TableInfo=styled_components_1.default.div(_templateObject2,variables_1.px(variables_1.unit),variables_1.fontSize,variables_1.colors.gray2);var TableInfoHeader=styled_components_1.default(TableInfo)(_templateObject3,variables_1.fontSizes.large,variables_1.colors.black2);var EuiIconWithSpace=styled_components_1.default(eui_1.EuiIcon)(_templateObject4,variables_1.px(variables_1.units.half));function getPropertyTabNames(selected){return propertyConfig_1.PROPERTY_CONFIG.filter(function(_ref){var key=_ref.key,required=_ref.required;return required||selected.includes(key)}).map(function(_ref2){var key=_ref2.key;return key})}exports.getPropertyTabNames=getPropertyTabNames;function getAgentFeatureText(featureName){switch(featureName){case"user":return"You can configure your agent to add contextual information about your users.";case"tags":return"You can configure your agent to add filterable tags on transactions.";case"custom":return"You can configure your agent to add custom contextual information on transactions."}}function AgentFeatureTipMessage(_ref3){var featureName=_ref3.featureName,agentName=_ref3.agentName;var docsUrl=agents_1.getAgentFeatureDocsUrl(featureName,agentName);if(!docsUrl){return null}return react_1.default.createElement(TableInfo,null,react_1.default.createElement(EuiIconWithSpace,{type:"iInCircle"}),getAgentFeatureText(featureName)," ",react_1.default.createElement(url_1.ExternalLink,{href:docsUrl},"Learn more in the documentation."))}exports.AgentFeatureTipMessage=AgentFeatureTipMessage;exports.sortKeysByConfig=function(object,currentKey){var indexedPropertyConfig=lodash_1.default.indexBy(propertyConfig_1.PROPERTY_CONFIG,"key");var presorted=lodash_1.default.get(indexedPropertyConfig,currentKey+".presortedKeys",[]);return lodash_1.default.uniq([].concat(_toConsumableArray(presorted),_toConsumableArray(Object.keys(object).sort())))};function PropertiesTable(_ref4){var propData=_ref4.propData,propKey=_ref4.propKey,agentName=_ref4.agentName;return react_1.default.createElement(TableContainer,null,propData?react_1.default.createElement(NestedKeyValueTable_1.NestedKeyValueTable,{data:propData,parentKey:propKey,keySorter:exports.sortKeysByConfig,depth:1}):react_1.default.createElement(TableInfoHeader,null,"No data available"),react_1.default.createElement(AgentFeatureTipMessage,{featureName:propKey,agentName:agentName}))}exports.PropertiesTable=PropertiesTable},495:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _templateObject=_taggedTemplateLiteral(["\n  font-family: ",";\n"],["\n  font-family: ",";\n"]),_templateObject2=_taggedTemplateLiteral(["\n  margin-bottom: ",";\n  font-size: ",";\n  color: ",";\n\n  span {\n    cursor: help;\n  }\n"],["\n  margin-bottom: ",";\n  font-size: ",";\n  color: ",";\n\n  span {\n    cursor: help;\n  }\n"]),_templateObject3=_taggedTemplateLiteral(["\n  color: ",";\n"],["\n  color: ",";\n"]),_templateObject4=_taggedTemplateLiteral(["\n  display: inline-block;\n  line-height: ",";\n"],["\n  display: inline-block;\n  line-height: ",";\n"]),_templateObject5=_taggedTemplateLiteral(["\n  display: inline-block;\n  line-height: ",";\n  ",";\n"],["\n  display: inline-block;\n  line-height: ",";\n  ",";\n"]);function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var eui_2=__webpack_require__(2);var moment_1=tslib_1.__importDefault(__webpack_require__(13));var react_1=tslib_1.__importDefault(__webpack_require__(0));var styled_components_1=tslib_1.__importDefault(__webpack_require__(18));var variables_1=__webpack_require__(26);var TooltipFieldName=styled_components_1.default.span(_templateObject,variables_1.fontFamilyCode);var PropertyLabel=styled_components_1.default.div(_templateObject2,variables_1.px(variables_1.units.half),variables_1.fontSizes.small,variables_1.colors.gray3);var PropertyValueDimmed=styled_components_1.default.span(_templateObject3,variables_1.colors.gray3);var PropertyValue=styled_components_1.default.div(_templateObject4,variables_1.px(variables_1.unit));var PropertyValueTruncated=styled_components_1.default.span(_templateObject5,variables_1.px(variables_1.unit),variables_1.truncate("100%"));function TimestampValue(_ref){var timestamp=_ref.timestamp;var time=moment_1.default(timestamp);var timeAgo=timestamp?time.fromNow():"N/A";var timestampFull=timestamp?time.format("MMMM Do YYYY, HH:mm:ss.SSS"):"N/A";return react_1.default.createElement(PropertyValue,null,timeAgo," ",react_1.default.createElement(PropertyValueDimmed,null,"(",timestampFull,")"))}function getPropertyLabel(_ref2){var fieldName=_ref2.fieldName,label=_ref2.label;if(fieldName){return react_1.default.createElement(PropertyLabel,null,react_1.default.createElement(eui_2.EuiToolTip,{content:react_1.default.createElement(TooltipFieldName,null,fieldName)},react_1.default.createElement("span",null,label)))}return react_1.default.createElement(PropertyLabel,null,label)}function getPropertyValue(_ref3){var val=_ref3.val,fieldName=_ref3.fieldName,_ref3$truncated=_ref3.truncated,truncated=_ref3$truncated===undefined?false:_ref3$truncated;if(fieldName==="@timestamp"){return react_1.default.createElement(TimestampValue,{timestamp:val})}if(truncated){return react_1.default.createElement(eui_2.EuiToolTip,{content:String(val)},react_1.default.createElement(PropertyValueTruncated,null,String(val)))}return react_1.default.createElement(PropertyValue,null,val)}function StickyProperties(_ref4){var stickyProperties=_ref4.stickyProperties;var itemStyles={padding:"1em 1em 1em 0"};var groupStyles={marginTop:"-1em",marginBottom:"-1em"};return react_1.default.createElement(eui_1.EuiFlexGroup,{wrap:true,gutterSize:"none",style:groupStyles},stickyProperties&&stickyProperties.map(function(_ref5,i){var _ref5$width=_ref5.width,width=_ref5$width===undefined?0:_ref5$width,prop=_objectWithoutProperties(_ref5,["width"]);return react_1.default.createElement(eui_1.EuiFlexItem,{key:i,style:_extends({minWidth:width},itemStyles)},getPropertyLabel(prop),getPropertyValue(prop))}))}exports.StickyProperties=StickyProperties},496:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Indicator=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _templateObject=_taggedTemplateLiteral(["\n  display: flex;\n  align-items: center;\n  font-size: ",";\n  color: ",";\n  cursor: ",";\n  opacity: ",";\n  user-select: none;\n"],["\n  display: flex;\n  align-items: center;\n  font-size: ",";\n  color: ",";\n  cursor: ",";\n  opacity: ",";\n  user-select: none;\n"]),_templateObject2=_taggedTemplateLiteral(["\n  width: ",";\n  height: ",";\n  margin-right: ",";\n  background: ",";\n  border-radius: 100%;\n"],["\n  width: ",";\n  height: ",";\n  margin-right: ",";\n  background: ",";\n  border-radius: 100%;\n"]);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _styledComponents=__webpack_require__(18);var _styledComponents2=_interopRequireDefault(_styledComponents);var _variables=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var Container=_styledComponents2.default.div(_templateObject,function(props){return props.fontSize},_variables.colors.gray2,function(props){return props.clickable?"pointer":"initial"},function(props){return props.disabled?.4:1});var Indicator=exports.Indicator=_styledComponents2.default.span(_templateObject2,function(props){return(0,_variables.px)(props.radius)},function(props){return(0,_variables.px)(props.radius)},function(props){return(0,_variables.px)(props.radius/2)},function(props){return props.color});var Legend=function(_PureComponent){_inherits(Legend,_PureComponent);function Legend(){_classCallCheck(this,Legend);return _possibleConstructorReturn(this,(Legend.__proto__||Object.getPrototypeOf(Legend)).apply(this,arguments))}_createClass(Legend,[{key:"render",value:function render(){var _props=this.props,onClick=_props.onClick,text=_props.text,_props$color=_props.color,color=_props$color===undefined?_variables.colors.apmBlue:_props$color,_props$fontSize=_props.fontSize,fontSize=_props$fontSize===undefined?_variables.fontSizes.small:_props$fontSize,_props$radius=_props.radius,radius=_props$radius===undefined?_variables.units.minus-1:_props$radius,_props$disabled=_props.disabled,disabled=_props$disabled===undefined?false:_props$disabled,_props$clickable=_props.clickable,clickable=_props$clickable===undefined?false:_props$clickable,rest=_objectWithoutProperties(_props,["onClick","text","color","fontSize","radius","disabled","clickable"]);return _react2.default.createElement(Container,_extends({onClick:onClick,disabled:disabled,clickable:clickable||Boolean(onClick),fontSize:fontSize},rest),_react2.default.createElement(Indicator,{color:color,radius:radius}),text)}}]);return Legend}(_react.PureComponent);exports.default=Legend},4963:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(3069)},497:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};exports.getPlotValues=getPlotValues;exports.SharedPlot=SharedPlot;var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _d3Scale=__webpack_require__(358);var _reactVis=__webpack_require__(247);var _d=__webpack_require__(20);var _d2=_interopRequireDefault(_d);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _variables=__webpack_require__(26);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}var XY_HEIGHT=_variables.unit*16;var XY_MARGIN={top:_variables.unit,left:_variables.unit*5,right:0,bottom:_variables.unit*2};var getXScale=function getXScale(xMin,xMax,width){return(0,_d3Scale.scaleLinear)().domain([xMin,xMax]).range([XY_MARGIN.left,width-XY_MARGIN.right])};var getYScale=function getYScale(yMin,yMax){return(0,_d3Scale.scaleLinear)().domain([yMin,yMax]).range([XY_HEIGHT,0]).nice()};function getFlattenedCoordinates(visibleSeries,enabledSeries){var enabledCoordinates=_lodash2.default.flatten(enabledSeries.map(function(serie){return serie.data}));if(!_lodash2.default.isEmpty(enabledCoordinates)){return enabledCoordinates}return _lodash2.default.flatten(visibleSeries.map(function(serie){return serie.data}))}function getPlotValues(visibleSeries,enabledSeries,_ref){var width=_ref.width,_ref$yMin=_ref.yMin,yMin=_ref$yMin===undefined?0:_ref$yMin,_ref$yMax=_ref.yMax,yMax=_ref$yMax===undefined?"max":_ref$yMax;var flattenedCoordinates=getFlattenedCoordinates(visibleSeries,enabledSeries);if(_lodash2.default.isEmpty(flattenedCoordinates)){return null}var xMin=_d2.default.min(flattenedCoordinates,function(d){return d.x});var xMax=_d2.default.max(flattenedCoordinates,function(d){return d.x});if(yMax==="max"){yMax=_d2.default.max(flattenedCoordinates,function(d){return d.y})}if(yMin==="min"){yMin=_d2.default.min(flattenedCoordinates,function(d){return d.y})}var xScale=getXScale(xMin,xMax,width);var yScale=getYScale(yMin,yMax);var yMaxNice=yScale.domain()[1];var yTickValues=[0,yMaxNice/2,yMaxNice];return{x:xScale,y:yScale,yTickValues:yTickValues,XY_MARGIN:XY_MARGIN,XY_HEIGHT:XY_HEIGHT,XY_WIDTH:width}}function SharedPlot(_ref2){var plotValues=_ref2.plotValues,props=_objectWithoutProperties(_ref2,["plotValues"]);return _react2.default.createElement("div",{style:{position:"absolute",top:0,left:0}},_react2.default.createElement(_reactVis.XYPlot,_extends({dontCheckIfEmpty:true,height:XY_HEIGHT,margin:XY_MARGIN,xType:"time",width:plotValues.XY_WIDTH,xDomain:plotValues.x.domain(),yDomain:plotValues.y.domain()},props)))}SharedPlot.propTypes={plotValues:_propTypes2.default.shape({x:_propTypes2.default.func.isRequired,y:_propTypes2.default.func.isRequired,XY_WIDTH:_propTypes2.default.number.isRequired}).isRequired}},5011:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(2974)},685:function(module,exports,__webpack_require__){"use strict";var loadErrorGroupList=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(_ref){var serviceName=_ref.serviceName,start=_ref.start,end=_ref.end,kuery=_ref.kuery,size=_ref.size,sortField=_ref.sortField,sortDirection=_ref.sortDirection;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=callApi_1;_context.t1="/api/apm/services/"+serviceName+"/errors";_context.t2=start;_context.t3=end;_context.t4=size;_context.t5=sortField;_context.t6=sortDirection;_context.next=9;return apm_1.getEncodedEsQuery(kuery);case 9:_context.t7=_context.sent;_context.t8={start:_context.t2,end:_context.t3,size:_context.t4,sortField:_context.t5,sortDirection:_context.t6,esFilterQuery:_context.t7};_context.t9={pathname:_context.t1,query:_context.t8};return _context.abrupt("return",_context.t0.callApi.call(_context.t0,_context.t9));case 13:case"end":return _context.stop()}}},_callee,this)}));return function loadErrorGroupList(_x){return _ref2.apply(this,arguments)}}();var loadErrorGroupDetails=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(_ref3){var serviceName=_ref3.serviceName,start=_ref3.start,end=_ref3.end,kuery=_ref3.kuery,errorGroupId=_ref3.errorGroupId;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=callApi_1;_context2.t1="/api/apm/services/"+serviceName+"/errors/"+errorGroupId;_context2.t2=start;_context2.t3=end;_context2.next=6;return apm_1.getEncodedEsQuery(kuery);case 6:_context2.t4=_context2.sent;_context2.t5={start:_context2.t2,end:_context2.t3,esFilterQuery:_context2.t4};_context2.t6={pathname:_context2.t1,query:_context2.t5};_context2.t7={camelcase:false};return _context2.abrupt("return",_context2.t0.callApi.call(_context2.t0,_context2.t6,_context2.t7));case 11:case"end":return _context2.stop()}}},_callee2,this)}));return function loadErrorGroupDetails(_x2){return _ref4.apply(this,arguments)}}();var loadErrorDistribution=function(){var _ref6=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(_ref5){var serviceName=_ref5.serviceName,start=_ref5.start,end=_ref5.end,kuery=_ref5.kuery,errorGroupId=_ref5.errorGroupId;var pathname;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:pathname=errorGroupId?"/api/apm/services/"+serviceName+"/errors/"+errorGroupId+"/distribution":"/api/apm/services/"+serviceName+"/errors/distribution";_context3.t0=callApi_1;_context3.t1=pathname;_context3.t2=start;_context3.t3=end;_context3.next=7;return apm_1.getEncodedEsQuery(kuery);case 7:_context3.t4=_context3.sent;_context3.t5={start:_context3.t2,end:_context3.t3,esFilterQuery:_context3.t4};_context3.t6={pathname:_context3.t1,query:_context3.t5};return _context3.abrupt("return",_context3.t0.callApi.call(_context3.t0,_context3.t6));case 11:case"end":return _context3.stop()}}},_callee3,this)}));return function loadErrorDistribution(_x3){return _ref6.apply(this,arguments)}}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}Object.defineProperty(exports,"__esModule",{value:true});var callApi_1=__webpack_require__(225);var apm_1=__webpack_require__(348);exports.loadErrorGroupList=loadErrorGroupList;exports.loadErrorGroupDetails=loadErrorGroupDetails;exports.loadErrorDistribution=loadErrorDistribution},686:function(module,exports,__webpack_require__){"use strict";function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var lodash_1=__webpack_require__(1);var chrome_1=tslib_1.__importDefault(__webpack_require__(8));var callApi_1=__webpack_require__(225);exports.getAPMIndexPattern=lodash_1.memoize(_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var apmIndexPatternTitle,res,apmSavedObject;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:apmIndexPatternTitle=chrome_1.default.getInjected("apmIndexPatternTitle");_context.next=3;return callApi_1.callApi({pathname:"/api/saved_objects/_find",query:{type:"index-pattern",search:'"'+apmIndexPatternTitle+'"',search_fields:"title",per_page:200}});case 3:res=_context.sent;if(!lodash_1.isEmpty(res.savedObjects)){_context.next=6;break}return _context.abrupt("return");case 6:apmSavedObject=lodash_1.first(res.savedObjects.filter(function(savedObject){return savedObject.attributes.title===apmIndexPatternTitle}));return _context.abrupt("return",apmSavedObject);case 8:case"end":return _context.stop()}}},_callee,undefined)})))},687:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateLocation=updateLocation;var LOCATION_UPDATE=exports.LOCATION_UPDATE="LOCATION_UPDATE";function location(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{pathname:"",search:"",hash:""};var action=arguments[1];switch(action.type){case LOCATION_UPDATE:return action.location;default:return state}}function updateLocation(nextLocation){return{type:LOCATION_UPDATE,location:nextLocation}}exports.default=location},688:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.STATUS={FAILURE:"FAILURE",SUCCESS:"SUCCESS",LOADING:"LOADING"}},689:function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var url_1=__webpack_require__(44);var QueryWithIndexPattern_1=__webpack_require__(1121);var DiscoverButton=function(_react_1$default$Comp){_inherits(DiscoverButton,_react_1$default$Comp);function DiscoverButton(){_classCallCheck(this,DiscoverButton);return _possibleConstructorReturn(this,(DiscoverButton.__proto__||Object.getPrototypeOf(DiscoverButton)).apply(this,arguments))}_createClass(DiscoverButton,[{key:"render",value:function render(){var _props=this.props,query=_props.query,children=_props.children,rest=_objectWithoutProperties(_props,["query","children"]);return react_1.default.createElement(QueryWithIndexPattern_1.QueryWithIndexPattern,{query:query},function(queryWithIndexPattern){return react_1.default.createElement(url_1.KibanaLink,Object.assign({pathname:"/app/kibana",hash:"/discover",query:queryWithIndexPattern,children:children},rest))})}}]);return DiscoverButton}(react_1.default.Component);exports.DiscoverButton=DiscoverButton},691:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _tooltip=__webpack_require__(962);var _overlayTrigger=__webpack_require__(1019);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function TooltipOverlay(_ref){var children=_ref.children,content=_ref.content,_ref$delay=_ref.delay,delay=_ref$delay===undefined?1e3:_ref$delay;return _react2.default.createElement(_overlayTrigger.OverlayTrigger,{placement:"top",trigger:"hover",delay:delay,overlay:_react2.default.createElement(_tooltip.Tooltip,null,content)},children)}exports.default=TooltipOverlay;module.exports=exports["default"]},692:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var react_redux_1=__webpack_require__(14);var transactionOverviewCharts_1=__webpack_require__(693);var license_1=__webpack_require__(1131);var view_1=__webpack_require__(3124);var mapStateToProps=function mapStateToProps(state){return{mlAvailable:license_1.selectIsMLAvailable(state),hasMLJob:transactionOverviewCharts_1.selectHasMLJob(state)}};exports.TransactionCharts=react_redux_1.connect(mapStateToProps)(view_1.TransactionChartsView)},693:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var lodash_1=__webpack_require__(1);var react_1=tslib_1.__importDefault(__webpack_require__(0));var react_redux_request_1=__webpack_require__(74);var reselect_1=__webpack_require__(27);var transaction_groups_1=__webpack_require__(493);var chartSelectors_1=__webpack_require__(694);var urlParams_1=__webpack_require__(227);var ID="transactionOverviewCharts";var INITIAL_DATA={apmTimeseries:{totalHits:0,responseTimes:{avg:[],p95:[],p99:[]},tpmBuckets:[],overallAvgDuration:undefined},anomalyTimeseries:undefined};var selectChartData=function selectChartData(state){return state.reactReduxRequest[ID]};exports.getTransactionOverviewCharts=reselect_1.createSelector([urlParams_1.getUrlParams,selectChartData],function(urlParams){var overviewCharts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return _extends({},overviewCharts,{data:chartSelectors_1.getTransactionCharts(urlParams,overviewCharts.data||INITIAL_DATA)})});exports.selectHasMLJob=reselect_1.createSelector([selectChartData],function(chartData){return lodash_1.get(chartData,"data.anomalyTimeseries")!==undefined});function TransactionOverviewChartsRequest(_ref){var urlParams=_ref.urlParams,render=_ref.render;var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,transactionType=urlParams.transactionType,kuery=urlParams.kuery;if(!(serviceName&&start&&end)){return null}return react_1.default.createElement(react_redux_request_1.Request,{id:ID,fn:transaction_groups_1.loadOverviewCharts,args:[{serviceName:serviceName,start:start,end:end,transactionType:transactionType,kuery:kuery}],selector:exports.getTransactionOverviewCharts,render:render})}exports.TransactionOverviewChartsRequest=TransactionOverviewChartsRequest;function TransactionOverviewChartsRequestForAllTypes(_ref2){var urlParams=_ref2.urlParams,render=_ref2.render;var serviceName=urlParams.serviceName,start=urlParams.start,end=urlParams.end,kuery=urlParams.kuery;if(!(serviceName&&start&&end)){return null}return react_1.default.createElement(react_redux_request_1.Request,{id:ID,fn:transaction_groups_1.loadOverviewChartsForAllTypes,args:[{serviceName:serviceName,start:start,end:end,kuery:kuery}],selector:exports.getTransactionOverviewCharts,render:render})}exports.TransactionOverviewChartsRequestForAllTypes=TransactionOverviewChartsRequestForAllTypes},694:function(module,exports,__webpack_require__){"use strict";var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var i18n_1=__webpack_require__(9);var d3_1=tslib_1.__importDefault(__webpack_require__(20));var lodash_1=__webpack_require__(1);var lodash_mean_1=tslib_1.__importDefault(__webpack_require__(4762));var polished_1=__webpack_require__(234);var variables_1=__webpack_require__(26);var formatters_1=__webpack_require__(198);exports.getEmptySerie=lodash_1.memoize(function(){var start=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Date.now()-36e5;var end=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Date.now();var dates=d3_1.default.time.scale().domain([new Date(start),new Date(end)]).ticks();return[{data:dates.map(function(x){return{x:x.getTime(),y:1}})}]},function(start,end){return[start,end].join("_")});function getTransactionCharts(urlParams,timeseriesResponse){var start=urlParams.start,end=urlParams.end,transactionType=urlParams.transactionType;var apmTimeseries=timeseriesResponse.apmTimeseries,anomalyTimeseries=timeseriesResponse.anomalyTimeseries;var noHits=apmTimeseries.totalHits===0;var tpmSeries=noHits?exports.getEmptySerie(start,end):getTpmSeries(apmTimeseries,transactionType);var responseTimeSeries=noHits?exports.getEmptySerie(start,end):getResponseTimeSeries(apmTimeseries,anomalyTimeseries);var chartsResult={noHits:noHits,tpmSeries:tpmSeries,responseTimeSeries:responseTimeSeries};return chartsResult}exports.getTransactionCharts=getTransactionCharts;function getMemorySeries(urlParams,memoryChartResponse){var start=urlParams.start,end=urlParams.end;var series=memoryChartResponse.series,overallValues=memoryChartResponse.overallValues,totalHits=memoryChartResponse.totalHits;var seriesList=totalHits===0?exports.getEmptySerie(start,end):[{title:"System max",data:series.maximumPercentMemoryUsed,type:"linemark",color:variables_1.colors.apmBlue,legendValue:formatters_1.asPercent(overallValues.maximumPercentMemoryUsed||0,1)},{title:"System average",data:series.averagePercentMemoryUsed,type:"linemark",color:variables_1.colors.apmGreen,legendValue:formatters_1.asPercent(overallValues.averagePercentMemoryUsed||0,1)}];return _extends({},memoryChartResponse,{series:seriesList})}exports.getMemorySeries=getMemorySeries;function getCPUSeries(CPUChartResponse){var series=CPUChartResponse.series,overallValues=CPUChartResponse.overallValues;var seriesList=[{title:"System max",data:series.systemCPUMax,type:"linemark",color:variables_1.colors.apmBlue,legendValue:formatters_1.asPercent(overallValues.systemCPUMax||0,1)},{title:"System average",data:series.systemCPUAverage,type:"linemark",color:variables_1.colors.apmGreen,legendValue:formatters_1.asPercent(overallValues.systemCPUAverage||0,1)},{title:"Process max",data:series.processCPUMax,type:"linemark",color:variables_1.colors.apmOrange,legendValue:formatters_1.asPercent(overallValues.processCPUMax||0,1)},{title:"Process average",data:series.processCPUAverage,type:"linemark",color:variables_1.colors.apmYellow,legendValue:formatters_1.asPercent(overallValues.processCPUAverage||0,1)}];return _extends({},CPUChartResponse,{series:seriesList})}exports.getCPUSeries=getCPUSeries;function getResponseTimeSeries(apmTimeseries,anomalyTimeseries){var overallAvgDuration=apmTimeseries.overallAvgDuration;var _apmTimeseries$respon=apmTimeseries.responseTimes,avg=_apmTimeseries$respon.avg,p95=_apmTimeseries$respon.p95,p99=_apmTimeseries$respon.p99;var series=[{title:i18n_1.i18n.translate("xpack.apm.transactions.chart.averageLabel",{defaultMessage:"Avg."}),data:avg,legendValue:formatters_1.asMillis(overallAvgDuration),type:"linemark",color:variables_1.colors.apmBlue},{title:i18n_1.i18n.translate("xpack.apm.transactions.chart.95thPercentileLabel",{defaultMessage:"95th percentile"}),titleShort:"95th",data:p95,type:"linemark",color:variables_1.colors.apmYellow},{title:i18n_1.i18n.translate("xpack.apm.transactions.chart.99thPercentileLabel",{defaultMessage:"99th percentile"}),titleShort:"99th",data:p99,type:"linemark",color:variables_1.colors.apmOrange}];if(anomalyTimeseries){series.splice(1,0,getAnomalyBoundariesSeries(anomalyTimeseries.anomalyBoundaries),getAnomalyScoreSeries(anomalyTimeseries.anomalyScore))}return series}exports.getResponseTimeSeries=getResponseTimeSeries;function getAnomalyScoreSeries(data){return{title:i18n_1.i18n.translate("xpack.apm.transactions.chart.anomalyScoreLabel",{defaultMessage:"Anomaly score"}),hideLegend:true,hideTooltipValue:true,data:data,type:"areaMaxHeight",color:"none",areaColor:polished_1.rgba(variables_1.colors.apmRed,.1)}}exports.getAnomalyScoreSeries=getAnomalyScoreSeries;function getAnomalyBoundariesSeries(data){return{title:i18n_1.i18n.translate("xpack.apm.transactions.chart.anomalyBoundariesLabel",{defaultMessage:"Anomaly Boundaries"}),hideLegend:true,hideTooltipValue:true,data:data,type:"area",color:"none",areaColor:polished_1.rgba(variables_1.colors.apmBlue,.1)}}function getTpmSeries(apmTimeseries,transactionType){var tpmBuckets=apmTimeseries.tpmBuckets;var bucketKeys=tpmBuckets.map(function(_ref){var key=_ref.key;return key});var getColor=getColorByKey(bucketKeys);var getTpmLegendTitle=function getTpmLegendTitle(bucketKey){if(bucketKey==="transaction_result_missing"){return""}return bucketKey};return tpmBuckets.map(function(bucket){var avg=lodash_mean_1.default(bucket.dataPoints.map(function(p){return p.y}));return{title:getTpmLegendTitle(bucket.key),data:bucket.dataPoints,legendValue:formatters_1.asDecimal(avg)+" "+formatters_1.tpmUnit(transactionType||""),type:"linemark",color:getColor(bucket.key)}})}exports.getTpmSeries=getTpmSeries;function getColorByKey(keys){var assignedColors={"HTTP 2xx":variables_1.colors.apmGreen,"HTTP 3xx":variables_1.colors.apmYellow,"HTTP 4xx":variables_1.colors.apmOrange,"HTTP 5xx":variables_1.colors.apmRed2};var unknownKeys=lodash_1.difference(keys,Object.keys(assignedColors));var unassignedColors=lodash_1.zipObject(unknownKeys,[variables_1.colors.apmBlue,variables_1.colors.apmPurple,variables_1.colors.apmPink,variables_1.colors.apmTan,variables_1.colors.apmRed,variables_1.colors.apmBrown]);return function(key){return assignedColors[key]||unassignedColors[key]}}},695:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.InnerCustomPlot=undefined;var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _lodash=__webpack_require__(1);var _lodash2=_interopRequireDefault(_lodash);var _reactVis=__webpack_require__(247);var _propTypes=__webpack_require__(6);var _propTypes2=_interopRequireDefault(_propTypes);var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _Legends=__webpack_require__(3125);var _Legends2=_interopRequireDefault(_Legends);var _StaticPlot=__webpack_require__(3126);var _StaticPlot2=_interopRequireDefault(_StaticPlot);var _InteractivePlot=__webpack_require__(3128);var _InteractivePlot2=_interopRequireDefault(_InteractivePlot);var _VoronoiPlot=__webpack_require__(3130);var _VoronoiPlot2=_interopRequireDefault(_VoronoiPlot);var _reselect=__webpack_require__(27);var _plotUtils=__webpack_require__(497);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var VISIBLE_LEGEND_COUNT=4;function getHiddenLegendCount(series){return series.filter(function(serie){return serie.hideLegend}).length}var InnerCustomPlot=exports.InnerCustomPlot=function(_PureComponent){_inherits(InnerCustomPlot,_PureComponent);function InnerCustomPlot(){var _ref;var _temp,_this,_ret;_classCallCheck(this,InnerCustomPlot);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=InnerCustomPlot.__proto__||Object.getPrototypeOf(InnerCustomPlot)).call.apply(_ref,[this].concat(args))),_this),_initialiseProps.call(_this),_temp),_possibleConstructorReturn(_this,_ret)}_createClass(InnerCustomPlot,[{key:"render",value:function render(){var _props=this.props,series=_props.series,truncateLegends=_props.truncateLegends,noHits=_props.noHits,width=_props.width;if(_lodash2.default.isEmpty(series)||!width){return null}var hiddenSeriesCount=Math.max(series.length-VISIBLE_LEGEND_COUNT-getHiddenLegendCount(series),0);var visibleSeries=this.getVisibleSeries({series:series});var enabledSeries=this.getEnabledSeries({visibleSeries:visibleSeries,seriesEnabledState:this.state.seriesEnabledState});var options=this.getOptions(this.props);var plotValues=this.getPlotValues({visibleSeries:visibleSeries,enabledSeries:enabledSeries,options:options});if(_lodash2.default.isEmpty(plotValues)){return null}return _react2.default.createElement(_react.Fragment,null,_react2.default.createElement("div",{style:{position:"relative",height:plotValues.XY_HEIGHT}},_react2.default.createElement(_StaticPlot2.default,{noHits:noHits,plotValues:plotValues,series:enabledSeries,tickFormatY:this.props.tickFormatY,tickFormatX:this.props.tickFormatX}),_react2.default.createElement(_InteractivePlot2.default,{plotValues:plotValues,hoverX:this.props.hoverX,series:enabledSeries,formatTooltipValue:this.props.formatTooltipValue,isDrawing:this.state.isDrawing,selectionStart:this.state.selectionStart,selectionEnd:this.state.selectionEnd}),_react2.default.createElement(_VoronoiPlot2.default,{noHits:noHits,plotValues:plotValues,series:enabledSeries,onHover:this.onHover,onMouseLeave:this.onMouseLeave,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp})),_react2.default.createElement(_Legends2.default,{noHits:noHits,truncateLegends:truncateLegends,series:visibleSeries,hiddenSeriesCount:hiddenSeriesCount,clickLegend:this.clickLegend,seriesEnabledState:this.state.seriesEnabledState}))}}]);return InnerCustomPlot}(_react.PureComponent);var _initialiseProps=function _initialiseProps(){var _this2=this;this.state={seriesEnabledState:[],isDrawing:false,selectionStart:null,selectionEnd:null};this.getEnabledSeries=(0,_reselect.createSelector)(function(state){return state.visibleSeries},function(state){return state.seriesEnabledState},function(visibleSeries,seriesEnabledState){return visibleSeries.filter(function(serie,i){return!seriesEnabledState[i]})});this.getOptions=(0,_reselect.createSelector)(function(state){return state.width},function(state){return state.yMin},function(state){return state.yMax},function(width,yMin,yMax){return{width:width,yMin:yMin,yMax:yMax}});this.getPlotValues=(0,_reselect.createSelector)(function(state){return state.visibleSeries},function(state){return state.enabledSeries},function(state){return state.options},_plotUtils.getPlotValues);this.getVisibleSeries=(0,_reselect.createSelector)(function(state){return state.series},function(series){return series.slice(0,VISIBLE_LEGEND_COUNT+getHiddenLegendCount(series))});this.clickLegend=function(i){_this2.setState(function(_ref2){var seriesEnabledState=_ref2.seriesEnabledState;var nextSeriesEnabledState=_this2.props.series.map(function(value,_i){var disabledValue=seriesEnabledState[_i];return i===_i?!disabledValue:!!disabledValue});return{seriesEnabledState:nextSeriesEnabledState}})};this.onMouseLeave=function(){var _props2;if(_this2.state.isDrawing){_this2.setState({isDrawing:false})}(_props2=_this2.props).onMouseLeave.apply(_props2,arguments)};this.onMouseDown=function(node){return _this2.setState({isDrawing:true,selectionStart:node.x,selectionEnd:null})};this.onMouseUp=function(){if(_this2.state.selectionEnd!==null){var _sort=[_this2.state.selectionStart,_this2.state.selectionEnd].sort(),_sort2=_slicedToArray(_sort,2),start=_sort2[0],end=_sort2[1];_this2.props.onSelectionEnd({start:start,end:end})}_this2.setState({isDrawing:false})};this.onHover=function(node){_this2.props.onHover(node.x);if(_this2.state.isDrawing){_this2.setState({selectionEnd:node.x})}}};InnerCustomPlot.propTypes={formatTooltipValue:_propTypes2.default.func,hoverX:_propTypes2.default.number,noHits:_propTypes2.default.bool.isRequired,onHover:_propTypes2.default.func.isRequired,onMouseLeave:_propTypes2.default.func.isRequired,onSelectionEnd:_propTypes2.default.func.isRequired,series:_propTypes2.default.array.isRequired,tickFormatY:_propTypes2.default.func,truncateLegends:_propTypes2.default.bool,width:_propTypes2.default.number.isRequired};InnerCustomPlot.defaultProps={formatTooltipValue:function formatTooltipValue(p){return p.y},tickFormatX:undefined,tickFormatY:function tickFormatY(y){return y},truncateLegends:false};exports.default=(0,_reactVis.makeWidthFlexible)(InnerCustomPlot)},696:function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var eui_1=__webpack_require__(2);var lodash_1=__webpack_require__(1);var react_1=tslib_1.__importStar(__webpack_require__(0));var ManagedTable=function(_react_1$Component){_inherits(ManagedTable,_react_1$Component);function ManagedTable(props){_classCallCheck(this,ManagedTable);var _this=_possibleConstructorReturn(this,(ManagedTable.__proto__||Object.getPrototypeOf(ManagedTable)).call(this,props));_this.onTableChange=function(_ref){var _ref$page=_ref.page,page=_ref$page===undefined?{}:_ref$page,_ref$sort=_ref.sort,sort=_ref$sort===undefined?{}:_ref$sort;_this.setState({page:page,sort:sort})};var defaultSort={field:lodash_1.get(props,"columns[0].field",""),direction:"asc"};var _props$initialPageInd=props.initialPageIndex,initialPageIndex=_props$initialPageInd===undefined?0:_props$initialPageInd,_props$initialPageSiz=props.initialPageSize,initialPageSize=_props$initialPageSiz===undefined?10:_props$initialPageSiz,_props$initialSort=props.initialSort,initialSort=_props$initialSort===undefined?defaultSort:_props$initialSort;_this.state={page:{index:initialPageIndex,size:initialPageSize},sort:initialSort};return _this}_createClass(ManagedTable,[{key:"getCurrentItems",value:function getCurrentItems(){var items=this.props.items;var _state=this.state,_state$sort=_state.sort,sort=_state$sort===undefined?{}:_state$sort,_state$page=_state.page,page=_state$page===undefined?{}:_state$page;var sorted=lodash_1.sortByOrder(items,sort.field,sort.direction);return sorted.slice(page.index*page.size,(page.index+1)*page.size)}},{key:"render",value:function render(){var _props=this.props,columns=_props.columns,noItemsMessage=_props.noItemsMessage,items=_props.items,_props$hidePerPageOpt=_props.hidePerPageOptions,hidePerPageOptions=_props$hidePerPageOpt===undefined?true:_props$hidePerPageOpt;var _state2=this.state,page=_state2.page,sort=_state2.sort;return react_1.default.createElement(eui_1.EuiBasicTable,{noItemsMessage:noItemsMessage,items:this.getCurrentItems(),columns:columns,pagination:{hidePerPageOptions:hidePerPageOptions,totalItemCount:items.length,pageIndex:page.index,pageSize:page.size},sorting:{sort:sort},onChange:this.onTableChange})}}]);return ManagedTable}(react_1.Component);exports.ManagedTable=ManagedTable},697:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=__webpack_require__(5);var react_1=tslib_1.__importDefault(__webpack_require__(0));var url_1=__webpack_require__(44);function getLinkProps(transaction){var serviceName=transaction.context.service.name;var transactionType=transaction.transaction.type;var traceId=transaction.version==="v2"?transaction.trace.id:undefined;var transactionId=transaction.transaction.id;var name=transaction.transaction.name;var encodedName=url_1.legacyEncodeURIComponent(name);return{hash:"/"+serviceName+"/transactions/"+transactionType+"/"+encodedName,query:{traceId:traceId,transactionId:transactionId}}}exports.getLinkProps=getLinkProps;exports.TransactionLink=function(_ref){var transaction=_ref.transaction,children=_ref.children;if(!transaction){return null}var linkProps=getLinkProps(transaction);if(!linkProps){return react_1.default.createElement(react_1.default.Fragment,null,children)}return react_1.default.createElement(url_1.KibanaLink,Object.assign({pathname:"/app/apm"},linkProps),children)}},7:function(module,exports){module.exports=vendors},712:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(3070)},74:function(module,exports,__webpack_require__){module.exports=__webpack_require__(7)(2973)}});